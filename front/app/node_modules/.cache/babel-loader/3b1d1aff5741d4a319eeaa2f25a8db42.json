{"ast":null,"code":"import _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/components/shifts/NewSubmitShifts.jsx\";\n\nimport { Button, Chip, CircularProgress, Divider, List, ListItem, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { SubmitFeed } from \"../../components/shifts/SubmitFeed\";\nimport { sendShifts, submitShifts } from \"../../apis/shifts\";\nimport React, { useContext, useEffect, useMemo, useState } from \"react\";\nimport AddBoxOutlinedIcon from '@mui/icons-material/AddBoxOutlined';\nimport { getMonAndDate } from \"../../lib/calcDate\";\nimport { fetchNewShifts } from \"../../apis/shifts\";\nimport { SnackbarContext } from \"../../contexts/snackBar\";\nvar style = {\n  zIndex: 100,\n  backgroundColor: \"white\",\n  width: \"100%\",\n  height: \"100%\",\n  position: \"absolute\",\n  top: 0\n};\nvar chipStyle = {\n  position: 'fixed',\n  bottom: 30,\n  left: 20,\n  zIndex: 200\n};\nexport var NewSubmitShifts = function NewSubmitShifts(_ref) {\n  var times = _ref.times,\n      list = _ref.list,\n      setList = _ref.setList;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var sb = useContext(SnackbarContext);\n\n  var sendNewShifts = function sendNewShifts(e) {\n    e.preventDefault();\n\n    if (!window.confirm(\"シフトを提出しますか？\")) {\n      return false;\n    }\n\n    sendShifts(list).then(function (res) {\n      if (res.status === 201) {\n        setOpen(false);\n        setLoading(false);\n        sb.setSnackBar({\n          open: true,\n          variant: \"success\",\n          content: \"シフトを提出しました。\"\n        });\n      }\n    });\n  };\n\n  var NewShifts = function NewShifts() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n      style: style,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, list.length > 0 ? /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: function onSubmit(e) {\n        return sendNewShifts(e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(List, {\n      style: {\n        height: 450,\n        overflow: \"scroll\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, list.map(function (elm, index) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        sx: {\n          height: 60\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(SubmitFeed, {\n        elm: elm,\n        times: times,\n        list: list,\n        setList: setList,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Divider, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      }));\n    })), /*#__PURE__*/React.createElement(Button, {\n      fullWidth: true,\n      type: \"submit\",\n      color: \"success\",\n      variant: \"contained\",\n      margin: \"normal\",\n      endIcon: loading && /*#__PURE__*/React.createElement(CircularProgress, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 36\n        }\n      }),\n      onClick: function onClick(e) {\n        sendNewShifts(e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, \"\\u63D0\\u3000\\u51FA\")) : /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, \"\\u73FE\\u5728\\u63D0\\u51FA\\u53EF\\u80FD\\u306A\\u30B7\\u30D5\\u30C8\\u306F\\u3042\\u308A\\u307E\\u305B\\u3093\")), /*#__PURE__*/React.createElement(Chip, {\n      style: chipStyle,\n      onClick: function onClick() {\n        return setOpen(!open);\n      },\n      size: \"medium\",\n      label: \"\\u623B\\u308B\",\n      variant: \"outlied\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  useEffect(function () {\n    fetchNewShifts().then(function (res) {\n      setList(res.data.shifts);\n    });\n  }, []);\n  return useMemo(function () {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, open ? /*#__PURE__*/React.createElement(NewShifts, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }) : /*#__PURE__*/React.createElement(Chip, {\n      sx: chipStyle,\n      onClick: function onClick() {\n        return setOpen(!open);\n      },\n      size: \"medium\",\n      label: \"\\u65B0\\u898F\\u63D0\\u51FA\",\n      color: \"secondary\",\n      variant: \"contained\",\n      icon: /*#__PURE__*/React.createElement(AddBoxOutlinedIcon, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }));\n  }, [open]);\n};","map":{"version":3,"names":["Button","Chip","CircularProgress","Divider","List","ListItem","Typography","Box","SubmitFeed","sendShifts","submitShifts","React","useContext","useEffect","useMemo","useState","AddBoxOutlinedIcon","getMonAndDate","fetchNewShifts","SnackbarContext","style","zIndex","backgroundColor","width","height","position","top","chipStyle","bottom","left","NewSubmitShifts","times","list","setList","open","setOpen","loading","setLoading","sb","sendNewShifts","e","preventDefault","window","confirm","then","res","status","setSnackBar","variant","content","NewShifts","length","overflow","map","elm","index","data","shifts"],"sources":["/usr/src/app/app/src/components/shifts/NewSubmitShifts.jsx"],"sourcesContent":["import { Button, Chip, CircularProgress, Divider, List, ListItem, Typography } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport { SubmitFeed } from \"../../components/shifts/SubmitFeed\";\r\nimport { sendShifts, submitShifts } from \"../../apis/shifts\";\r\nimport React, { useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\nimport AddBoxOutlinedIcon from '@mui/icons-material/AddBoxOutlined';\r\nimport { getMonAndDate } from \"../../lib/calcDate\";\r\nimport { fetchNewShifts } from \"../../apis/shifts\";\r\nimport { SnackbarContext } from \"../../contexts/snackBar\";\r\n\r\nconst style = {\r\n    zIndex:100, \r\n    backgroundColor:\"white\",\r\n    width:\"100%\", \r\n    height: \"100%\",\r\n    position:\"absolute\",\r\n    top:0\r\n\r\n}\r\n\r\nconst chipStyle = {\r\n    position: 'fixed',\r\n    bottom: 30,\r\n    left: 20,\r\n    zIndex:200 \r\n}\r\n\r\nexport const NewSubmitShifts = ({\r\n    times,\r\n    list,\r\n    setList\r\n}) => {\r\n \r\n    const [open, setOpen] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const sb = useContext(SnackbarContext)\r\n    \r\n    const sendNewShifts = (e) => {\r\n        e.preventDefault();\r\n        if(!window.confirm(\"シフトを提出しますか？\")){return false}\r\n        sendShifts(list)\r\n        .then(res => {\r\n            if(res.status ===201){\r\n                setOpen(false)\r\n                setLoading(false)\r\n                sb.setSnackBar({open: true, variant:\"success\",content:\"シフトを提出しました。\"})        \r\n            }\r\n        }\r\n            )\r\n    }\r\n\r\n    const NewShifts = () => {\r\n        \r\n            return(\r\n            <>\r\n            <Box style={style}>\r\n            {list.length > 0 ?\r\n            <form  onSubmit={e=>sendNewShifts(e)}>  \r\n            <List style={{height:450,overflow:\"scroll\"}}>\r\n                {list.map((elm,index) => \r\n                <div key={index}>\r\n                    <ListItem sx={{height:60}}>\r\n                        <SubmitFeed\r\n                            elm={elm}\r\n                            times={times} \r\n                            list={list} \r\n                            setList={setList}\r\n                        />\r\n                    </ListItem>\r\n                    <Divider/> \r\n            \r\n        \r\n                </div>\r\n                )}\r\n            </List>\r\n                <Button\r\n                fullWidth\r\n                type=\"submit\" \r\n                color=\"success\" \r\n                variant=\"contained\" \r\n                margin=\"normal\"\r\n                endIcon={loading &&<CircularProgress/>}\r\n                onClick={(e)=> {sendNewShifts(e)}}>\r\n                    提　出 \r\n                </Button>\r\n                </form>\r\n        \r\n        :\r\n        <Typography variant=\"h5\">\r\n            現在提出可能なシフトはありません\r\n        </Typography>\r\n            }\r\n\r\n        </Box>\r\n        <Chip\r\n            style={chipStyle}\r\n            onClick={()=>setOpen(!open)}\r\n            size=\"medium\"\r\n            label=\"戻る\"\r\n            variant=\"outlied\"\r\n                />  \r\n            </>\r\n        )\r\n    }\r\n\r\n\r\n   \r\n    useEffect(() => {     \r\n        fetchNewShifts()\r\n        .then(res => {\r\n            setList(res.data.shifts)\r\n    })\r\n       \r\n\r\n    },[])\r\n    \r\n    \r\n  \r\n    return useMemo(()=> {\r\n\r\n        return (\r\n      <>\r\n      {\r\n          open?\r\n          <NewShifts/>\r\n          :\r\n          <Chip\r\n          sx={chipStyle}\r\n          onClick={()=>setOpen(!open)}\r\n          size=\"medium\"\r\n          label=\"新規提出\"\r\n          color=\"secondary\" \r\n          variant=\"contained\" \r\n          icon={<AddBoxOutlinedIcon/>}\r\n      />  \r\n      }\r\n      </>    \r\n    )\r\n    },[open])\r\n\r\n\r\n\r\n}\r\n"],"mappings":";;;;;AAAA,SAASA,MAAT,EAAiBC,IAAjB,EAAuBC,gBAAvB,EAAyCC,OAAzC,EAAkDC,IAAlD,EAAwDC,QAAxD,EAAkEC,UAAlE,QAAoF,eAApF;AACA,SAASC,GAAT,QAAoB,aAApB;AACA,SAASC,UAAT,QAA2B,oCAA3B;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,mBAAzC;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,OAAvC,EAAgDC,QAAhD,QAAgE,OAAhE;AAEA,OAAOC,kBAAP,MAA+B,oCAA/B;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,cAAT,QAA+B,mBAA/B;AACA,SAASC,eAAT,QAAgC,yBAAhC;AAEA,IAAMC,KAAK,GAAG;EACVC,MAAM,EAAC,GADG;EAEVC,eAAe,EAAC,OAFN;EAGVC,KAAK,EAAC,MAHI;EAIVC,MAAM,EAAE,MAJE;EAKVC,QAAQ,EAAC,UALC;EAMVC,GAAG,EAAC;AANM,CAAd;AAUA,IAAMC,SAAS,GAAG;EACdF,QAAQ,EAAE,OADI;EAEdG,MAAM,EAAE,EAFM;EAGdC,IAAI,EAAE,EAHQ;EAIdR,MAAM,EAAC;AAJO,CAAlB;AAOA,OAAO,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,OAIzB;EAAA,IAHFC,KAGE,QAHFA,KAGE;EAAA,IAFFC,IAEE,QAFFA,IAEE;EAAA,IADFC,OACE,QADFA,OACE;;EAAA,gBAEsBlB,QAAQ,CAAC,KAAD,CAF9B;EAAA;EAAA,IAEKmB,IAFL;EAAA,IAEWC,OAFX;;EAAA,iBAG4BpB,QAAQ,CAAC,KAAD,CAHpC;EAAA;EAAA,IAGKqB,OAHL;EAAA,IAGcC,UAHd;;EAIF,IAAMC,EAAE,GAAG1B,UAAU,CAACO,eAAD,CAArB;;EAEA,IAAMoB,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD,EAAO;IACzBA,CAAC,CAACC,cAAF;;IACA,IAAG,CAACC,MAAM,CAACC,OAAP,CAAe,aAAf,CAAJ,EAAkC;MAAC,OAAO,KAAP;IAAa;;IAChDlC,UAAU,CAACuB,IAAD,CAAV,CACCY,IADD,CACM,UAAAC,GAAG,EAAI;MACT,IAAGA,GAAG,CAACC,MAAJ,KAAc,GAAjB,EAAqB;QACjBX,OAAO,CAAC,KAAD,CAAP;QACAE,UAAU,CAAC,KAAD,CAAV;QACAC,EAAE,CAACS,WAAH,CAAe;UAACb,IAAI,EAAE,IAAP;UAAac,OAAO,EAAC,SAArB;UAA+BC,OAAO,EAAC;QAAvC,CAAf;MACH;IACJ,CAPD;EASH,CAZD;;EAcA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;IAEhB,oBACA,uDACA,oBAAC,GAAD;MAAK,KAAK,EAAE9B,KAAZ;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACCY,IAAI,CAACmB,MAAL,GAAc,CAAd,gBACD;MAAO,QAAQ,EAAE,kBAAAX,CAAC;QAAA,OAAED,aAAa,CAACC,CAAD,CAAf;MAAA,CAAlB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACA,oBAAC,IAAD;MAAM,KAAK,EAAE;QAAChB,MAAM,EAAC,GAAR;QAAY4B,QAAQ,EAAC;MAArB,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACKpB,IAAI,CAACqB,GAAL,CAAS,UAACC,GAAD,EAAKC,KAAL;MAAA,oBACV;QAAK,GAAG,EAAEA,KAAV;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,gBACI,oBAAC,QAAD;QAAU,EAAE,EAAE;UAAC/B,MAAM,EAAC;QAAR,CAAd;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,gBACI,oBAAC,UAAD;QACI,GAAG,EAAE8B,GADT;QAEI,KAAK,EAAEvB,KAFX;QAGI,IAAI,EAAEC,IAHV;QAII,OAAO,EAAEC,OAJb;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADJ,CADJ,eASI,oBAAC,OAAD;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EATJ,CADU;IAAA,CAAT,CADL,CADA,eAkBI,oBAAC,MAAD;MACA,SAAS,MADT;MAEA,IAAI,EAAC,QAFL;MAGA,KAAK,EAAC,SAHN;MAIA,OAAO,EAAC,WAJR;MAKA,MAAM,EAAC,QALP;MAMA,OAAO,EAAEG,OAAO,iBAAG,oBAAC,gBAAD;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EANnB;MAOA,OAAO,EAAE,iBAACI,CAAD,EAAM;QAACD,aAAa,CAACC,CAAD,CAAb;MAAiB,CAPjC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,wBAlBJ,CADC,gBAgCL,oBAAC,UAAD;MAAY,OAAO,EAAC,IAApB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,sGAjCI,CADA,eAwCJ,oBAAC,IAAD;MACI,KAAK,EAAEb,SADX;MAEI,OAAO,EAAE;QAAA,OAAIQ,OAAO,CAAC,CAACD,IAAF,CAAX;MAAA,CAFb;MAGI,IAAI,EAAC,QAHT;MAII,KAAK,EAAC,cAJV;MAKI,OAAO,EAAC,SALZ;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAxCI,CADA;EAkDP,CApDD;;EAwDArB,SAAS,CAAC,YAAM;IACZK,cAAc,GACb0B,IADD,CACM,UAAAC,GAAG,EAAI;MACTZ,OAAO,CAACY,GAAG,CAACW,IAAJ,CAASC,MAAV,CAAP;IACP,CAHG;EAMH,CAPQ,EAOP,EAPO,CAAT;EAWA,OAAO3C,OAAO,CAAC,YAAK;IAEhB,oBACF,0CAEIoB,IAAI,gBACJ,oBAAC,SAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADI,gBAGJ,oBAAC,IAAD;MACA,EAAE,EAAEP,SADJ;MAEA,OAAO,EAAE;QAAA,OAAIQ,OAAO,CAAC,CAACD,IAAF,CAAX;MAAA,CAFT;MAGA,IAAI,EAAC,QAHL;MAIA,KAAK,EAAC,0BAJN;MAKA,KAAK,EAAC,WALN;MAMA,OAAO,EAAC,WANR;MAOA,IAAI,eAAE,oBAAC,kBAAD;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAPN;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EALJ,CADE;EAkBH,CApBa,EAoBZ,CAACA,IAAD,CApBY,CAAd;AAwBH,CAnHM"},"metadata":{},"sourceType":"module"}