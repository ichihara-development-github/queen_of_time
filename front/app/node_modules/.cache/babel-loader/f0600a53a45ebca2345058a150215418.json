{"ast":null,"code":"import _toConsumableArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/containers/employeeSide/EmployeeAttendance.jsx\";\n\nimport React, { useEffect, useReducer, useState } from \"react\";\nimport { Box, Button, Skeleton, Stack, Switch, Tooltip, Typography } from \"@mui/material\";\nimport { AttendanceGraph } from \"../../components/attendances/AttendanceGraph\";\nimport { fetchAttendance } from \"../../apis/attendance\";\nimport { AttendanceReducer, initialState } from \"../../reducers/attendances\";\nimport { RequestModal } from \"./RequestModal\";\nimport { SelectDate } from \"../../components/shared/SelectDate\";\nimport { AttendanceIndex } from \"../../components/attendances/AttendanceIndex\";\nimport { SelectMonth } from \"../../components/shared/SelectMonth\";\nexport var EmployeeAttendance = function EmployeeAttendance(_ref) {\n  var setSbParams = _ref.setSbParams;\n\n  //----------------------state----------------\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      list = _useState4[0],\n      setList = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      checked = _useState6[0],\n      setChecked = _useState6[1];\n\n  var _useReducer = useReducer(AttendanceReducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var handleCheck = function handleCheck(e) {\n    var id = e.target.id;\n    var timestamp = state.attendanceData.find(function (elm) {\n      return elm.id == id;\n    });\n\n    if (e.target.checked) {\n      setChecked([].concat(_toConsumableArray(checked), [timestamp]));\n    } else {\n      var filtered = checked.filter(function (elm) {\n        return elm.id != id;\n      });\n      setChecked(filtered);\n    }\n  };\n\n  useEffect(function () {\n    dispatch({\n      type: \"FETCHING\"\n    });\n\n    try {\n      fetchAttendance().then(function (res) {\n        dispatch({\n          type: \"FETCH_END\",\n          payload: res.data.attendances\n        });\n        setList(res.data.attendances);\n      });\n    } catch (e) {\n      console.log(e.message);\n    }\n  }, []);\n\n  var Display = function Display() {\n    return /*#__PURE__*/React.createElement(Box, {\n      sx: {\n        margin: \"0 auto\",\n        maxWidth: 600\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(AttendanceIndex, {\n      state: state.fetchState,\n      list: list,\n      checked: checked,\n      handleCheck: handleCheck,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    mx: 50,\n    sx: {\n      p: 2,\n      height: 400\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    direction: \"row\",\n    alignItems: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SelectMonth, {\n    list: state.attendanceData,\n    setList: setList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    sx: {\n      my: 1,\n      marginLeft: \"auto\"\n    },\n    size: \"large\",\n    variant: \"contained\",\n    color: \"success\",\n    fullWidth: true,\n    disabled: checked.length == 0,\n    onClick: function onClick() {\n      return setOpen(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, \"\\u3000\\u3000\\u3000\\u7533\\u8ACB\\u753B\\u9762\\u3078\\u3000\\u3000\\u3000\"), list ? /*#__PURE__*/React.createElement(Display, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(Skeleton, {\n    height: \"100%\",\n    variant: \"rectangle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(RequestModal, {\n    open: open,\n    setOpen: setOpen,\n    params: checked,\n    setSbParams: setSbParams,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  })));\n};","map":{"version":3,"names":["React","useEffect","useReducer","useState","Box","Button","Skeleton","Stack","Switch","Tooltip","Typography","AttendanceGraph","fetchAttendance","AttendanceReducer","initialState","RequestModal","SelectDate","AttendanceIndex","SelectMonth","EmployeeAttendance","setSbParams","open","setOpen","list","setList","checked","setChecked","state","dispatch","handleCheck","e","id","target","timestamp","attendanceData","find","elm","filtered","filter","type","then","res","payload","data","attendances","console","log","message","Display","margin","maxWidth","fetchState","p","height","my","marginLeft","length"],"sources":["/usr/src/app/app/src/containers/employeeSide/EmployeeAttendance.jsx"],"sourcesContent":["import React, { useEffect, useReducer, useState } from \"react\"\r\n\r\nimport { Box, Button, Skeleton, Stack, Switch, Tooltip, Typography } from \"@mui/material\";\r\nimport { AttendanceGraph } from \"../../components/attendances/AttendanceGraph\";\r\nimport { fetchAttendance } from \"../../apis/attendance\";\r\nimport { AttendanceReducer, initialState } from \"../../reducers/attendances\";\r\nimport { RequestModal } from \"./RequestModal\";\r\nimport { SelectDate } from \"../../components/shared/SelectDate\";\r\nimport { AttendanceIndex } from \"../../components/attendances/AttendanceIndex\";\r\nimport { SelectMonth } from \"../../components/shared/SelectMonth\";\r\n\r\n\r\nexport const EmployeeAttendance = ({setSbParams}) => {\r\n\r\n  //----------------------state----------------\r\n\r\nconst [open, setOpen] = useState(false);\r\nconst [list, setList] = useState();\r\nconst [checked, setChecked] = useState([]);\r\n\r\nconst [state, dispatch] = useReducer(AttendanceReducer, initialState);\r\n\r\n\r\nconst handleCheck = (e) => {\r\n  var id = e.target.id;\r\n  var timestamp = state.attendanceData.find(elm => elm.id == id);\r\n  \r\n    \r\n  if (e.target.checked){\r\n    setChecked([...checked,timestamp])\r\n  }else{\r\n    var filtered = checked.filter(elm => \r\n      elm.id != id\r\n    )\r\n    setChecked(filtered)\r\n\r\n  } \r\n} \r\n\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch({type: \"FETCHING\"})\r\n    try {\r\n      fetchAttendance()\r\n      .then(res => {\r\n        dispatch({type: \"FETCH_END\", payload: res.data.attendances})\r\n        setList( res.data.attendances)\r\n      }\r\n    )\r\n    }catch (e){\r\n      console.log(e.message);\r\n    }\r\n\r\n  },[]);\r\n\r\n  const Display = () => (\r\n   \r\n        <Box sx={{ margin:\"0 auto\", maxWidth: 600}}>\r\n        <AttendanceIndex\r\n          state={state.fetchState}\r\n          list={list} \r\n          checked={checked}\r\n          handleCheck={handleCheck}\r\n        />\r\n        </Box>\r\n  \r\n  )\r\n\r\n      \r\n\r\n      return(\r\n      <>        \r\n      <Box mx={50}sx={{p: 2,height: 400}}>\r\n            <Stack direction=\"row\" alignItems=\"center\">\r\n             \r\n              <SelectMonth\r\n                list={state.attendanceData}\r\n                setList={setList}\r\n              />\r\n                \r\n  \r\n              </Stack>\r\n              \r\n                  <Button \r\n                    sx={{my:1, marginLeft:\"auto\"}}\r\n                    size=\"large\"\r\n                    variant=\"contained\" \r\n                    color=\"success\"\r\n                    fullWidth\r\n                    disabled={checked.length == 0}\r\n                    onClick={() => setOpen(true)}\r\n                  >\r\n                  　　　申請画面へ　　　\r\n                </Button>\r\n              \r\n              {\r\n                list ?\r\n                <Display />\r\n                :\r\n                <Skeleton \r\n                height=\"100%\"\r\n                variant=\"rectangle\" />\r\n               }\r\n\r\n            <RequestModal \r\n              open={open} \r\n              setOpen={setOpen} \r\n              params={checked}\r\n              setSbParams={setSbParams} />\r\n      </Box>\r\n     \r\n      </>\r\n\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}