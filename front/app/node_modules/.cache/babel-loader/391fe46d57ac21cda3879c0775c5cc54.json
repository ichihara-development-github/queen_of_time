{"ast":null,"code":"import _objectSpread from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/components/timestamps/AttendanceButton.jsx\";\n\nimport React, { useContext, useState } from \"react\";\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport { DefaultModal } from \"../shared/DefaultModal\";\nimport { TimestampMap } from \"./TimestampMap\";\nimport { createTimestamp } from \"../../apis/timestamp\";\nimport { SnackbarContext } from \"../../contexts/snackBar\";\nexport var AttendanceButton = function AttendanceButton(_ref) {\n  var checkDistance = _ref.checkDistance,\n      officePosition = _ref.officePosition,\n      style = _ref.style,\n      buttonState = _ref.buttonState,\n      setButtonState = _ref.setButtonState;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      content = _useState4[0],\n      setContent = _useState4[1];\n\n  var sb = useContext(SnackbarContext); //---------------gps-------------------\n\n  var options = {\n    enableHightAccuracy: true,\n    timeout: 10000\n  };\n\n  var dynamicStyle = _objectSpread({}, style, {\n    backgroundColor: buttonState.at ? \"\" : \"green\",\n    color: buttonState.at ? \"gray\" : \"white\"\n  }); // const dateTime = new Date(position.timestamp)\n  // return(\n  //     <>\n  //     <div style={{fontWeight: \"bold\"}}>\n  //       <span>{dateTime.getMonth()+1}</span>月\n  //       <span>{dateTime.getDate()}</span>日\n  //       <span>{dateTime.getHours()}</span>時\n  //       <span>{dateTime.getMinutes()}</span>分\n  //     </div>\n  //     </>\n  // )\n\n\n  var success = function success(position) {\n    var coords = position.coords;\n    var myPosition = {\n      lat: coords.latitude,\n      lng: coords.longitude\n    };\n    console.log(\"success\"); // if (!checkDistance(myPosition)){\n    //   return false\n    // }\n\n    createTimestamp({\n      attendance_time: position.timestamp / 1000\n    }).then(function (data) {\n      var content = /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        style: {\n          color: \"green\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }\n      }, \"\\u51FA\\u3000\\u52E4\"), /*#__PURE__*/React.createElement(\"h5\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }\n      }, data.name), /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      }, \"\\u672C\\u65E5\\u3082\\u4E00\\u65E5\\u9811\\u5F35\\u308A\\u307E\\u3057\\u3087\\u3046\\uFF01\"));\n      setContent(content);\n    }).catch(function (e) {\n      return console.log(e.message);\n    });\n  };\n\n  var error = function error(err) {\n    switch (err.code) {\n      case \"Network location\":\n    }\n\n    console.error(\"\".concat(err.code, \": \").concat(err.message));\n  }; //---------------------------------------\n\n\n  var handleClick = function handleClick() {\n    setButtonState(_objectSpread({}, buttonState, {\n      at: true\n    }));\n    navigator.geolocation.getCurrentPosition(success, error, options);\n    setOpen(true);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TimestampMap, {\n    officePosition: officePosition,\n    myPosition: officePosition,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    style: dynamicStyle,\n    className: \"stampingButton\",\n    onClick: function onClick(e) {\n      return handleClick(e);\n    },\n    disabled: buttonState.at,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 4\n    }\n  }, \"\\u51FA\\u3000\\u52E4\"), /*#__PURE__*/React.createElement(DefaultModal, {\n    open: open,\n    setOpen: setOpen,\n    content: content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }));\n};","map":{"version":3,"names":["React","useContext","useState","Box","Button","DefaultModal","TimestampMap","createTimestamp","SnackbarContext","AttendanceButton","checkDistance","officePosition","style","buttonState","setButtonState","open","setOpen","content","setContent","sb","options","enableHightAccuracy","timeout","dynamicStyle","backgroundColor","at","color","success","position","coords","myPosition","lat","latitude","lng","longitude","console","log","attendance_time","timestamp","then","data","name","catch","e","message","error","err","code","handleClick","navigator","geolocation","getCurrentPosition"],"sources":["/usr/src/app/app/src/components/timestamps/AttendanceButton.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\"\r\n\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport { DefaultModal } from \"../shared/DefaultModal\";\r\nimport {TimestampMap} from \"./TimestampMap\"\r\nimport { createTimestamp } from \"../../apis/timestamp\";\r\nimport { SnackbarContext } from \"../../contexts/snackBar\";\r\n\r\nexport const AttendanceButton = ({\r\n  checkDistance,\r\n  officePosition,\r\n  style,\r\n  buttonState,\r\n  setButtonState}) => { \r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [content, setContent] =useState(\"\");\r\n  const sb = useContext(SnackbarContext);\r\n\r\n  //---------------gps-------------------\r\n  \r\n  const options = {\r\n    enableHightAccuracy: true,\r\n    timeout: 10000,    \r\n}\r\n\r\nconst dynamicStyle = {\r\n  ...style,\r\n  backgroundColor: buttonState.at? \"\":\"green\" ,\r\n  color:  buttonState.at? \"gray\" : \"white\"\r\n}\r\n\r\n// const dateTime = new Date(position.timestamp)\r\n\r\n// return(\r\n//     <>\r\n//     <div style={{fontWeight: \"bold\"}}>\r\n//       <span>{dateTime.getMonth()+1}</span>月\r\n//       <span>{dateTime.getDate()}</span>日\r\n//       <span>{dateTime.getHours()}</span>時\r\n//       <span>{dateTime.getMinutes()}</span>分\r\n//     </div>\r\n//     </>\r\n// )\r\n\r\nconst success = (position) => {\r\n    const coords = position.coords\r\n      var myPosition = {\r\n        lat: coords.latitude,\r\n        lng: coords.longitude\r\n      }\r\n      console.log(\"success\")\r\n     \r\n      // if (!checkDistance(myPosition)){\r\n       \r\n      //   return false\r\n      // }\r\n\r\n\r\n      createTimestamp({attendance_time: (position.timestamp / 1000)})\r\n      .then((data) => {\r\n        \r\n          var content = (\r\n            <div>\r\n\r\n                <h1 style={{color:\"green\"}}>出　勤</h1>\r\n                {/* {defaultText(position)} */}\r\n                <h5>{data.name}</h5>\r\n                <p>本日も一日頑張りましょう！</p>\r\n            </div>\r\n          )\r\n        \r\n        setContent(content)\r\n     \r\n    })\r\n      .catch((e) => console.log(e.message))\r\n    }\r\n\r\n    const error = (err) => {\r\n        switch(err.code){\r\n          case \"Network location\":\r\n        }\r\n        console.error(`${err.code}: ${err.message}`);\r\n    }\r\n\r\n    \r\n    //---------------------------------------\r\n\r\n\r\n  \r\n  const handleClick = () => {\r\n\r\n    setButtonState({...buttonState, at: true})\r\n    navigator.geolocation.getCurrentPosition(success, error, options);\r\n    setOpen(true)\r\n\r\n  }\r\n\r\n  \r\n\r\n  return (\r\n\r\n    <>\r\n     <TimestampMap\r\n        officePosition={officePosition} \r\n        myPosition={officePosition}\r\n      />\r\n   <button\r\n    style={dynamicStyle}\r\n    className=\"stampingButton\"\r\n    onClick={(e) => handleClick(e)}\r\n    disabled={buttonState.at}\r\n    >出　勤\r\n    </button>\r\n\r\n\r\n    <DefaultModal\r\n     open={open} \r\n     setOpen={setOpen} \r\n     content={content} \r\n     />\r\n      \r\n    </>\r\n\r\n    \r\n  )\r\n\r\n\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}