{"ast":null,"code":"import _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/containers/employeeSide/TimeStamp.jsx\";\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Clock } from \"../../components/timestamps/Clock\";\nimport Box from '@mui/material/Box';\nimport { getTimestampStandby } from \"../../apis/timestamp\";\nimport { AttendanceButton } from \"../../components/timestamps/AttendanceButton\";\nimport { LeavingButton } from \"../../components/timestamps/LeavingButton\";\nimport { hubenyDistance } from \"../../lib/calcDistance\";\nimport { ConfigContext } from \"../../contexts/config\";\nvar buttonStyle = {\n  width: 200,\n  display: \"inline-block\",\n  height: 100,\n  lineHeight: \"100px\",\n  fontSize: 40,\n  fontFamily: \"Roboto Helvetica Arial sans-serif\",\n  color: \"white\",\n  borderRadius: 5,\n  margin: 30,\n  opacity: 0.8,\n  cursor: \"pointer\",\n  transitionDuration: \".2s\"\n};\nvar style = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  width: \"100%\",\n  textAlign: \"center\",\n  transform: 'translate(-50%, -50%)'\n};\nexport var TimeStamp = function TimeStamp() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      officePosition = _useState2[0],\n      setPosition = _useState2[1];\n\n  var _useState3 = useState({\n    at: true,\n    lv: true\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      buttonState = _useState4[0],\n      setButtonState = _useState4[1];\n\n  var orgConfig = useContext(ConfigContext); // gps --------------------------------------------------\n\n  var checkDistance = function checkDistance(coords) {\n    var distance = hubenyDistance(officePosition.lat, officePosition.lng, coords.lat, coords.lng);\n\n    if (distance > orgConfig.params.stampable_distance) {\n      return false;\n    }\n\n    return false;\n  };\n\n  console.log(\"render\");\n  useEffect(function () {\n    getTimestampStandby().then(function (res) {\n      setPosition(res.data.positions);\n      setButtonState(res.data.status);\n    });\n  }, []); //-------------------functions---------------------\n\n  return /*#__PURE__*/React.createElement(Box, {\n    style: style,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Clock, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(AttendanceButton, {\n    checkDistance: checkDistance,\n    officePosition: officePosition,\n    buttonState: buttonState,\n    setButtonState: setButtonState,\n    style: buttonStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(LeavingButton, {\n    checkDistance: checkDistance,\n    officePosition: officePosition,\n    buttonState: buttonState,\n    setButtonState: setButtonState,\n    style: buttonStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }), console.log(buttonState));\n};","map":{"version":3,"names":["React","useState","useEffect","useContext","Clock","Box","getTimestampStandby","AttendanceButton","LeavingButton","hubenyDistance","ConfigContext","buttonStyle","width","display","height","lineHeight","fontSize","fontFamily","color","borderRadius","margin","opacity","cursor","transitionDuration","style","position","top","left","textAlign","transform","TimeStamp","officePosition","setPosition","at","lv","buttonState","setButtonState","orgConfig","checkDistance","coords","distance","lat","lng","params","stampable_distance","console","log","then","res","data","positions","status"],"sources":["/usr/src/app/app/src/containers/employeeSide/TimeStamp.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\"\r\nimport { Clock } from \"../../components/timestamps/Clock\"\r\nimport Box from '@mui/material/Box';\r\n\r\nimport { getTimestampStandby } from \"../../apis/timestamp\";\r\nimport { AttendanceButton } from \"../../components/timestamps/AttendanceButton\";\r\nimport { LeavingButton } from \"../../components/timestamps/LeavingButton\";\r\nimport { hubenyDistance } from \"../../lib/calcDistance\"\r\nimport { ConfigContext } from \"../../contexts/config\";\r\n\r\nconst buttonStyle = {\r\n  width: 200,\r\n  display: \"inline-block\",\r\n  height: 100,\r\n  lineHeight: \"100px\",\r\n  fontSize: 40,\r\n  fontFamily: \"Roboto Helvetica Arial sans-serif\",\r\n  color: \"white\",\r\n  borderRadius: 5,\r\n  margin: 30,\r\n  opacity: 0.8,\r\n  cursor: \"pointer\",\r\n  transitionDuration: \".2s\"\r\n}\r\n\r\nconst style = {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    width: \"100%\",\r\n    textAlign: \"center\",\r\n    transform: 'translate(-50%, -50%)' \r\n}\r\n\r\nexport const TimeStamp = () =>{\r\n\r\n  const [officePosition, setPosition] = useState();\r\n  const [buttonState, setButtonState] = useState({at: true, lv: true})\r\n  const orgConfig = useContext(ConfigContext);\r\n  // gps --------------------------------------------------\r\n\r\n      const checkDistance = (coords) => {\r\n        const distance = hubenyDistance(\r\n          officePosition.lat, \r\n          officePosition.lng, \r\n          coords.lat, \r\n          coords.lng\r\n        )\r\n          if(distance > orgConfig.params.stampable_distance){\r\n            return false\r\n          }\r\n\r\n        return false\r\n      } \r\n\r\nconsole.log(\"render\")\r\n      useEffect(() => {\r\n        getTimestampStandby()\r\n        .then(res => {\r\n        setPosition(res.data.positions)\r\n        setButtonState(res.data.status)\r\n        })\r\n      \r\n      },[]);\r\n\r\n\r\n\r\n    //-------------------functions---------------------\r\n\r\n  \r\nreturn (\r\n    <Box style={style}>\r\n    <Clock/>\r\n    <AttendanceButton\r\n      checkDistance={checkDistance} \r\n      officePosition={officePosition}\r\n      buttonState={buttonState}\r\n      setButtonState={setButtonState}\r\n      style={buttonStyle}\r\n    />\r\n    \r\n    <LeavingButton\r\n       checkDistance={checkDistance} \r\n       officePosition={officePosition}\r\n       buttonState={buttonState}\r\n       setButtonState={setButtonState}\r\n       style={buttonStyle}\r\n    />\r\n    {console.log(buttonState)}\r\n\r\n    </Box>\r\n\r\n)\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}