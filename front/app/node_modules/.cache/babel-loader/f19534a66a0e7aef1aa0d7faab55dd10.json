{"ast":null,"code":"import _objectSpread from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/components/notifications/Feed.jsx\";\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport Avatar from '@mui/material/Avatar';\nimport { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport Image from \"./mountain.jpg\";\nimport { updateNotificationRead } from \"../../apis/notification\";\nimport { BadgeContext } from \"../../contexts/badge\";\nimport { formattedTime } from \"../../lib/calcDate\";\nexport var NotificationFeed = function NotificationFeed(_ref) {\n  var index = _ref.index,\n      notification = _ref.notification,\n      selected = _ref.selected,\n      setSelected = _ref.setSelected;\n\n  var _useState = useState(notification.read),\n      _useState2 = _slicedToArray(_useState, 2),\n      read = _useState2[0],\n      setRead = _useState2[1];\n\n  var badge = useContext(BadgeContext);\n  var time = formattedTime(new Date(notification.created_at).getTime() / 1000);\n\n  var handleClick = function handleClick() {\n    setSelected(index);\n\n    if (!read) {\n      updateNotificationRead(notification.id).then(function (res) {\n        if (res.status !== 200) {\n          return;\n        }\n\n        setRead(true);\n        badge.setBadge(_objectSpread({}, badge.badge, {\n          notification: badge.badge.notification - 1\n        }));\n      });\n    }\n  };\n\n  useEffect(function () {\n    setRead(notification.read);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    style: read ? {\n      backgroundColor: \"rgb(180,180,180)\"\n    } : {},\n    button: true,\n    selected: selected == index,\n    onClick: function onClick() {\n      return handleClick();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: Image,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(ListItemText, {\n    primary: notification.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, time)));\n};","map":{"version":3,"names":["React","useEffect","useState","useContext","Avatar","ListItem","ListItemIcon","ListItemText","Image","updateNotificationRead","BadgeContext","formattedTime","NotificationFeed","index","notification","selected","setSelected","read","setRead","badge","time","Date","created_at","getTime","handleClick","id","then","res","status","setBadge","backgroundColor","title"],"sources":["/usr/src/app/app/src/components/notifications/Feed.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport Avatar from '@mui/material/Avatar';\r\nimport { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\r\nimport Image from \"./mountain.jpg\";\r\nimport { updateNotificationRead } from \"../../apis/notification\";\r\nimport { BadgeContext } from \"../../contexts/badge\";\r\nimport { formattedTime } from \"../../lib/calcDate\";\r\n\r\n\r\nexport const NotificationFeed = ({\r\n    index,\r\n    notification, \r\n    selected, \r\n    setSelected\r\n}) => {\r\n\r\n    const [read, setRead] = useState(notification.read);\r\n    const badge = useContext(BadgeContext)\r\n    const time = formattedTime(new Date(notification.created_at).getTime() /1000)\r\n\r\n    const handleClick = () => {\r\n        setSelected(index)\r\n        if(!read){\r\n            updateNotificationRead(notification.id)\r\n            .then((res) =>{\r\n                if(res.status !== 200){return}\r\n            setRead(true)\r\n            badge.setBadge({...badge.badge, notification: badge.badge.notification -1})\r\n            })\r\n    }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setRead(notification.read);\r\n    },[])\r\n    \r\n    return (\r\n    <div>\r\n    <ListItem\r\n        style={read ?  {backgroundColor: \"rgb(180,180,180)\"} : {}}\r\n        button \r\n        selected={selected==index}\r\n        onClick={() => handleClick()}\r\n   >\r\n        <ListItemIcon>\r\n        <Avatar src={Image} />\r\n    </ListItemIcon>\r\n    \r\n    <ListItemText primary={notification.title}/>\r\n    <span>{time}</span>\r\n    </ListItem>\r\n    </div>\r\n    )\r\n\r\n\r\n}"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,YAAjC,QAAqD,eAArD;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAASC,sBAAT,QAAuC,yBAAvC;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,aAAT,QAA8B,oBAA9B;AAGA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,OAK1B;EAAA,IAJFC,KAIE,QAJFA,KAIE;EAAA,IAHFC,YAGE,QAHFA,YAGE;EAAA,IAFFC,QAEE,QAFFA,QAEE;EAAA,IADFC,WACE,QADFA,WACE;;EAAA,gBAEsBd,QAAQ,CAACY,YAAY,CAACG,IAAd,CAF9B;EAAA;EAAA,IAEKA,IAFL;EAAA,IAEWC,OAFX;;EAGF,IAAMC,KAAK,GAAGhB,UAAU,CAACO,YAAD,CAAxB;EACA,IAAMU,IAAI,GAAGT,aAAa,CAAC,IAAIU,IAAJ,CAASP,YAAY,CAACQ,UAAtB,EAAkCC,OAAlC,KAA6C,IAA9C,CAA1B;;EAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;IACtBR,WAAW,CAACH,KAAD,CAAX;;IACA,IAAG,CAACI,IAAJ,EAAS;MACLR,sBAAsB,CAACK,YAAY,CAACW,EAAd,CAAtB,CACCC,IADD,CACM,UAACC,GAAD,EAAQ;QACV,IAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;UAAC;QAAO;;QAClCV,OAAO,CAAC,IAAD,CAAP;QACAC,KAAK,CAACU,QAAN,mBAAmBV,KAAK,CAACA,KAAzB;UAAgCL,YAAY,EAAEK,KAAK,CAACA,KAAN,CAAYL,YAAZ,GAA0B;QAAxE;MACC,CALD;IAMP;EACA,CAVD;;EAYAb,SAAS,CAAC,YAAM;IACZiB,OAAO,CAACJ,YAAY,CAACG,IAAd,CAAP;EACH,CAFQ,EAEP,EAFO,CAAT;EAIA,oBACA;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA,oBAAC,QAAD;IACI,KAAK,EAAEA,IAAI,GAAI;MAACa,eAAe,EAAE;IAAlB,CAAJ,GAA4C,EAD3D;IAEI,MAAM,MAFV;IAGI,QAAQ,EAAEf,QAAQ,IAAEF,KAHxB;IAII,OAAO,EAAE;MAAA,OAAMW,WAAW,EAAjB;IAAA,CAJb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAMI,oBAAC,YAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA,oBAAC,MAAD;IAAQ,GAAG,EAAEhB,KAAb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADA,CANJ,eAUA,oBAAC,YAAD;IAAc,OAAO,EAAEM,YAAY,CAACiB,KAApC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAVA,eAWA;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAOX,IAAP,CAXA,CADA,CADA;AAmBH,CA9CM"},"metadata":{},"sourceType":"module"}