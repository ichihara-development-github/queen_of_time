{"ast":null,"code":"import AWS from 'aws-sdk';\nimport { sendProfile } from '../apis/config';\nexport var imageUploder = function imageUploder(image, key, sb) {\n  // aws setting\n  AWS.config.update({\n    accessKeyId: \"AKIARQI22UHYKZFHM7MK\",\n    secretAccessKey: \"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\"\n  });\n  var bucket = new AWS.S3({\n    params: {\n      Bucket: \"qot-images\"\n    },\n    region: \"ap-north-east\"\n  });\n\n  try {\n    var params = {\n      Body: image,\n      Bucket: \"qot-web\",\n      Key: key\n    }; // setUpload(true)\n\n    bucket.putObject(params).promise().then(function (res) {\n      console.log(res.$response);\n\n      if (res.$response.httpResponse.statusCode !== 200) {\n        sb.setSnackBar({\n          open: true,\n          variant: \"error\",\n          content: \"画像のアップロードに失敗しました。\"\n        });\n        return;\n      }\n\n      sendProfile({\n        image_url: key\n      });\n      sb.setSnackBar({\n        open: true,\n        variant: \"success\",\n        content: \"画像のアップロードが正常に行われました。\"\n      });\n    });\n  } catch (e) {\n    throw e;\n  }\n};","map":{"version":3,"names":["AWS","sendProfile","imageUploder","image","key","sb","config","update","accessKeyId","secretAccessKey","bucket","S3","params","Bucket","region","Body","Key","putObject","promise","then","res","console","log","$response","httpResponse","statusCode","setSnackBar","open","variant","content","image_url","e"],"sources":["/usr/src/app/app/src/lib/imageUploader.js"],"sourcesContent":["import AWS from 'aws-sdk';\r\nimport { sendProfile } from '../apis/config';\r\n\r\n\r\nexport const imageUploder = (image, key, sb) => {\r\n   \r\n    // aws setting\r\n    AWS.config.update({\r\n        accessKeyId: \"AKIARQI22UHYKZFHM7MK\",\r\n        secretAccessKey: \"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\"\r\n    })\r\n\r\n\r\n    const bucket = new AWS.S3({\r\n        params: {Bucket: \"qot-images\"},\r\n        region: \"ap-north-east\"\r\n    })\r\n\r\n    try {\r\n        const params = {\r\n            Body: image,\r\n            Bucket:  \"qot-web\",\r\n            Key: key\r\n        }\r\n        \r\n        // setUpload(true)\r\n        bucket.putObject(params).promise()\r\n        .then(res => {\r\n            console.log(res.$response)\r\n            if(res.$response.httpResponse.statusCode !== 200){\r\n                sb.setSnackBar({open: true, variant:\"error\", content: \"画像のアップロードに失敗しました。\"})\r\n                return \r\n            }\r\n            sendProfile({image_url: key})\r\n            sb.setSnackBar({open: true, variant:\"success\", content: \"画像のアップロードが正常に行われました。\"})\r\n        })\r\n        }\r\n        catch(e){ throw e}\r\n    }"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,SAAhB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AAGA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAQC,GAAR,EAAaC,EAAb,EAAoB;EAE5C;EACAL,GAAG,CAACM,MAAJ,CAAWC,MAAX,CAAkB;IACdC,WAAW,EAAE,sBADC;IAEdC,eAAe,EAAE;EAFH,CAAlB;EAMA,IAAMC,MAAM,GAAG,IAAIV,GAAG,CAACW,EAAR,CAAW;IACtBC,MAAM,EAAE;MAACC,MAAM,EAAE;IAAT,CADc;IAEtBC,MAAM,EAAE;EAFc,CAAX,CAAf;;EAKA,IAAI;IACA,IAAMF,MAAM,GAAG;MACXG,IAAI,EAAEZ,KADK;MAEXU,MAAM,EAAG,SAFE;MAGXG,GAAG,EAAEZ;IAHM,CAAf,CADA,CAOA;;IACAM,MAAM,CAACO,SAAP,CAAiBL,MAAjB,EAAyBM,OAAzB,GACCC,IADD,CACM,UAAAC,GAAG,EAAI;MACTC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,SAAhB;;MACA,IAAGH,GAAG,CAACG,SAAJ,CAAcC,YAAd,CAA2BC,UAA3B,KAA0C,GAA7C,EAAiD;QAC7CpB,EAAE,CAACqB,WAAH,CAAe;UAACC,IAAI,EAAE,IAAP;UAAaC,OAAO,EAAC,OAArB;UAA8BC,OAAO,EAAE;QAAvC,CAAf;QACA;MACH;;MACD5B,WAAW,CAAC;QAAC6B,SAAS,EAAE1B;MAAZ,CAAD,CAAX;MACAC,EAAE,CAACqB,WAAH,CAAe;QAACC,IAAI,EAAE,IAAP;QAAaC,OAAO,EAAC,SAArB;QAAgCC,OAAO,EAAE;MAAzC,CAAf;IACH,CATD;EAUC,CAlBL,CAmBI,OAAME,CAAN,EAAQ;IAAE,MAAMA,CAAN;EAAQ;AACrB,CAlCE"},"metadata":{},"sourceType":"module"}