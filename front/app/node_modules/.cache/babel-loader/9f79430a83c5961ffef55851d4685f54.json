{"ast":null,"code":"import _objectSpread from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/containers/employeeSide/Profile.jsx\";\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Paper } from \"@mui/material\";\nimport { fetchProfile, sendProfile } from \"../../apis/config\";\nimport { STYLE_2 } from \"../../components/const\";\nimport { NewEmployeeForm } from \"../../components/employees/NewEmployeeForm\";\nimport { SnackbarContext } from \"../../contexts/snackBar\";\nimport { imageUploder } from \"../../lib/imageUploader\";\nexport var Profile = function Profile() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      profile = _useState2[0],\n      setProfile = _useState2[1];\n\n  var sb = useContext(SnackbarContext);\n\n  var sendParams = function sendParams(params) {\n    try {\n      if (params.image) {\n        var imageUrl = params.name + \"_\" + new Date().getTime() || params.imageUrl;\n\n        if (!imageUploder(params.image[0], imageUrl, sb)) {\n          sb.setSnackBar({\n            open: true,\n            variant: \"error\",\n            content: \"プロフィール画像のアップロードに失敗しました\"\n          });\n          return;\n        }\n      }\n\n      sendProfile(params).then(function (res) {\n        if (res.status !== 200) {\n          sb.setSnackBar({\n            open: true,\n            variant: \"error\",\n            content: \"プロフィールを編集できませんでした\"\n          });\n          return;\n        }\n\n        sb.setSnackBar({\n          open: true,\n          variant: \"success\",\n          content: \"プロフィールを編集しました\"\n        });\n      });\n    } catch (e) {\n      console.log(e.message);\n    }\n  };\n\n  useEffect(function () {\n    fetchProfile().then(function (res) {\n      setProfile(res.data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(Paper, {\n    sx: _objectSpread({\n      margin: \"0 auto\",\n      maxWidth: 500,\n      p: 1\n    }, STYLE_2),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, profile && /*#__PURE__*/React.createElement(NewEmployeeForm, {\n    sendParams: sendParams,\n    requestStatus: \"OK\",\n    profile: profile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 23\n    }\n  }));\n};","map":{"version":3,"names":["React","useState","useEffect","useContext","Paper","fetchProfile","sendProfile","STYLE_2","NewEmployeeForm","SnackbarContext","imageUploder","Profile","profile","setProfile","sb","sendParams","params","image","imageUrl","name","Date","getTime","setSnackBar","open","variant","content","then","res","status","e","console","log","message","data","margin","maxWidth","p"],"sources":["/usr/src/app/app/src/containers/employeeSide/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { Paper } from \"@mui/material\"\r\nimport { fetchProfile, sendProfile } from \"../../apis/config\"\r\nimport { STYLE_2 } from \"../../components/const\"\r\nimport { NewEmployeeForm } from \"../../components/employees/NewEmployeeForm\"\r\nimport { SnackbarContext } from \"../../contexts/snackBar\";\r\nimport { imageUploder } from \"../../lib/imageUploader\";\r\n\r\nexport const Profile = () => {\r\n\r\n    const [profile, setProfile] = useState() \r\n    const sb = useContext(SnackbarContext);\r\n    \r\n    const sendParams = (params)=> {\r\n       \r\n        try {\r\n          if(params.image){\r\n            const imageUrl = params.name + \"_\" +(new Date()).getTime() || params.imageUrl;\r\n            if(!imageUploder(params.image[0], imageUrl, sb)){\r\n              sb.setSnackBar({open: true, variant:\"error\", content: \"プロフィール画像のアップロードに失敗しました\"})\r\n              return \r\n            }\r\n          }\r\n            sendProfile(params)\r\n            .then(res=> {\r\n              if(res.status !== 200){\r\n                sb.setSnackBar({open: true, variant:\"error\", content: \"プロフィールを編集できませんでした\"})\r\n                return\r\n              }\r\n              sb.setSnackBar({open: true, variant:\"success\", content: \"プロフィールを編集しました\"})\r\n              })\r\n          }\r\n          catch(e){console.log(e.message)}\r\n        \r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchProfile()\r\n        .then(res => {\r\n            setProfile(res.data)\r\n        })\r\n       \r\n    },[])\r\n\r\n\r\n    return (\r\n    \r\n      <Paper sx={{margin:\"0 auto\", maxWidth:500, p:1, ...STYLE_2}}>\r\n          \r\n          {profile && <NewEmployeeForm\r\n            sendParams={sendParams}\r\n            requestStatus=\"OK\"\r\n            profile={profile}\r\n          />\r\n          }\r\n         \r\n      \r\n        {/* <form onSubmit={handleSubmit(onSubmit)}>\r\n            <Stack \r\n            sx={{py:2}}\r\n            direction=\"row\" \r\n            alignItems=\"center\"\r\n            spacing={2} \r\n            justifyContent=\"end\"\r\n            >\r\n            <Typography varinat=\"h6\">責任者： employee</Typography>\r\n            <TextField label=\"組織名\" className=\"mui-input\"/>\r\n            </Stack>\r\n        </form> */}\r\n        </Paper>\r\n    )\r\n    \r\n}"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,mBAA1C;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,eAAT,QAAgC,4CAAhC;AACA,SAASC,eAAT,QAAgC,yBAAhC;AACA,SAASC,YAAT,QAA6B,yBAA7B;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;EAAA,gBAEKV,QAAQ,EAFb;EAAA;EAAA,IAElBW,OAFkB;EAAA,IAETC,UAFS;;EAGzB,IAAMC,EAAE,GAAGX,UAAU,CAACM,eAAD,CAArB;;EAEA,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACC,MAAD,EAAW;IAE1B,IAAI;MACF,IAAGA,MAAM,CAACC,KAAV,EAAgB;QACd,IAAMC,QAAQ,GAAGF,MAAM,CAACG,IAAP,GAAc,GAAd,GAAoB,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAnB,IAA6CL,MAAM,CAACE,QAArE;;QACA,IAAG,CAACR,YAAY,CAACM,MAAM,CAACC,KAAP,CAAa,CAAb,CAAD,EAAkBC,QAAlB,EAA4BJ,EAA5B,CAAhB,EAAgD;UAC9CA,EAAE,CAACQ,WAAH,CAAe;YAACC,IAAI,EAAE,IAAP;YAAaC,OAAO,EAAC,OAArB;YAA8BC,OAAO,EAAE;UAAvC,CAAf;UACA;QACD;MACF;;MACCnB,WAAW,CAACU,MAAD,CAAX,CACCU,IADD,CACM,UAAAC,GAAG,EAAG;QACV,IAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;UACpBd,EAAE,CAACQ,WAAH,CAAe;YAACC,IAAI,EAAE,IAAP;YAAaC,OAAO,EAAC,OAArB;YAA8BC,OAAO,EAAE;UAAvC,CAAf;UACA;QACD;;QACDX,EAAE,CAACQ,WAAH,CAAe;UAACC,IAAI,EAAE,IAAP;UAAaC,OAAO,EAAC,SAArB;UAAgCC,OAAO,EAAE;QAAzC,CAAf;MACC,CAPH;IAQD,CAhBH,CAiBE,OAAMI,CAAN,EAAQ;MAACC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,OAAd;IAAuB;EAGrC,CAtBD;;EAwBA9B,SAAS,CAAC,YAAM;IACZG,YAAY,GACXqB,IADD,CACM,UAAAC,GAAG,EAAI;MACTd,UAAU,CAACc,GAAG,CAACM,IAAL,CAAV;IACH,CAHD;EAKH,CANQ,EAMP,EANO,CAAT;EASA,oBAEE,oBAAC,KAAD;IAAO,EAAE;MAAGC,MAAM,EAAC,QAAV;MAAoBC,QAAQ,EAAC,GAA7B;MAAkCC,CAAC,EAAC;IAApC,GAA0C7B,OAA1C,CAAT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAEKK,OAAO,iBAAI,oBAAC,eAAD;IACV,UAAU,EAAEG,UADF;IAEV,aAAa,EAAC,IAFJ;IAGV,OAAO,EAAEH,OAHC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFhB,CAFF;AA2BH,CAjEM"},"metadata":{},"sourceType":"module"}