{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nrequire(\"babel-polyfill\");\n\nrequire(\"element-closest\");\n\nrequire(\"./index.css\");\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _YearInput = require(\"./components/YearInput\");\n\nvar _YearInput2 = _interopRequireDefault(_YearInput);\n\nvar _index = require(\"./components/PickerPanel/index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar YearPicker = function (_Component) {\n  _inherits(YearPicker, _Component);\n\n  function YearPicker(props) {\n    _classCallCheck(this, YearPicker);\n\n    var _this = _possibleConstructorReturn(this, (YearPicker.__proto__ || Object.getPrototypeOf(YearPicker)).call(this, props));\n\n    _this.panelPosition = function () {\n      var picker = document.querySelector(\".year-picker\");\n      var X = picker.getBoundingClientRect().left; // расстояние от левой стороны окна до левой стороны элемента\n\n      var Y = picker.getBoundingClientRect().bottom; //расстояние от верхней стороны окна до нижней стороны элемента\n\n      var elementHeight = picker.getBoundingClientRect().height; // Высота элемента\n\n      var elementWidth = picker.getBoundingClientRect().width; // Ширина элемента\n\n      var windowHeight = window.innerHeight; //высота окна браузера\n\n      var windowWidth = window.innerWidth; // ширина окна браузера\n\n      var topTrue = Y - elementHeight - 10 > 220;\n      var halfTopTrue = Y - elementHeight - 10 > 110;\n      var botTrue = windowHeight - Y - 10 > 220;\n      var halfBotTrue = windowHeight - Y - 10 > 110;\n      var leftTrue = X + elementHeight / 2 > 120;\n      var rightTrue = windowWidth - X - elementWidth / 2 > 120;\n\n      if (topTrue && !botTrue && leftTrue && rightTrue) {\n        console.log(\"Сверху  по центру\");\n        var top = -230;\n        var left = -120 + elementWidth / 2;\n\n        _this.setState({\n          panelTop: top,\n          panelLeft: left\n        });\n      } else if (!topTrue && botTrue && rightTrue && leftTrue) {\n        console.log(\"Снизу по центру\");\n\n        var _top = elementHeight + 10;\n\n        var _left = -120 + elementWidth / 2;\n\n        _this.setState({\n          panelTop: _top,\n          panelLeft: _left\n        });\n      } else if (halfBotTrue && halfTopTrue && leftTrue && !rightTrue) {\n        console.log(\"Слева по центру\");\n\n        var _top2 = -110 + elementHeight / 2;\n\n        var _left2 = -250;\n\n        _this.setState({\n          panelTop: _top2,\n          panelLeft: _left2\n        });\n      } else if (halfBotTrue && halfTopTrue && !leftTrue && rightTrue) {\n        console.log(\"Справа по центру\");\n\n        var _top3 = -110 + elementHeight / 2;\n\n        var _left3 = elementWidth + 10;\n\n        _this.setState({\n          panelTop: _top3,\n          panelLeft: _left3\n        });\n      } else if (!topTrue && botTrue && leftTrue && !rightTrue) {\n        console.log(\"слева вниз\");\n        var _top4 = 0;\n\n        var _left4 = -250;\n\n        _this.setState({\n          panelTop: _top4,\n          panelLeft: _left4\n        });\n      } else if (topTrue && !rightTrue && leftTrue && !botTrue) {\n        console.log(\"слева вверх\");\n\n        var _top5 = -220 + elementHeight;\n\n        var _left5 = -250;\n\n        _this.setState({\n          panelTop: _top5,\n          panelLeft: _left5\n        });\n      } else if (!topTrue && rightTrue && !leftTrue && botTrue) {\n        console.log(\"Справа вниз \");\n        var _top6 = 0;\n\n        var _left6 = elementWidth + 10;\n\n        _this.setState({\n          panelTop: _top6,\n          panelLeft: _left6\n        });\n      } else if (topTrue && rightTrue && !leftTrue && !botTrue) {\n        console.log(\"Справа вверх\");\n\n        var _top7 = -220 + elementHeight;\n\n        var _left7 = elementWidth + 10;\n\n        _this.setState({\n          panelTop: _top7,\n          panelLeft: _left7\n        });\n      }\n    };\n\n    _this.openPanel = function (event) {\n      _this.panelPosition();\n\n      _this.setState({\n        panelIsOpen: true\n      });\n    };\n\n    _this.closePanel = function (event) {\n      _this.setState({\n        panelIsOpen: false\n      });\n    };\n\n    _this.callback = function () {\n      if (_this.props.onChange) {\n        _this.props.onChange(_this.state.currentYear);\n      }\n    };\n\n    _this.choiseYear = function (year) {\n      _this.setState({\n        selectedYear: year,\n        currentYear: year,\n        yearIsSelected: true\n      }, function () {\n        return _this.callback();\n      });\n\n      _this.closePanel();\n    };\n\n    _this.clearYear = function () {\n      _this.setState({\n        selectedYear: new Date().getFullYear(),\n        currentYear: \"\",\n        yearIsSelected: false\n      });\n    };\n\n    _this.increaseYear = function (event) {\n      _this.setState({\n        selectedYear: _this.state.selectedYear + 1\n      });\n    };\n\n    _this.decreaseYear = function (event) {\n      _this.setState({\n        selectedYear: _this.state.selectedYear - 1\n      });\n    };\n\n    _this.jumpForward = function (event) {\n      _this.setState({\n        selectedYear: _this.state.selectedYear + 5\n      });\n    };\n\n    _this.jumpBackward = function (event) {\n      _this.setState({\n        selectedYear: _this.state.selectedYear - 5\n      });\n    };\n\n    _this.thisYear = function (event) {\n      var year = new Date().getFullYear();\n\n      _this.setState({\n        currentYear: year,\n        selectedYear: year,\n        yearIsSelected: true\n      });\n\n      _this.closePanel();\n    };\n\n    _this.state = {\n      currentYear: \"\",\n      yearIsSelected: false,\n      selectedYear: new Date().getFullYear(),\n      panelIsOpen: false,\n      panelTop: 0,\n      panelLeft: 0\n    };\n    return _this;\n  }\n\n  _createClass(YearPicker, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.panelPosition();\n      document.addEventListener(\"scroll\", function (event) {\n        this.panelPosition();\n      }.bind(this));\n      document.addEventListener(\"click\", function (event) {\n        if (!event.target.closest(\".year-picker\")) {\n          this.closePanel();\n        }\n      }.bind(this));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\"div\", {\n        className: \"year-picker\"\n      }, _react2.default.createElement(_YearInput2.default, {\n        value: this.state.currentYear,\n        openPanel: this.openPanel,\n        selected: this.state.yearIsSelected,\n        clear: this.clearYear\n      }), _react2.default.createElement(_index2.default, {\n        isOpen: this.state.panelIsOpen,\n        selectedYear: this.state.selectedYear,\n        currentYear: this.state.currentYear,\n        increaseYear: this.increaseYear,\n        decreaseYear: this.decreaseYear,\n        jumpForward: this.jumpForward,\n        jumpBackward: this.jumpBackward,\n        thisYear: this.thisYear,\n        choiseYear: this.choiseYear,\n        top: this.state.panelTop,\n        left: this.state.panelLeft\n      }));\n    }\n  }]);\n\n  return YearPicker;\n}(_react.Component);\n\nexports.default = YearPicker;","map":null,"metadata":{},"sourceType":"script"}