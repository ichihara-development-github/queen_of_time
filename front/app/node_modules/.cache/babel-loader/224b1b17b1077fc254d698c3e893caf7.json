{"ast":null,"code":"import _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/containers/employeeSide/EmployeeShift.jsx\";\n\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport React, { useState, useEffect, useContext, useReducer } from \"react\";\nimport { fetchMyShifts } from \"../../apis/shifts\";\nimport { SnackbarContext } from \"../../contexts/snackBar\";\nimport { betweenDates, getMonAndDate } from \"../../lib/calcDate\";\nimport { DefaultModal } from \"../../components/shared/DefaultModal\";\nimport { initialState, ShiftReducer } from \"../../reducers/shift\";\nimport { Button, Chip, Divider, Stack, Typography } from \"@mui/material\";\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\nimport LocalPhoneIcon from '@mui/icons-material/LocalPhone';\nimport BusinessIcon from '@mui/icons-material/Business';\nimport { CONFIRMED_COLOR, REQUEST_STATUS, UNCONFIRMED_COLOR } from \"../../components/const\";\nimport { NewSubmitShifts } from \"../../components/shifts/NewSubmitShifts\";\nimport { PageLoadingCircle } from \"../../components/shared/commonPatrs\";\nvar content = \"\";\nvar today = new Date();\nexport var EmployeeShifts = function EmployeeShifts() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      list = _useState4[0],\n      setList = _useState4[1];\n\n  var _useReducer = useReducer(ShiftReducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var sb = useContext(SnackbarContext);\n\n  var _useState5 = useState([today.getFullYear(), today.getMonth()]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      period = _useState6[0],\n      setPeriod = _useState6[1];\n\n  var times = function times() {\n    var time = [];\n\n    for (var i = state.orgParams.open; i <= state.orgParams.close - 1; i++) {\n      for (var j = 0; j < 60; j += 30) {\n        time.push(\"\".concat(i, \":\").concat((\"0\" + j).slice(-2)));\n      }\n    }\n\n    return time;\n  };\n\n  var handleEventClick = function handleEventClick(e) {\n    content = /*#__PURE__*/React.createElement(Stack, {\n      spacing: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 18\n      }\n    }, getMonAndDate(e.event.start, \"/\")), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 18\n      }\n    }, e.event.title), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 18\n      }\n    }, \"\\u5099\\u8003\\uFF1A \", e.event.extendedProps.description), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 18\n      }\n    }, e.event.backgroundColor == CONFIRMED_COLOR ? /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        color: CONFIRMED_COLOR\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, \"\\u627F\\u8A8D\\u6E08\\u307F\") : /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        color: UNCONFIRMED_COLOR\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, \"\\u627F\\u8A8D\\u5F85\\u3061\")), /*#__PURE__*/React.createElement(Divider, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(BusinessIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 20\n      }\n    }), \"\\uFF1A\", state.orgParams.name), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(LocationOnIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 20\n      }\n    }), \"\\uFF1A\", state.orgParams.address), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(LocalPhoneIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 20\n      }\n    }), \"\\uFF1A090-9999-9999\"));\n    setOpen(true);\n  };\n\n  useEffect(function () {\n    dispatch({\n      type: \"FETCHING\"\n    });\n    fetchMyShifts(period).then(function (res) {\n      dispatch({\n        type: \"FETCH_END\",\n        payload: res.data\n      });\n      console.log(state);\n    });\n  }, [period]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, state.fetchState === REQUEST_STATUS.OK ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FullCalendar, {\n    plugins: [dayGridPlugin, interactionPlugin, timeGridPlugin],\n    headerToolbar: {\n      center: 'dayGridMonth'\n    },\n    initialView: \"dayGridMonth\",\n    locale: \"ja\" // 日本語化\n    ,\n    events: state.shiftList,\n    eventClick: handleEventClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(NewSubmitShifts, {\n    times: times(),\n    list: list,\n    setList: setList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(DefaultModal, {\n    open: open,\n    setOpen: setOpen,\n    content: content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(PageLoadingCircle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }));\n};","map":{"version":3,"names":["FullCalendar","dayGridPlugin","interactionPlugin","timeGridPlugin","React","useState","useEffect","useContext","useReducer","fetchMyShifts","SnackbarContext","betweenDates","getMonAndDate","DefaultModal","initialState","ShiftReducer","Button","Chip","Divider","Stack","Typography","LocationOnIcon","LocalPhoneIcon","BusinessIcon","CONFIRMED_COLOR","REQUEST_STATUS","UNCONFIRMED_COLOR","NewSubmitShifts","PageLoadingCircle","content","today","Date","EmployeeShifts","open","setOpen","list","setList","state","dispatch","sb","getFullYear","getMonth","period","setPeriod","times","time","i","orgParams","close","j","push","slice","handleEventClick","e","event","start","title","extendedProps","description","backgroundColor","color","name","address","type","then","res","payload","data","console","log","fetchState","OK","center","shiftList"],"sources":["/usr/src/app/app/src/containers/employeeSide/EmployeeShift.jsx"],"sourcesContent":["\r\nimport FullCalendar from \"@fullcalendar/react\";\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nimport timeGridPlugin from '@fullcalendar/timegrid';\r\n\r\nimport React, { useState, useEffect, useContext, useReducer } from \"react\";\r\nimport { fetchMyShifts } from \"../../apis/shifts\";\r\nimport { SnackbarContext } from \"../../contexts/snackBar\";\r\nimport { betweenDates, getMonAndDate } from \"../../lib/calcDate\";\r\nimport { DefaultModal } from \"../../components/shared/DefaultModal\";\r\nimport { initialState, ShiftReducer } from \"../../reducers/shift\";\r\nimport { Button, Chip, Divider, Stack, Typography } from \"@mui/material\";\r\n\r\n\r\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\r\nimport LocalPhoneIcon from '@mui/icons-material/LocalPhone';\r\nimport BusinessIcon from '@mui/icons-material/Business';\r\nimport { CONFIRMED_COLOR, REQUEST_STATUS, UNCONFIRMED_COLOR } from \"../../components/const\";\r\n\r\nimport { NewSubmitShifts } from \"../../components/shifts/NewSubmitShifts\";\r\nimport { PageLoadingCircle } from \"../../components/shared/commonPatrs\";\r\n\r\nlet content = \"\";\r\n\r\nconst today = new Date();\r\n\r\nexport const EmployeeShifts = () => {\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const [list, setList] = useState([]);\r\n  \r\n    const [state, dispatch] = useReducer(ShiftReducer, initialState)\r\n \r\n    const sb = useContext(SnackbarContext);\r\n    const [period, setPeriod] = useState([today.getFullYear(),today.getMonth()])\r\n\r\n    const times = () => {\r\n        let time = [];\r\n        for(let i=state.orgParams.open; i <= state.orgParams.close-1; i++){\r\n            for(let j=0; j< 60; j+=30){\r\n                time.push(`${i}:${(\"0\"+j).slice(-2)}`)\r\n            }\r\n        }\r\n        return time;\r\n    };\r\n\r\n   \r\n    const handleEventClick = (e) => {\r\n\r\n        content = (\r\n            <Stack spacing={2}>\r\n            \r\n                 <Typography variant=\"h5\">\r\n                    {getMonAndDate(e.event.start,\"/\")}\r\n                 </Typography>\r\n                 <Typography variant=\"h5\">\r\n                    {e.event.title}\r\n                 </Typography>\r\n                    \r\n                 <Typography variant=\"text\">\r\n                    備考： {e.event.extendedProps.description}\r\n                 </Typography>\r\n                 <div>\r\n                    {e.event.backgroundColor == CONFIRMED_COLOR?\r\n                    <h2 style={{color: CONFIRMED_COLOR}}>承認済み</h2>       :\r\n                    <h2 style={{color: UNCONFIRMED_COLOR}} >承認待ち</h2>\r\n                }\r\n               \r\n                </div>\r\n                 <Divider/>\r\n                 <Typography variant=\"text\">\r\n                   <BusinessIcon />：{state.orgParams.name}\r\n                 </Typography>\r\n                 <Typography variant=\"text\">\r\n                   <LocationOnIcon/>：{state.orgParams.address}\r\n                 </Typography>\r\n                 <Typography variant=\"h5\">\r\n                   <LocalPhoneIcon/>：090-9999-9999\r\n                 </Typography>\r\n            </Stack>\r\n           \r\n        )\r\n       \r\n        setOpen(true)\r\n    }\r\n\r\n    \r\n    useEffect(() => {\r\n        dispatch({type: \"FETCHING\"})\r\n        fetchMyShifts(period)\r\n        .then(res => {\r\n            dispatch({\r\n                type: \"FETCH_END\",\r\n                payload: res.data\r\n            })\r\n            console.log(state)\r\n        \r\n        })\r\n    },[period])\r\n\r\n    return (\r\n        <>\r\n         {\r\n            state.fetchState === REQUEST_STATUS.OK ?\r\n            <>   \r\n                <FullCalendar\r\n                    plugins={[dayGridPlugin,interactionPlugin,timeGridPlugin ]}\r\n                    headerToolbar={{\r\n                    center: 'dayGridMonth'\r\n                    }}\r\n                    initialView=\"dayGridMonth\"\r\n                    locale=\"ja\" // 日本語化\r\n                    events={state.shiftList}\r\n                    eventClick={handleEventClick}\r\n                />\r\n                <NewSubmitShifts\r\n                    times={times()}\r\n                    list={list}\r\n                    setList={setList}\r\n                    />\r\n\r\n                <DefaultModal\r\n                    open={open} \r\n                    setOpen={setOpen}\r\n                    content={content}\r\n                />\r\n            </>\r\n            :\r\n            <PageLoadingCircle/>\r\n        }\r\n        </>\r\n    \r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}