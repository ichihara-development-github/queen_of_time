{"ast":null,"code":"import _objectSpread from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectDestructuringEmpty from \"/usr/src/app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";\n\nvar _this = this,\n    _jsxFileName = \"/usr/src/app/app/src/containers/Shift.jsx\";\n\nimport { Button, Chip, CircularProgress, IconButton, Slider, Switch, Typography } from \"@mui/material\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport SendIcon from '@mui/icons-material/Send';\nimport { assignShift, createShift, deleteShift, determineShifts, fetchSubmittedShifts, fetchUnapproved, fetchUnapprovedShift } from \"../apis/shifts\";\nimport { PageLoadingCircle } from \"../components/shared/commonPatrs\";\nimport { BadgeContext } from \"../contexts/badge\";\nimport { SnackbarContext } from '../contexts/snackBar';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport { Stack } from \"@mui/system\";\nimport ArrowBackIosNewIcon from '@mui/icons-material/ArrowBackIosNew';\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\nimport { ShiftEdit } from \"./ShiftEdit\";\nimport { BUSSINESS_HOUR, dayOfWeek, SliderScales, STYLE_2 } from '../components/const';\nimport { DefaultModal } from \"../components/shared/DefaultModal\";\nimport { NewShiftForm } from \"../components/shifts/NewShiftForm\";\nimport { NewShiftModal } from \"../components/shifts/NewShiftModal\";\nimport { getMonAndDate, renderMonth } from \"../lib/calcDate\";\nimport { ConfigContext } from \"../contexts/config\";\nimport { calcAssignCount } from \"../lib/calc\";\nimport { NewEmployeeForm } from \"../components/employees/NewEmployeeForm\";\nimport { YearPicker } from \"../components/shared/YearPicker\";\nvar initialState = {\n  id: \"\",\n  name: \"\",\n  attendance_time: 0,\n  leaving_time: 0\n};\nvar shiftTerms = [{\n  id: \"early\",\n  label: \"朝\",\n  start: 9,\n  end: 12,\n  color: \"yellowgreen\"\n}, {\n  id: \"mid\",\n  label: \"日勤\",\n  start: 12,\n  end: 16,\n  color: \"orange\"\n}, {\n  id: \"late\",\n  label: \"夜\",\n  start: 16,\n  end: 20,\n  color: \"skyblue\"\n}];\nvar today = new Date();\nvar initialPeriod = [today.getFullYear(), today.getMonth() + 1];\n\nvar shiftParams = function shiftParams(at, lv, con) {\n  console.log(con);\n  return {\n    unsubmitted: {\n      text: \"未提出\",\n      style: {\n        backgroundColor: \"white\",\n        color: \"gray\"\n      }\n    },\n    rest: {\n      text: \"\".concat(\"未) \".repeat(Number(con)), \" \\u4F11\"),\n      style: {\n        backgroundColor: \"rgba(100,100,100,.2)\"\n      }\n    },\n    attend: {\n      text: \"\".concat(\"未) \".repeat(Number(con))).concat(at, \"-\").concat(lv),\n      style: {\n        backgroundColor: \"pink\"\n      }\n    }\n  };\n};\n\nexport var Shift = function Shift(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(initialState),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedShift = _useState6[0],\n      setSelectedShift = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      unapproved = _useState8[0],\n      setUnapproved = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      open = _useState10[0],\n      setOpen = _useState10[1];\n\n  var sb = useContext(SnackbarContext);\n  var badge = useContext(BadgeContext);\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      days = _useState12[0],\n      setDays = _useState12[1];\n\n  var _useState13 = useState(initialPeriod),\n      _useState14 = _slicedToArray(_useState13, 2),\n      period = _useState14[0],\n      setPeriod = _useState14[1];\n\n  var undo = function undo() {\n    fetchSubmittedShifts(period).then(function (res) {\n      return setValue(res.data.shifts);\n    });\n  };\n\n  var unassignShift = function unassignShift(e, id) {\n    e.preventDefault();\n\n    if (!id) {\n      return;\n    }\n\n    if (window.confirm(\"\\u30B7\\u30D5\\u30C8\\u3092\\u524A\\u9664\\u3057\\u307E\\u3059\\u304B\\uFF1F\")) {\n      setLoading(true);\n      deleteShift(id).then(function (res) {\n        if (res.status !== 200) {\n          return sb.setSnackBar({\n            open: true,\n            variant: \"error\",\n            content: \"シフトを確定できませんでした。\"\n          });\n        }\n\n        setValue(value.filter(function (v) {\n          return v.id !== id;\n        }));\n        setOpen(false);\n        sb.setSnackBar({\n          open: true,\n          variant: \"success\",\n          content: \"シフトを削除しました。\"\n        }); // badge.setBadge({\n        //   ...badge.badge, shift: res.data.shifts.filter(elm => elm.confirmed == false).length\n        // })\n      });\n      setLoading(false);\n    }\n  };\n\n  var updateShifts = function updateShifts(params) {};\n\n  var handleSwitch = function handleSwitch() {\n    console.log(value);\n    unapproved ? fetchSubmittedShifts(period).then(function (res) {\n      setValue(res.data.shifts.sort(function (ago, next) {\n        return ago.date - next.date;\n      }));\n      renderMonth(period);\n    }) : setValue(value.filter(function (v) {\n      return !v.confirmed;\n    }));\n    setUnapproved(!unapproved);\n  };\n\n  var orgConfig = useContext(ConfigContext);\n\n  var collectShift = function collectShift(params) {\n    var ids = _toConsumableArray(new Set(value.map(function (s) {\n      return s.employee_id;\n    })));\n\n    var list = [];\n    ids.map(function (id) {\n      list.push(params.filter(function (s) {\n        return s.employee_id == id;\n      }));\n    });\n    return list;\n  };\n\n  var renderShift = function renderShift(shift, employee, elm, i) {\n    var _onClick = \"\";\n    var params = \"\";\n\n    if (!shift) {\n      params = shiftParams(\"\", \"\", false).unsubmitted;\n\n      _onClick = function onClick() {\n        return shiftClick(null, {\n          employee_id: employee.employee_id,\n          date: elm.date,\n          name: employee.name\n        });\n      };\n    } else {\n      _onClick = function onClick() {\n        return shiftClick(shift);\n      };\n\n      shift.rest ? params = shiftParams(\"\", \"\", shift.confirmed).rest : params = shiftParams(shift.attendance_time, shift.leaving_time, shift.confirmed).attend;\n    }\n\n    return /*#__PURE__*/React.createElement(TableCell, {\n      key: i,\n      style: params.style,\n      onClick: function onClick() {\n        return _onClick();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 5\n      }\n    }, params.text);\n  };\n\n  var handleValue = function handleValue(e, newValue, activeThumb) {\n    if (!Array.isArray(newValue)) {\n      return;\n    }\n\n    if (activeThumb === 0) {\n      // selectedShift.attendance_time = Math.min(newValue[0], e.target.value[1] - orgConfig.params.min_work_time)\n      setSelectedShift(_objectSpread({}, selectedShift, {\n        attendance_time: Math.min(newValue[0], e.target.value[1] - orgConfig.params.min_work_time)\n      }));\n    } else {\n      setSelectedShift(_objectSpread({}, selectedShift, {\n        leaving_time: Math.max(newValue[1], e.target.value[0] + 2)\n      })); // setSelectedShift(change);\n    }\n  };\n\n  var handleSelectMonth = function handleSelectMonth(type) {\n    switch (type) {\n      case \"ahead\":\n        setPeriod([period[0] + Math.floor(period[1] / 12), period[1] % 12 + 1]);\n        return;\n\n      case \"back\":\n        var next = 12 - (12 - (period[1] - 1)) % 12;\n        setPeriod([period[0] - Math.floor(next / 12), next]);\n        return;\n    }\n  };\n\n  var _handleChange = function handleChange(e) {\n    setPeriod([Number(e.target.id), 6]);\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n\n    if (window.confirm(\"\\u30B7\\u30D5\\u30C8\\u3092\\u78BA\\u5B9A\\u3057\\u307E\\u3059\\u304B\\uFF1F\\n\\u203B\\u7DE8\\u96C6\\u3055\\u308C\\u305F\\u5834\\u5408\\u5F93\\u696D\\u54E1\\u306B\\u901A\\u77E5\\u3055\\u308C\\u307E\\u3059\\u3002\")) {\n      (selectedShift.id ? assignShift(selectedShift) : createShift(selectedShift)).then(function (res) {\n        if (res.status !== 201) {\n          return sb.setSnackBar({\n            open: true,\n            variant: \"error\",\n            content: \"シフトを確定できませんでした。\"\n          });\n        }\n\n        setValue([].concat(_toConsumableArray(value), _toConsumableArray(res.data.shift)));\n        sb.setSnackBar({\n          open: true,\n          variant: \"success\",\n          content: \"シフトを確定しました。\"\n        });\n        setOpen(false);\n      });\n    }\n  };\n\n  var handleDetermine = function handleDetermine(e) {\n    determineShifts(value).then(function (res) {\n      if (res.status !== 200) {\n        return sb.setSnackBar({\n          open: true,\n          variant: \"error\",\n          content: \"シフトを確定できませんでした。\"\n        });\n      }\n\n      setValue(res.data.shifts.sort(function (ago, next) {\n        return ago.date - next.date;\n      }));\n    });\n  };\n\n  var shiftClick = function shiftClick(shift, params) {\n    console.log(\"click\");\n\n    if (shift) {\n      setSelectedShift(shift);\n    } else {\n      var newShiftParams = {\n        employee_id: params.employee_id,\n        date: params.date,\n        name: params.name,\n        attendance_time: orgConfig.params.open,\n        leaving_time: orgConfig.params.close\n      };\n      setSelectedShift(newShiftParams);\n    }\n\n    setOpen(!open);\n  };\n\n  var shiftCount = function shiftCount(index) {\n    var time = BUSSINESS_HOUR(orgConfig.params.open, orgConfig.params.close);\n    var shift = value.filter(function (elm) {\n      return new Date(elm.date).getDate() == days[index].date.getDate();\n    });\n    return calcAssignCount(shift, time);\n  };\n\n  var content = /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return handleSubmit(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    style: {\n      width: \"90%\",\n      margin: \"auto\"\n    },\n    spacing: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 3\n    }\n  }, getMonAndDate(new Date(selectedShift.date), \"/\")), /*#__PURE__*/React.createElement(Stack, {\n    direction: \"row\",\n    justifyContent: \"space-between\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 5\n    }\n  }, selectedShift.name), selectedShift.confirmed ? /*#__PURE__*/React.createElement(Chip, {\n    variant: \"filled\",\n    color: \"success\",\n    label: \"\\u627F\\u8A8D\\u6E08\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(Chip, {\n    variant: \"outlined\",\n    label: \"\\u672A\\u627F\\u8A8D\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Slider, {\n    name: selectedShift.id,\n    value: [selectedShift.attendance_time, selectedShift.leaving_time],\n    onChange: function onChange(e, newValue, activeThumb) {\n      return handleValue(e, newValue, activeThumb);\n    },\n    marks: SliderScales,\n    valueLabelDisplay: \"auto\",\n    min: orgConfig.params.open,\n    max: orgConfig.params.close,\n    disabled: selectedShift.rest,\n    step: 0.5,\n    style: {\n      \"margin\": \"50px 0\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    checked: selectedShift.rest,\n    onChange: function onChange() {\n      setSelectedShift(_objectSpread({}, selectedShift, {\n        rest: !selectedShift.rest\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 4\n    }\n  }), \"\\u4F11\", /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    disabled: selectedShift.id === \"\",\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"success\",\n    endIcon: loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        width: \"1.2rem\",\n        height: \"1.2rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }\n    }) : \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 3\n    }\n  }, \"\\u30B7\\u30D5\\u30C8\\u3092\\u4F5C\\u6210\\u3059\\u308B\"), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    disabled: !selectedShift.id,\n    type: \"button\",\n    variant: \"contained\",\n    color: \"error\",\n    endIcon: loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        width: \"1.2rem\",\n        height: \"1.2rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }\n    }) : \"\",\n    onClick: function onClick(e) {\n      return unassignShift(e, selectedShift.id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 3\n    }\n  }, \"\\u524A\\u9664\")));\n  useEffect(function () {\n    try {\n      fetchSubmittedShifts(period).then(function (res) {\n        var shifts = unapproved ? res.data.shifts.filter(function (s) {\n          return s.confirmed == false;\n        }) : res.data.shifts;\n        setValue(shifts.sort(function (ago, next) {\n          return ago.date - next.date;\n        }));\n        setDays(renderMonth(period));\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }, [period]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, value ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DefaultModal, {\n    open: open,\n    setOpen: setOpen,\n    content: content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Stack, {\n    direction: \"row\",\n    alignItems: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 12\n    }\n  }, period[0], \"-\", period[1]), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: function onClick() {\n      return handleSelectMonth(\"back\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(ArrowBackIosNewIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(YearPicker, {\n    handleChange: function handleChange(e) {\n      return _handleChange(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: function onClick() {\n      return handleSelectMonth(\"ahead\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(ArrowForwardIosIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 15\n    }\n  }), \"\\u3000\"), /*#__PURE__*/React.createElement(Switch, {\n    checked: unapproved,\n    onChange: function onChange() {\n      return handleSwitch();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }\n  }), \"\\u672A\\u627F\\u8A8D\\u306E\\u307F\", /*#__PURE__*/React.createElement(Button, {\n    disabled: loading,\n    endIcon: loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        width: \"1.2rem\",\n        height: \"1.2rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 36\n      }\n    }) : /*#__PURE__*/React.createElement(SendIcon, {\n      color: \"inherit\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 99\n      }\n    }),\n    size: \"medium\",\n    variant: \"contained\",\n    onClick: function onClick(e) {\n      if (window.confirm(\"\\u8868\\u793A\\u3055\\u308C\\u3066\\u3044\\u308B\\u30B7\\u30D5\\u30C8\\u3092\\u78BA\\u5B9A\\u3057\\u307E\\u3059\\u304B\\uFF1F\\n\\u203B\\u7DE8\\u96C6\\u3055\\u308C\\u305F\\u5834\\u5408\\u5F93\\u696D\\u54E1\\u306B\\u901A\\u77E5\\u3055\\u308C\\u307E\\u3059\\u3002\")) {\n        handleDetermine(e);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 11\n    }\n  }, \"\\u3000\\u3000\\u3000\\u5168\\u3066\\u627F\\u8A8D\\u3000\\u3000\\u3000\")), /*#__PURE__*/React.createElement(TableContainer, {\n    style: {\n      maxHeight: 600\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    \"aria-label\": \"sticky table\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    style: {\n      minWidth: 50\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 19\n    }\n  }, \"\\u5F93\\u696D\\u54E1\\u540D\")), days.map(function (column) {\n    return /*#__PURE__*/React.createElement(TableCell, {\n      key: column.id,\n      style: {\n        minWidth: column.minWidth\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 17\n      }\n    }, column.date.getDate().toString(), column.dow);\n  }))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 11\n    }\n  }, collectShift(value).map(function (row, i) {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 15\n      }\n    }, row[0].name), days.map(function (elm, i) {\n      return renderShift(row[row.findIndex(function (e) {\n        return new Date(e.date).getDate() == elm.date.getDate();\n      })], row[0], elm, i);\n    }));\n  }), shiftTerms.map(function (term) {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: term.label,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        \"background\": term.color\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 13\n      }\n    }, term.label), days.map(function (_, i) {\n      return /*#__PURE__*/React.createElement(TableCell, {\n        style: {\n          \"background\": term.color,\n          color: \"red\".repeat(Number(!shiftCount(i)[term[\"id\"]]))\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 16\n        }\n      }, shiftCount(i)[term[\"id\"]]);\n    }));\n  }))))) : /*#__PURE__*/React.createElement(PageLoadingCircle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 5\n    }\n  }));\n};","map":{"version":3,"names":["Button","Chip","CircularProgress","IconButton","Slider","Switch","Typography","React","useEffect","useState","useContext","SendIcon","assignShift","createShift","deleteShift","determineShifts","fetchSubmittedShifts","fetchUnapproved","fetchUnapprovedShift","PageLoadingCircle","BadgeContext","SnackbarContext","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","Stack","ArrowBackIosNewIcon","ArrowForwardIosIcon","ShiftEdit","BUSSINESS_HOUR","dayOfWeek","SliderScales","STYLE_2","DefaultModal","NewShiftForm","NewShiftModal","getMonAndDate","renderMonth","ConfigContext","calcAssignCount","NewEmployeeForm","YearPicker","initialState","id","name","attendance_time","leaving_time","shiftTerms","label","start","end","color","today","Date","initialPeriod","getFullYear","getMonth","shiftParams","at","lv","con","console","log","unsubmitted","text","style","backgroundColor","rest","repeat","Number","attend","Shift","value","setValue","loading","setLoading","selectedShift","setSelectedShift","unapproved","setUnapproved","open","setOpen","sb","badge","days","setDays","period","setPeriod","undo","then","res","data","shifts","unassignShift","e","preventDefault","window","confirm","status","setSnackBar","variant","content","filter","v","updateShifts","params","handleSwitch","sort","ago","next","date","confirmed","orgConfig","collectShift","ids","Set","map","s","employee_id","list","push","renderShift","shift","employee","elm","i","onClick","shiftClick","handleValue","newValue","activeThumb","Array","isArray","Math","min","target","min_work_time","max","handleSelectMonth","type","floor","handleChange","handleSubmit","handleDetermine","newShiftParams","close","shiftCount","index","time","getDate","width","margin","height","maxHeight","minWidth","column","toString","dow","row","findIndex","term","_"],"sources":["/usr/src/app/app/src/containers/Shift.jsx"],"sourcesContent":["import { Button, Chip, CircularProgress, IconButton, Slider, Switch, Typography } from \"@mui/material\";\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport { assignShift, createShift, deleteShift, determineShifts, fetchSubmittedShifts, fetchUnapproved, fetchUnapprovedShift } from \"../apis/shifts\";\r\nimport { PageLoadingCircle } from \"../components/shared/commonPatrs\";\r\nimport { BadgeContext } from \"../contexts/badge\";\r\nimport { SnackbarContext } from '../contexts/snackBar';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport { Stack } from \"@mui/system\";\r\n\r\nimport ArrowBackIosNewIcon from '@mui/icons-material/ArrowBackIosNew';\r\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\r\n\r\nimport { ShiftEdit } from \"./ShiftEdit\";\r\nimport { BUSSINESS_HOUR, dayOfWeek, SliderScales, STYLE_2 } from '../components/const';\r\nimport { DefaultModal } from \"../components/shared/DefaultModal\";\r\nimport { NewShiftForm } from \"../components/shifts/NewShiftForm\";\r\nimport { NewShiftModal } from \"../components/shifts/NewShiftModal\";\r\nimport { getMonAndDate, renderMonth } from \"../lib/calcDate\";\r\nimport { ConfigContext } from \"../contexts/config\";\r\nimport { calcAssignCount } from \"../lib/calc\";\r\nimport { NewEmployeeForm } from \"../components/employees/NewEmployeeForm\";\r\nimport { YearPicker } from \"../components/shared/YearPicker\";\r\nconst initialState = {\r\n  id: \"\",\r\n  name:\"\",\r\n  attendance_time:0,\r\n  leaving_time:0\r\n}\r\n\r\n\r\nconst shiftTerms = [\r\n  {id: \"early\",label:\"朝\",start:9,end:12,color:\"yellowgreen\"},\r\n  {id: \"mid\",label:\"日勤\",start:12,end:16,color:\"orange\"},\r\n  {id: \"late\",label:\"夜\",start:16,end:20,color:\"skyblue\"}\r\n]\r\n\r\nconst today = new Date()\r\nconst initialPeriod = [today.getFullYear(),today.getMonth()+1]\r\n\r\n  \r\nconst shiftParams = (at,lv, con) => {\r\n  console.log(con)\r\n  return{\r\n    unsubmitted:{text: \"未提出\",style: {backgroundColor: \"white\", color: \"gray\"}},\r\n    rest:{text: `${\"未) \".repeat(Number(con))} 休`,style: {backgroundColor: \"rgba(100,100,100,.2)\"}},\r\n    attend: {text: `${\"未) \".repeat(Number(con))}${at}-${lv}`,style: {backgroundColor: \"pink\"}}\r\n}\r\n}\r\nexport const Shift = ({\r\n \r\n}) => {\r\n   \r\n\r\nconst [value, setValue] = useState();\r\nconst [loading, setLoading] = useState(false)\r\nconst [selectedShift, setSelectedShift] = useState(initialState);\r\nconst [unapproved, setUnapproved] = useState(false);\r\nconst [open, setOpen] = useState(false);\r\nconst sb = useContext(SnackbarContext);\r\nconst badge = useContext(BadgeContext);\r\nconst [days, setDays] = useState([])\r\nconst [period, setPeriod] = useState(initialPeriod);\r\n \r\n\r\nconst undo = () => {\r\n  fetchSubmittedShifts(period)\r\n  .then(res =>  setValue(res.data.shifts))\r\n}\r\n\r\nconst unassignShift = (e, id) => {\r\n  e.preventDefault();\r\n  if(!id){return}\r\n  if(window.confirm(\r\n    `シフトを削除しますか？`\r\n    )){    \r\n        setLoading(true)\r\n        deleteShift(id)\r\n        .then(res => {\r\n              if(res.status !== 200){ return sb.setSnackBar({open: true, variant:\"error\",content:\"シフトを確定できませんでした。\"}) }\r\n              setValue(value.filter(v=>v.id!==id))\r\n              setOpen(false)\r\n        \r\n              sb.setSnackBar({open: true, variant:\"success\",content:\"シフトを削除しました。\"})\r\n              // badge.setBadge({\r\n              //   ...badge.badge, shift: res.data.shifts.filter(elm => elm.confirmed == false).length\r\n              // })\r\n        })\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n  \r\nconst updateShifts = (params) => {\r\n\r\n}\r\n\r\nconst handleSwitch = () => {\r\n  console.log(value)\r\n  unapproved ? \r\n  fetchSubmittedShifts(period)\r\n  .then((res) => {\r\n  setValue(res.data.shifts.sort((ago, next)=>ago.date - next.date))\r\n  renderMonth(period)\r\n})\r\n  :\r\n  setValue(value.filter(v => !v.confirmed))\r\n  setUnapproved(!unapproved)\r\n}\r\n\r\nconst orgConfig = useContext(ConfigContext)\r\n\r\nconst collectShift = (params) => {\r\n  const ids =  [...new Set(value.map(s => s.employee_id))]\r\n  const list = []\r\n  ids.map(id => {\r\n    list.push(params.filter(s => s.employee_id == id));\r\n  })\r\n  \r\n  return list;\r\n}\r\n\r\nconst renderShift = (shift,employee,elm, i) => {\r\n  let onClick = \"\";\r\n  let params = \"\";\r\n\r\n  if(!shift){\r\n    params = shiftParams(\"\",\"\",false).unsubmitted\r\n    onClick = () => shiftClick(null,{employee_id: employee.employee_id,date: elm.date, name: employee.name})\r\n  }else{\r\n    onClick = () => shiftClick(shift)\r\n    shift.rest ?\r\n    params = shiftParams(\"\",\"\",shift.confirmed).rest\r\n    :\r\n    params = shiftParams(shift.attendance_time,shift.leaving_time,shift.confirmed).attend\r\n  }\r\n\r\n  return (\r\n    <TableCell \r\n    key={i} \r\n    style={params.style}\r\n    onClick={()=>onClick()}\r\n  >{params.text}</TableCell>\r\n  )\r\n}\r\n\r\nconst handleValue = (e, newValue, activeThumb) => {\r\n  \r\n  if (!Array.isArray(newValue)) {\r\n      return;\r\n    }\r\n\r\n    if (activeThumb === 0) {\r\n      // selectedShift.attendance_time = Math.min(newValue[0], e.target.value[1] - orgConfig.params.min_work_time)\r\n      setSelectedShift({...selectedShift,attendance_time: Math.min(newValue[0], e.target.value[1] - orgConfig.params.min_work_time)});\r\n    } else {\r\n      setSelectedShift({...selectedShift,leaving_time: Math.max(newValue[1], e.target.value[0] + 2)})\r\n      // setSelectedShift(change);\r\n    }\r\n  }\r\n\r\n  const handleSelectMonth = (type) => {\r\n    switch (type){\r\n      case \"ahead\":\r\n        setPeriod([period[0] + Math.floor(period[1] / 12),(period[1] % 12)+1])\r\n        return\r\n      case \"back\":\r\n        const next = 12-((12- (period[1] -1)) % 12)\r\n        setPeriod([period[0] - Math.floor(next /12),next])\r\n        return\r\n      }\r\n    } \r\n\r\n  const handleChange = (e) => {\r\n    setPeriod([Number(e.target.id),6])\r\n  }\r\n\r\n \r\n\r\nconst handleSubmit = (e) => {\r\n  e.preventDefault();\r\n  if(window.confirm(\r\n    `シフトを確定しますか？\\n※編集された場合従業員に通知されます。`\r\n    )){\r\n  (selectedShift.id ? assignShift(selectedShift) : createShift(selectedShift))\r\n  .then(res => {\r\n        if(res.status !== 201){ return sb.setSnackBar({open: true, variant:\"error\",content:\"シフトを確定できませんでした。\"}) }\r\n        setValue([...value,...res.data.shift])\r\n        sb.setSnackBar({open: true, variant:\"success\",content:\"シフトを確定しました。\"})\r\n        setOpen(false)\r\n  })\r\n  \r\n  }\r\n\r\n}\r\n\r\nconst handleDetermine = (e) => {\r\n  determineShifts(value)\r\n  .then(res => {\r\n        if(res.status !== 200){ return sb.setSnackBar({open: true, variant:\"error\",content:\"シフトを確定できませんでした。\"}) }\r\n        setValue(res.data.shifts.sort((ago, next)=>ago.date - next.date))\r\n  })\r\n  \r\n  }\r\n\r\n\r\nconst shiftClick = (shift,params) => {\r\n  console.log(\"click\")\r\n  \r\n  if(shift){\r\n      setSelectedShift(shift)\r\n  }else{\r\n    const newShiftParams = {\r\n      employee_id: params.employee_id,\r\n      date: params.date,\r\n      name: params.name,\r\n      attendance_time: orgConfig.params.open,\r\n      leaving_time: orgConfig.params.close\r\n    }\r\n    setSelectedShift(newShiftParams)\r\n  }\r\n  \r\n  setOpen(!open)\r\n  \r\n}\r\n\r\nconst shiftCount = (index) => {\r\n  const time  = BUSSINESS_HOUR(orgConfig.params.open, orgConfig.params.close);\r\n  \r\n  const shift = value.filter(elm => new Date(elm.date).getDate() == days[index].date.getDate())\r\n  return calcAssignCount(shift,time)\r\n}\r\n\r\n\r\n\r\nconst content = \r\n  <form onSubmit={(e)=>handleSubmit(e)}>\r\n  <Stack style={{width:\"90%\", margin:\"auto\"}} spacing={2} >\r\n  <Typography variant=\"h6\">\r\n      {getMonAndDate(new Date(selectedShift.date),\"/\")}\r\n  </Typography>\r\n    <Stack direction=\"row\" justifyContent=\"space-between\">\r\n    <Typography variant=\"h6\">\r\n      {selectedShift.name}\r\n  </Typography>\r\n  {selectedShift.confirmed ?\r\n    <Chip \r\n      variant=\"filled\"\r\n      color=\"success\"\r\n      label=\"承認済\"\r\n      />     :\r\n      <Chip \r\n      variant=\"outlined\"\r\n      label=\"未承認\"\r\n      />   \r\n   } \r\n    </Stack>\r\n    \r\n\r\n\r\n  <Slider\r\n      name={selectedShift.id}\r\n      value={[selectedShift.attendance_time, selectedShift.leaving_time]}\r\n      onChange={(e, newValue, activeThumb)=>handleValue(e, newValue, activeThumb)}\r\n      marks={SliderScales}\r\n      valueLabelDisplay=\"auto\"\r\n      min={orgConfig.params.open}\r\n      max={orgConfig.params.close}\r\n      disabled={selectedShift.rest}\r\n      step={0.5}\r\n      style={{\"margin\": \"50px 0\"}}\r\n  />\r\n   <Switch \r\n        checked={selectedShift.rest}\r\n        onChange={()=>{setSelectedShift({...selectedShift,rest: !selectedShift.rest})}}\r\n   />休\r\n  <Button\r\n      fullWidth\r\n      disabled={selectedShift.id ===\"\"}\r\n      type=\"submit\"\r\n      variant=\"contained\"\r\n      color=\"success\"\r\n      endIcon={loading? \r\n          <CircularProgress style={{width:\"1.2rem\", height: \"1.2rem\"}}/> :\r\n           \"\"}\r\n  >\r\n      シフトを作成する\r\n  </Button>\r\n  <Button\r\n      fullWidth\r\n      disabled={!selectedShift.id}\r\n      type=\"button\"\r\n      variant=\"contained\"\r\n      color=\"error\"\r\n      endIcon={loading? \r\n          <CircularProgress style={{width:\"1.2rem\", height: \"1.2rem\"}}/> :\r\n           \"\"}\r\n      onClick={(e)=>unassignShift(e,selectedShift.id)}\r\n  >\r\n      削除\r\n  </Button>\r\n \r\n\r\n  </Stack>\r\n\r\n\r\n  </form>;\r\n\r\nuseEffect(() => {\r\n  try {\r\n      fetchSubmittedShifts(period)\r\n      .then((res) => {\r\n      const shifts = unapproved ? res.data.shifts.filter(s=> s.confirmed == false) : res.data.shifts\r\n      setValue(shifts.sort((ago, next)=>ago.date - next.date))\r\n      setDays(renderMonth(period))\r\n})\r\n} \r\ncatch(e){\r\n  console.log(e)\r\n}\r\n\r\n},[period])\r\n\r\n  return (\r\n    <>\r\n  \r\n    {\r\n    value ? \r\n\r\n    <div>\r\n      <DefaultModal\r\n        open={open}\r\n        setOpen={setOpen}\r\n        content={content}\r\n      />\r\n    \r\n       <Stack direction=\"row\"alignItems=\"center\">\r\n           <h2>{period[0]}-{period[1]}</h2>\r\n           <IconButton onClick={() => handleSelectMonth(\"back\")}>\r\n            <ArrowBackIosNewIcon />\r\n           </IconButton>  \r\n           <YearPicker  handleChange={(e)=>handleChange(e)}/>\r\n         <IconButton  onClick={() => handleSelectMonth(\"ahead\")}>\r\n              <ArrowForwardIosIcon />\r\n        　</IconButton>\r\n        <Switch \r\n                checked={unapproved}\r\n                onChange={()=>handleSwitch()}\r\n          />\r\n          未承認のみ\r\n          <Button  \r\n                disabled={loading}\r\n                endIcon={loading ? <CircularProgress style={{width: \"1.2rem\", height:\"1.2rem\"}}/>:<SendIcon color=\"inherit\"/>}\r\n                size=\"medium\"\r\n                variant=\"contained\" \r\n                onClick={(e)=> {if(window.confirm(\r\n                  `表示されているシフトを確定しますか？\\n※編集された場合従業員に通知されます。`\r\n                  )){handleDetermine(e)}}}\r\n                >\r\n            　　　全て承認　　　\r\n          </Button>\r\n\r\n        </Stack>\r\n      \r\n\r\n      <TableContainer style={{maxHeight: 600}}>\r\n            <Table stickyHeader aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell\r\n                  style={{ minWidth: 50 }}\r\n                >\r\n                  <span>従業員名</span>\r\n              </TableCell>\r\n              {days.map(column => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  style={{ minWidth: column.minWidth }}\r\n                >\r\n                  {column.date.getDate().toString()}{column.dow}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n          {\r\n          collectShift(value).map((row,i) => (\r\n            <TableRow key={i}>\r\n              <TableCell\r\n                  key={i}\r\n                >\r\n                  {row[0].name}\r\n                </TableCell>\r\n             {days.map((elm,i) =>      \r\n              renderShift(row[row.findIndex(e => new Date(e.date).getDate() == elm.date.getDate())],row[0],elm,i)\r\n              )}  \r\n            </TableRow>\r\n          \r\n            ))\r\n            \r\n          }\r\n\r\n           {shiftTerms.map(term =>{\r\n            \r\n          return (\r\n            <TableRow key={term.label}>\r\n            <TableCell\r\n                style={{\"background\":term.color}} \r\n              >{term.label}\r\n             </TableCell>\r\n             \r\n            {days.map((_,i) =>\r\n              (<TableCell\r\n                style={{\"background\":term.color, color: \"red\".repeat(Number(!shiftCount(i)[term[\"id\"]]))}} \r\n              >{shiftCount(i)[term[\"id\"]]}\r\n             </TableCell>)\r\n            )\r\n          }\r\n           </TableRow>\r\n          )\r\n           \r\n            }\r\n           )}\r\n    \r\n        </TableBody>\r\n        </Table>\r\n        </TableContainer>\r\n      {/* <ShiftEdit\r\n        value={value}\r\n        loading={loading}\r\n        setLoading={setLoading}\r\n        undo={undo}\r\n        updateShifts={updateShifts}\r\n        unassignShift={unassignShift}\r\n      /> */}\r\n    </div>\r\n     :\r\n    <PageLoadingCircle />\r\n}\r\n\r\n    </>\r\n\r\n)\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}