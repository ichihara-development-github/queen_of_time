(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1007:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),o=a.n(c),l=(a(476),a(128)),i=(a(477),a(21)),s=a(4),u=a(32),m=a.n(u),d="".concat("https://api.queen-of-time.com","/api/v1");console.log("production");var f="".concat(d,"/employees"),E="".concat(d,"/employees/shifts"),h=("".concat(d,"/organizations/employees_unapproved_shifts"),"".concat(d,"/organizations/calendars")),p="".concat(d,"/organizations/manage_timestamps"),g="".concat(d,"/employees/timestamps"),b="".concat(d,"/employees/notifications"),v=("".concat(d,"/employees/initial_notifications"),"".concat(d,"/employees/notifications/all_notifications")),y="".concat(d,"/employees/timestamps/new"),O="".concat(d,"/rooms"),j="".concat(d,"/rooms/invite_employees"),w=function(e){return"".concat(d,"/rooms/").concat(e,"/messages")},x="".concat(d,"/profile_setting"),k=("".concat(d,"/org_config_setting"),"".concat(d,"/organizations/tasks")),C="".concat(d,"/login"),S="".concat(d,"/employees"),_="".concat(d,"/organizations"),L="".concat(d,"/organizations/calendars"),D="".concat(d,"/employees/shifts/new"),I="".concat(d,"/employees/shifts/submit_shifts"),N="".concat(d,"/employees/timestamps"),P=("".concat(d,"/employees/notifications"),"".concat(d,"/messages"),"".concat(d,"/employees/shifts/assign")),F="".concat(d,"/employees/timestamps/modulate_timestamps"),M="".concat(d,"/timestamps/approve"),T="".concat(d,"/employees/notifications/update_notification_read"),B="".concat(d,"/employees/shifts/determine_shifts"),A="".concat(d,"/update_profile"),G="".concat(d,"/update_org_config"),z="".concat(d,"/organizations/tasks/update_tasks"),W="".concat(d,"/logout"),R="".concat(d,"/check_session"),H=function(e){return m.a.delete((t=e,"".concat(d,"/employees/").concat(t))).then(function(e){return e}).catch(function(e){return e});var t},V=a(53),q=a(188),U=a.n(q),K="START",Y="LOADING",J="POST",$="OK",Z=[{value:9,label:"9\u6642"},{value:12,label:"12\u6642"},{value:15,label:"15\u6642"},{value:18,label:"18\u6642"},{value:20,label:"20\u6642"}],Q=["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],X=function(e,t){return{early_time:[e,9],mid_time:[10,16],late_time:[17,t]}},ee={backgroundColor:"royalblue",color:"white"},te={backgroundColor:"ivory"},ae=function(e){return e&&(e.image?"https://qot-images.s3.ap-northeast-1.amazonaws.com/"+e.image:U.a)},ne={fetchState:K,employeeList:[]},re=function(e,t){switch(t.type){case"FETCHING":return Object(i.a)({},e,{fechState:Y});case"POST":return Object(i.a)({},e,{fechState:J});case"FETCH_END":return{fetchState:$,employeeList:t.payload};default:throw new Error}},ce=a(1146),oe=a(1101),le=a(1133),ie=a(380),se=a.n(ie),ue=a(1090),me=a(1130),de=a(1122),fe=function(e){var t=e.open,a=e.handleClose,n=e.variant,c=e.content,o=r.a.forwardRef(function(e,t){return r.a.createElement(de.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))});return r.a.createElement(ue.a,{spacing:2,sx:{zIndex:3}},r.a.createElement(me.a,{open:t,autoHideDuration:6e3,onClose:function(){return a()},anchorOrigin:{vertical:"bottom",horizontal:"left"}},r.a.createElement(o,{severity:n,sx:{width:"100%"}},c)))},Ee=Object(n.createContext)(),he={open:!1,variant:"",content:""},pe=function(e){var t=e.children,a=Object(n.useState)(he),c=Object(s.a)(a,2),o=c[0],l=c[1];return r.a.createElement(Ee.Provider,{value:{setSnackBar:l}},t,r.a.createElement(fe,{open:o.open,handleClose:function(){l(Object(i.a)({},o,{open:!1}))},variant:o.variant,content:o.content}))},ge=a(133),be=a.n(ge),ve=a(105),ye=a.n(ve),Oe=a(5),je=a(13),we=a(103),xe=Object(n.createContext)(),ke=function(e){var t=e.children,a=Object(n.useState)({open:9,close:18}),c=Object(s.a)(a,2),o=c[0],l=c[1];return r.a.createElement(xe.Provider,{value:{params:o,setParams:l}},t)},Ce=a(1098),Se=a(1131),_e=a(1015),Le=a(1153),De=a(1154),Ie=a(1119),Ne=a(1156),Pe=a(1152),Fe=a(1157),Me=a(1144),Te=a(1145),Be=a(120),Ae=a.n(Be),Ge=a(377),ze=a.n(Ge),We=a(376),Re=a.n(We);m.a.defaults.xsrfCookieName="CSRF-TOKEN",m.a.defaults.xsrfHeaderName="X-CSRF-Token",m.a.defaults.withCredentials=!0;var He,Ve=m.a,qe=a(49),Ue=a(257),Ke=a(223),Ye=a.n(Ke),Je={position:"absolute",height:80,width:80,top:"calc(50% - 40px)",left:"calc(50% - 40px)",color:"gray"},$e=function(){return r.a.createElement(V.b,{to:"/"},r.a.createElement(ue.a,{direction:"row",alignItems:"flex-end",spacing:2},r.a.createElement("img",{style:{width:40,height:50},src:Ye.a}),r.a.createElement(Ue.a,{style:{color:"rgb(130,130,130)"},variant:"h4"},"Queen of Time")))},Ze=function(){return r.a.createElement(Te.a,{style:Je,color:"inherit"})},Qe=Object(n.createContext)(),Xe={chat:0,notification:0,shift:0,calendar:0,task:0},et=function(e){var t=e.children,a=Object(n.useState)(Xe),c=Object(s.a)(a,2),o=c[0],l=c[1];return r.a.createElement(Qe.Provider,{value:{badge:o,setBadge:l}},t)},tt={top:"calc(40% - (".concat(90,"px/2)"),maxWidth:800,maxHeight:500,margin:"auto",padding:120,border:"20px double royalblue",borderRadius:5},at=function(){return r.a.createElement("div",{style:{padding:24}},r.a.createElement(ue.a,{style:Object(i.a)({},tt,te),spacing:3,alignItems:"center"},r.a.createElement("img",{style:{animation:"poping 1.3s infinite"},src:Ye.a,width:90,height:90}),r.a.createElement("div",null,r.a.createElement("div",{id:"floatBarsG"},r.a.createElement("div",{id:"floatBarsG_1",className:"floatBarsG"}),r.a.createElement("div",{id:"floatBarsG_2",className:"floatBarsG"}),r.a.createElement("div",{id:"floatBarsG_3",className:"floatBarsG"}),r.a.createElement("div",{id:"floatBarsG_4",className:"floatBarsG"}),r.a.createElement("div",{id:"floatBarsG_5",className:"floatBarsG"}),r.a.createElement("div",{id:"floatBarsG_6",className:"floatBarsG"}),r.a.createElement("div",{id:"floatBarsG_7",className:"floatBarsG"}),r.a.createElement("div",{id:"floatBarsG_8",className:"floatBarsG"}))),r.a.createElement(Ue.a,{variant:"h5"},"Just a moment please\u2026")))},nt=Object(n.createContext)(),rt={loading:"loading",loggedIn:!1,chief:!1,name:""},ct=function(e){var t=e.children,a=Object(n.useState)(rt),c=Object(s.a)(a,2),o=c[0],l=c[1],u=Object(qe.g)(),m=Object(n.useContext)(Qe),d=Object(n.useContext)(xe),f=function(){l({loggedIn:!1,loading:"end"}),sessionStorage.clear(),alert("\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u304c\u78ba\u8a8d\u3067\u304d\u307e\u305b\u3093")},E=function(e){e.chief?(h(e),u.push("/Dashboard")):(l({loading:"end",loggedIn:!0,name:e.name,chief:e.chief}),u.push("/employeeDashboard"))},h=function(e){l(Object(i.a)({},o,{loading:"end",loggedIn:!0,name:e.name,chief:e.chief})),e.chief&&(d.setParams(Object(i.a)({},e.config,{orgName:e.orgName,orgAddress:e.orgAddress})),m.setBadge(e.badges))};Object(n.useEffect)(function(){Ve.get(R).then(function(e){return e}).catch(function(e){throw e}).then(function(e){h(e.data)}).catch(function(e){if("String"!=typeof e){if(console.log(e),403!==e.response.status)throw e;f()}})},[]);var p=function(){switch(o.loading){case"loading":return r.a.createElement(Ze,null);case"end":return t;case"initialLoading":return r.a.createElement(at,null)}};return r.a.createElement(nt.Provider,{value:{state:o,setState:l,login:function(e){l({loading:"initialLoading"}),function(e){return Ve.post(C,{session:e}).then(function(e){return e}).catch(function(e){throw e})}(e).then(function(e){E(e.data)}).catch(function(e){switch(console.log(e),e.response.status){case 401:u.push("/login");break;case 403:u.push("/login"),alert("\u65e2\u306b\u30ed\u30b0\u30a4\u30f3\u3055\u308c\u307e\u3059")}l({loading:"end"})})},logout:function(){Ve.delete(W).then(function(e){return e}).catch(function(e){return console.log(e)}).then(function(e){200==e.status&&(u.push("/login"),l({loggedIn:!1,loading:"end"}),sessionStorage.clear())})},sessionForbidden:f}},r.a.createElement(p,null))},ot=function(e){var t=e.sendParams,a=e.requestStatus,c=e.profile,o=void 0===c?{profile:""}:c,l=Object(we.a)(),u=l.register,m=l.handleSubmit,d=l.setError,f=l.clearErrors,E=l.formState.errors,h=Object(n.useState)(!1),p=Object(s.a)(h,2),g=p[0],b=p[1],v=Object(n.useState)(20),y=Object(s.a)(v,2),O=y[0],j=y[1],w=Object(n.useState)(!1),x=Object(s.a)(w,2),k=(x[0],x[1]),C=Object(n.useState)({password:"",passwordConfirm:""}),S=Object(s.a)(C,2),_=S[0],L=S[1],D=Object(n.useContext)(nt),I=Object(n.useRef)(),N=Object(je.a)(Array(47)).map(function(e,t){return t+18}),P=function(e){L(Object(i.a)({},_,Object(Oe.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)(function(){_.password!==_.passwordConfirm?(k(!1),d("password",{type:"notMatch",message:"\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002"})):(f("password"),k(!0))},[_]),r.a.createElement("form",{onSubmit:m(t)},r.a.createElement(ue.a,null,r.a.createElement("label",{style:{margin:"auto"}},r.a.createElement(_e.a,Object.assign({},u("image"),{style:{display:"none"},accept:"image/*",type:"file",onChange:function(e){return function(e){var t=e.target.files[0];u("image").onChange(e),I.current.title=t.name;var a=new FileReader;a.onload=function(e){I.current.setAttribute("src",e.target.result)},a.readAsDataURL(t)}(e)}})),r.a.createElement("img",{style:{height:100,width:100},ref:I,src:ae(o)})),r.a.createElement("input",Object.assign({},u("imageUrl"),{type:"hidden",defaultValue:o.profile&&o.profile.image})),r.a.createElement(Se.a,{disabled:!D.state.chief&&D.state.loggedin,label:"\u6c0f\u540d",className:"mui-input",size:"small",margin:"normal"}),r.a.createElement("span",{style:{color:"red"}},E.name&&E.name.message),r.a.createElement(ue.a,{direction:"row",spacing:4},r.a.createElement(Se.a,{label:"\u96fb\u8a71\u756a\u53f7",defaultValue:o&&o.profile.telephone,className:"mui-input",variant:"filled"}),r.a.createElement("span",{style:{color:"red"}},E.tel&&E.tel.message),r.a.createElement(Ce.a,{sx:{width:"100px"}},r.a.createElement(Le.a,{fullWidth:!0},r.a.createElement(De.a,null,"\u5e74\u9f62"),r.a.createElement(Ie.a,Object.assign({},u("age",{required:"\u203b\u5e74\u9f62\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093"}),{label:"age",defaultValue:o&&o.profile.age,className:"mui-input",value:O}),N.map(function(e){return r.a.createElement(Ne.a,{key:e,value:e,onChange:function(e){return j(e.target.value)}},e)})),r.a.createElement("span",{style:{color:"red"}},E.age&&E.age.message)))),r.a.createElement(Se.a,Object.assign({},u("email",{required:"\u203b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093",maxLength:{value:60,message:"\u6700\u5927\u6587\u5b57\u6570(60\u6587\u5b57)\u3092\u8d8a\u3048\u3066\u3044\u307e\u3059\u3002"}}),{size:"large",type:"email",variant:"standard",label:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",defaultValue:o.profile&&o.profile.email,className:"mui-input",margin:"normal"})),r.a.createElement("span",{style:{color:"red"}},E.email&&E.email.message),r.a.createElement(ue.a,{direction:"row",spacing:2,alignItems:"center"},r.a.createElement(Le.a,{sx:{my:2}},r.a.createElement(De.a,null,"\u30d1\u30b9\u30ef\u30fc\u30c9"),r.a.createElement(Pe.a,Object.assign({},u("password",{required:"\u203b\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093",minLength:{value:8,message:"\u534a\u89d2\u82f1\u6570\u5b578\u6587\u5b57\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"},pattern:{value:/^[a-zA-Z0-9.?/-]{8,24}$/,message:"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5f62\u5f0f\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093"}}),{label:"\u30d1\u30b9\u30ef\u30fc\u30c9",className:"mui-input",type:g?"text":"password",onChange:P,endAdornment:r.a.createElement(Fe.a,{position:"end"},r.a.createElement(Me.a,{onClick:function(){return b(!g)},edge:"end"},g?r.a.createElement(Re.a,null):r.a.createElement(ze.a,null)))}))),r.a.createElement(Le.a,null,r.a.createElement(De.a,null,"\u30d1\u30b9\u30ef\u30fc\u30c9(\u78ba\u8a8d)"),r.a.createElement(Pe.a,{name:"passwordConfirm",label:"\u30d1\u30b9\u30ef\u30fc\u30c9(\u78ba\u8a8d)",className:"mui-input",type:g?"text":"password",onChange:P}),r.a.createElement("span",{style:{color:"red"}},E.password&&E.password.message))),r.a.createElement(le.a,{sx:{my:4},type:"submit",variant:"contained",color:"success",endIcon:a==J?r.a.createElement(Te.a,{sx:{width:"1.2rem",height:"1.2rem"},color:"inherit"}):r.a.createElement(Ae.a,null)},"\u767b \u9332\u3000")))},lt=a(1123),it=a(1120),st=a(1129),ut=a(1100),mt=a(1158),dt=a(1139),ft=a(1102),Et=a(1134),ht=a(1099),pt=a(285),gt=a.n(pt),bt=function(e,t,a){var r=Object(n.useState)([]),c=Object(s.a)(r,2),o=c[0],l=c[1];return Object(n.useEffect)(function(){if(e){var n=e.filter(function(e){return-1!==e[t].toLowerCase().indexOf(a)});l(n)}},[a]),o},vt={position:"absolute",top:"50%",left:"50%",overflow:"scroll",height:400,width:270,transform:"translate(50%, -50%)",bgcolor:"white",border:"2px solid #000",boxShadow:24,p:4},yt=function(e){var t,a="#",n=2;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);for(t=0;t<3;t+=1){a+="00".concat((n>>8*t&255).toString(16)).slice(-2)}return a},Ot=function(e){var t=e.params,a=e.setParams,c=e.fetch,o=Object(n.useState)(!1),l=Object(s.a)(o,2),u=l[0],m=l[1],d=Object(n.useState)(),f=Object(s.a)(d,2),E=f[0],h=f[1],p=Object(n.useState)(),g=Object(s.a)(p,2),b=g[0],v=g[1],y=bt(E,b);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{component:"span",onClick:function(){return c().then(function(e){200===e.status&&h(e.data.employees)}),void m(!0)}},r.a.createElement(gt.a,null)),r.a.createElement(it.a,{open:u},r.a.createElement(ht.a,{sx:vt},r.a.createElement(le.a,{fullWidth:!0,variant:"text",onClick:function(){return m(!1)}},"\u9589\u3058\u308b"),E?r.a.createElement(ce.a,null,r.a.createElement(st.a,null,r.a.createElement(Se.a,{fullWidth:!0,placeholder:"\u691c\u7d22",onChange:function(e){return v(e.target.value)}})),y.length>0?y.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ut.a,{selected:t.id===e.id,onClick:function(){a(Object(i.a)({},t,{id:e.id,name:e.name}))}},r.a.createElement(mt.a,null,r.a.createElement(dt.a,{alt:e.name,sx:{bgcolor:yt(e.name)}},e.name.slice(0,2))),r.a.createElement(oe.a,{primary:e.name})),r.a.createElement(ft.a,{variant:"inset",component:"li"}))}):r.a.createElement(r.a.Fragment,null,b&&r.a.createElement("span",{style:{color:"red"}},"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002"),E.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ut.a,{selected:t.id===e.id,onClick:function(){a(Object(i.a)({},t,{id:e.id,name:e.name}))}},r.a.createElement(mt.a,null,r.a.createElement(dt.a,{alt:e.name,sx:{bgcolor:yt(e.name)}},e.name.slice(0,2))),r.a.createElement(oe.a,{primary:e.name})),r.a.createElement(ft.a,{variant:"inset",component:"li"}))}))):Object(je.a)(Array(6).keys()).map(function(e){return r.a.createElement(ht.a,{key:e,sx:{height:50}},r.a.createElement(ue.a,{direction:"row",spacing:2},r.a.createElement(Et.a,{variant:"circular",width:40,height:40}),r.a.createElement("div",{style:{width:"calc(100% - ".concat(60,"px)")}},r.a.createElement(Et.a,{variant:"text"}),r.a.createElement(Et.a,{variant:"text"}))))}))))},jt=function(e){return m.a.get(function(e){return"".concat(d,"/organizations/employees_shifts?period[]=").concat(e[0],"&period[]=").concat(e[1])}(e)).then(function(e){return e})},wt=function(e){return m.a.get(function(e){return"".concat(d,"/employees/shifts?period[]=").concat(e[0],"&period[]=").concat(e[1])}(e)).then(function(e){return e})},xt=function(e){return m.a.get(function(e){return"".concat(d,"/employees/shifts/assign_member/").concat(e)}(e)).then(function(e){return e}).catch(function(e){return e})},kt=function(e){return m.a.post(P,{shifts:e}).then(function(e){return e}).catch(function(e){return e})},Ct=function(e){return m.a.delete((t=e,"".concat(d,"/employees/shifts/").concat(t))).then(function(e){return e}).catch(function(e){return e});var t},St=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return"".concat(e.getMonth()+1).concat(t).concat(e.getDate())},_t=function(e,t){if(!e)return null;var a=new Date(1e3*e),n=a.getHours(),r=a.getMinutes();return"".concat(t||"").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))},Lt=function(e){return"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0"))},Dt=function(e){for(var t=[],a=e[0],n=e[1]-1,r=new Date(a,n,0),c=1;c<=r.getDate();c++){var o=new Date(a,n,c);t.push({id:c,date:o,dow:"(".concat(Q[o.getDay()],")"),minWidth:100})}return t},It={id:"",name:"\u5f93\u696d\u54e1\u304c\u9078\u629e\u3055\u308c\u3066\u307e\u305b\u3093\u3002",attendance_time:9,leaving_time:19,comment:"",confirmed:!0,rest:!1},Nt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,maxWidth:"95%",backgroundColor:"white",border:"2px solid #000",boxShadow:24,p:2},Pt=function(e){var t=e.sendShiftParams,a=e.date,c=e.loading,o=Object(n.useState)(It),l=Object(s.a)(o,2),u=l[0],m=l[1],d=Object(n.useContext)(xe);return Object(n.useEffect)(function(){return m(Object(i.a)({},u,{date:a}))},[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){m(Object(i.a)({},u,{date:a})),e.preventDefault(),t(u)}},r.a.createElement(ue.a,{style:{width:"90%",margin:"auto"},spacing:2},r.a.createElement("label",null,r.a.createElement(Ot,{style:Nt,params:u,setParams:m,fetch:function(){return xt(a)}})),r.a.createElement(Ue.a,{variant:"h6"},u.name),r.a.createElement(Ue.a,{variant:"h6"},St(a,"/")),r.a.createElement(lt.a,{value:[u.attendance_time,u.leaving_time],onChange:function(e,t){m(Object(i.a)({},u,{attendance_time:t[0],leaving_time:t[1]}))},marks:Z,valueLabelDisplay:"auto",min:d.params.open,max:d.params.close,step:.5}),r.a.createElement(Se.a,{margin:"normal",fullWidth:!0,defaultValue:"\u5099\u8003",multiline:!0,rows:3,onChange:function(e){return m(Object(i.a)({},u,{comment:e.target.value}))}}),r.a.createElement(le.a,{fullWidth:!0,disabled:""===u.id,type:"submit",variant:"contained",color:"success",endIcon:c?r.a.createElement(Te.a,{style:{width:"1.2rem",height:"1.2rem"}}):""},"\u30b7\u30d5\u30c8\u3092\u4f5c\u6210\u3059\u308b"))))},Ft=function(){return m.a.get(j).then(function(e){return e}).catch(function(e){throw e})},Mt=function(e){return m.a.post(O,{rooms:e}).then(function(e){return e}).catch(function(e){throw e})},Tt={id:""},Bt=function(e){var t=e.sendRoomParams,a=e.loading,c=e.setLoading,o=Object(n.useState)(Tt),l=Object(s.a)(o,2),i=l[0],u=l[1],m=Object(n.useContext)(Ee);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{style:{width:"60%",height:"100%",margin:"0 auto"},spacing:2},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),c(!0),!i.id)return m.setSnackBar({open:!0,variant:"error",content:"\u5f93\u696d\u54e1\u304c\u9078\u629e\u3055\u308c\u3066\u307e\u305b\u3093\u3002"}),c(!1),!1;t(i),u(Tt)}},r.a.createElement(Ue.a,{variant:"subtitle"},"\u500b\u5225\u30c1\u30e3\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"),r.a.createElement("h3",null,i.name?i.name:"\u5f93\u696d\u54e1\u3092\u9078\u629e"),r.a.createElement(Ot,{params:i,setParams:u,fetch:Ft}),r.a.createElement(le.a,{fullWidth:!0,color:"primary",variant:"contained",type:"submit",loading:a},"\u4f5c\u6210"))))},At=a(1132),Gt=a(1159),zt=a(1124),Wt=a(301),Rt=a.n(Wt),Ht=function(e){return m.a.patch(A,{profile:e}).then(function(e){return e}).catch(function(e){return console.log(e)})},Vt=function(e,t,a){Rt.a.config.update({accessKeyId:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_S3_ACCESS_KEY_ID,secretAccessKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_S3_SECRET_ACCESS_KEY});var n=new Rt.a.S3({params:{Bucket:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_S3_BUCKET},region:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_S3_BUCKET_REGION});try{var r={Body:e,Bucket:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_S3_BUCKET,Key:t};n.putObject(r).promise().then(function(e){console.log(e.$response),200===e.$response.httpResponse.statusCode?(Ht({image_url:t}),a.setSnackBar({open:!0,variant:"success",content:"\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u304c\u6b63\u5e38\u306b\u884c\u308f\u308c\u307e\u3057\u305f\u3002"}),console.log("OK")):a.setSnackBar({open:!0,variant:"error",content:"\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"})})}catch(c){throw c}},qt=a(1127),Ut=["\u5f93\u696d\u54e1\u767b\u9332","\u30b7\u30d5\u30c8\u4f5c\u6210","\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u4f5c\u6210"],Kt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",maxWidth:500,bgcolor:"white",border:"2px solid #000",boxShadow:24,p:2},Yt=function(e){var t=e.state,a=e.dispatch,c=Object(n.useState)(!1),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),f=d[0],E=d[1],h=Object(n.useState)(new Date),p=Object(s.a)(h,2),g=p[0],b=p[1],v=Object(n.useState)(0),y=Object(s.a)(v,2),O=y[0],j=y[1],w=Object(n.useContext)(Ee),x=[r.a.createElement(ot,{sendParams:function(e){var t=Object(qt.a)();try{(function(e){return m.a.post(S,{employees:e}).then(function(e){return e}).catch(function(e){return e})})(e).then(function(n){201===n.status&&(a({type:"FETCH_END",payload:n.data.employees}),Vt(e.image[0],t,w),w.setSnackBar({open:!0,variant:"success",content:"\u5f93\u696d\u54e1\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f"}),j(O+1))})}catch(n){console.log(n.message)}},requestStatus:t.FETCH_STATE,setDate:!0}),r.a.createElement(Ce.a,null,r.a.createElement(Me.a,{sx:{float:"right"}},r.a.createElement(be.a,{customInput:r.a.createElement(ye.a,null),dateFormat:"yyyy-MM-dd",selected:g,onChange:function(e){return b(e)}})),r.a.createElement(Ce.a,null,r.a.createElement(Pt,{sendShiftParams:function(e){E(!0),kt(e).then(function(e){if(201!==e.status)return w.setSnackBar({open:!0,variant:"error",content:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"}),void i(!1);w.setSnackBar({open:!0,variant:"success",content:"\u30b7\u30d5\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002"}),j(O+1)})},date:g,loading:f}))),r.a.createElement(Bt,{sendRoomParams:function(e){Mt(e).then(function(e){if(201===!e.status)return!1;E(!1),w.setSnackBar({open:!0,variant:"success",content:"\u65b0\u3057\u3044\u30c1\u30e3\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002"})})},loading:f,setLoading:E})];return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{style:{marginLeft:"auto"},variant:"contained",color:"success",endIcon:r.a.createElement(se.a,null),onClick:function(){i(!0)}},"\u65b0\u898f\u767b\u9332"),r.a.createElement(it.a,{open:l,onClose:function(){return i(!1)}},r.a.createElement(Ce.a,{sx:Kt},r.a.createElement(At.a,{activeStep:O,alternativeLabel:!0},Ut.map(function(e,t){return r.a.createElement(Gt.a,{key:t},r.a.createElement(zt.a,null,e))})),x[O])))},Jt=a(1151),$t=a(1022),Zt=a(1160),Qt=a(1161),Xt=a(1147),ea=a(382),ta=a.n(ea),aa=a(1103),na=a(1118),ra=a(381),ca=a.n(ra),oa=a(236),la=a.n(oa),ia={width:"100%",textAlign:"center"},sa={postion:"absolute",bottom:50,left:20,zIndex:1e3},ua={width:150,height:150},ma=function(){var e=Object(n.useReducer)(re,ne),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(s.a)(o,2),u=l[0],d=l[1],E=Object(n.useState)(!1),h=Object(s.a)(E,2),p=h[0],g=h[1],b=Object(n.useState)(),v=Object(s.a)(b,2),y=v[0],O=v[1],j=bt(a.employeeList,"name",y),w=j.length>0?j:a.employeeList,x=function(){return r.a.createElement(Jt.a,{sx:{width:"50%"}},r.a.createElement(Xt.a,{cols:3},w.map(function(e,t){return r.a.createElement($t.a,{key:t},r.a.createElement(Zt.a,{onClick:function(){return d(e)}},r.a.createElement("img",{src:ae(e),alt:t,loading:"lazy"}),r.a.createElement(Qt.a,{title:e.name})))})))},k=function(){return r.a.createElement(ce.a,{style:{width:"50%",overflow:"scroll"}},w.map(function(e,t){return r.a.createElement(ut.a,{key:t,sx:{width:220},selected:u&&e.id===u.id,onClick:function(){return d(e)}},r.a.createElement(mt.a,null,r.a.createElement(dt.a,{sx:{width:50,height:50},src:ae(e),alt:e.name})),r.a.createElement(oe.a,{primary:e.name}))}))},C=function(){return u?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{sx:{width:"100"},spacing:2,alignItems:"center"},r.a.createElement(dt.a,{style:ua,variant:"square",src:ae(u)}),r.a.createElement(Ue.a,{sx:{my:2},variant:"h4"},u.name),r.a.createElement(ft.a,null)),r.a.createElement(ht.a,null,r.a.createElement(Ue.a,{component:"h5"},"\u5408\u8a08\u51fa\u52e4\u6570\uff1a\u3000",u.attendances),r.a.createElement(Ue.a,{component:"h5"},"\u6b20\u52e4\u6570\uff1a\u3000",u.absent),r.a.createElement(Ue.a,{component:"h5"},"\u30b7\u30d5\u30c8\u63d0\u51fa\u7387\uff1a\u3000",u.shift_submit_rate),r.a.createElement(Ue.a,{component:"h5"},"\u6b21\u56de\u51fa\u52e4\u65e5\uff1a\u3000",u.recent_shift||"\u672a\u5b9a"),r.a.createElement(Ue.a,{component:"h5"},"\u30b7\u30b9\u30c6\u30e0\u767b\u9332\u65e5\uff1a\u3000",u.created)),r.a.createElement("div",{style:{position:"absolute",bottom:0}},r.a.createElement(le.a,{color:"error",variant:"contained",size:"large",onClick:function(){window.confirm("\u5f93\u696d\u54e1\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f\n\u203b\u95a2\u9023\u3065\u304f\u30b7\u30d5\u30c8\u30fb\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u524a\u9664\u3055\u308c\u307e\u3059")&&H(u.id).then(function(e){200===e.status&&c({type:"FETCH_END",payload:w.filter(function(e){return e.id!==u.id})})})},disabled:!u.id||u.chief},"\u524a\u9664"))):r.a.createElement(ht.a,{style:ia},r.a.createElement(Ue.a,{style:{marginTop:220},variant:"h5"},"\u5f93\u696d\u54e1\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"))};return Object(n.useEffect)(function(){try{c({type:"FETCHING"}),m.a.get(f).then(function(e){return e}).catch(function(e){return e}).then(function(e){c({type:"FETCH_END",payload:e.data.employees})})}catch(e){console.log(e.message)}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{sx:{px:2,height:500}},r.a.createElement(ue.a,{sx:{my:2},direction:"row",spacing:2},r.a.createElement(ue.a,{direction:"row",alignItems:"center"},r.a.createElement(ca.a,null),r.a.createElement(aa.a,{checked:p,onChange:function(){return g(!p)}}),r.a.createElement(ta.a,null)),r.a.createElement(na.a,{variant:"standard",placeholder:"\u691c\u7d22",onChange:function(e){return O(e.target.value)}}),r.a.createElement(Yt,{state:a,dispatch:c})),y&&j.length<1&&r.a.createElement("h5",{style:{color:"red"}},"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002"),r.a.createElement(ue.a,{sx:{height:500},direction:"row",spacing:1},a.fetchState===$?p?r.a.createElement(k,null):r.a.createElement(x,null):r.a.createElement(Et.a,{variant:"rectangular",height:"100%",width:"50%"}),r.a.createElement(Jt.a,{sx:Object(i.a)({position:"relative",p:1,width:"50%",maxWidth:700},te),elevation:2},r.a.createElement(C,null))),r.a.createElement(V.b,{to:"/Dashboard"},r.a.createElement(Me.a,{style:sa},r.a.createElement(la.a,{sx:{width:50,height:50}})))))},da=a(1149),fa=a(1113),Ea=a(1136),ha=a(1111),pa=a(402),ga=a.n(pa),ba=a(1148),va=a(139),ya=a.n(va),Oa=a(245),ja=a.n(Oa),wa=a(195),xa=a.n(wa),ka=a(400),Ca=a.n(ka),Sa=a(399),_a=a.n(Sa),La=a(1121),Da=a(1140),Ia=a(94),Na=a(386),Pa=a.n(Na),Fa=function(e){var t=e.taskCardsList,a=e.setTaskCardsList;return r.a.createElement(Me.a,{onClick:function(){var e=Object(qt.a)();if(t.length>=3)return alert("\u4f5c\u6210\u53ef\u80fd\u306a\u30bf\u30b9\u30af\u306f\u6700\u59273\u500b\u307e\u3067\u3067\u3059"),!1;a([].concat(Object(je.a)(t),[{id:e,title:"\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b",draggableId:"item".concat(e),tasks:[]}]))}},r.a.createElement("div",{className:"addTask"},r.a.createElement(Pa.a,null)))},Ma=function(e){var t=e.taskCard,a=e.taskCardsList,c=e.setTaskCardsList,o=Object(n.useState)(!1),l=Object(s.a)(o,2),i=l[0],u=l[1],m=Object(n.useState)(t.title||"\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b"),d=Object(s.a)(m,2),f=d[0],E=d[1],h=a.slice(),p=h.indexOf(h.find(function(e){return e.id==[t.id]}));return r.a.createElement("div",{onClick:function(){u(!0)}},i?r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h[p].title=f,c(h),u(!1)}},r.a.createElement(Se.a,{style:{backgroundColor:"white"},size:"small",onChange:function(e){E(e.target.value)}})):r.a.createElement(Ue.a,{style:{textAlign:"center"},variant:"h5"},f))},Ta=function(e){var t=e.inputText,a=e.setInputText,n=e.taskCard,c=e.taskCardsList,o=e.setTaskCardsList,l=n.tasks,i=c.slice(),s=i.indexOf(i.find(function(e){return e.id==[n.id]}));return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){var n=Object(qt.a)();if(e.preventDefault(),l.length>=5)return alert("\u4f5c\u6210\u53ef\u80fd\u306a\u30bf\u30b9\u30af\u306f\u6700\u59275\u500b\u307e\u3067\u3067\u3059"),!1;""!==t&&(i[s].tasks.push({id:n,draggableId:"task".concat(n),content:t}),o(i),a(""))}},r.a.createElement("input",{type:"text",placeholder:"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0\u3059\u308b",className:"taskAddInput",onChange:function(e){if(e.target.value.length>12)return alert("12\u6587\u5b57\u307e\u3067\u3067\u3059");a(e.target.value)},value:t})))},Ba=a(388),Aa=a.n(Ba),Ga=function(e){var t=e.index,a=e.task,n=e.taskCardsList,c=e.setTaskCardsList,o=e.taskCard,l=n.slice(),i=l.indexOf(l.find(function(e){return e.id==[o.id]})),s=function(){l[i].tasks=l[i].tasks.filter(function(e){return e.id!==a.id}),c(l)};return r.a.createElement(Ia.b,{index:t,draggableId:"task-".concat(a.id)},function(e){return r.a.createElement(Jt.a,Object.assign({key:a.id,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"taskContent"}),r.a.createElement(ue.a,{sx:{width:"100%"},direction:"row",alignItems:"center"},r.a.createElement(Ue.a,{variant:"h6"},a.content),r.a.createElement(Me.a,{style:{marginLeft:"auto"},onClick:s},r.a.createElement(Aa.a,null))))})},za=function(e){var t=e.taskCard,a=e.taskCardsList,n=e.setTaskCardsList,c=t.tasks;return r.a.createElement("div",null,r.a.createElement(Ia.a,{onDragEnd:function(e){!function(e,t,a){var n=e.splice(t,1);e.splice(a,0,n[0])}(c,e.source.index,e.destination.index),n(a)}},r.a.createElement(Ia.c,{droppableId:"droppable"},function(e){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),c.map(function(e,c){return r.a.createElement("div",{key:e.id},r.a.createElement(Ga,{index:c,task:e,taskCardsList:a,setTaskCardsList:n,taskCard:t}))}),e.placeholder)})))},Wa=a(389),Ra=a.n(Wa),Ha=(["\u6383\u9664","\u6d17\u6fef","\u6599\u7406","\u4ed5\u4e8b"].map(function(e,t){return{id:t,draggableId:"".concat(t),text:e}}),function(e){var t=e.index,a=e.taskCardsList,c=e.setTaskCardsList,o=e.taskCard,l=Object(n.useState)(""),i=Object(s.a)(l,2),u=i[0],m=i[1],d=function(){c(a.filter(function(e){return e.id!==o.id}))};return r.a.createElement(Ia.b,{draggableId:"tasksCard-".concat(o.id),index:t},function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,{className:"taskCard"}),r.a.createElement("div",e.dragHandleProps,r.a.createElement(Me.a,{style:{position:"absolute",top:0,right:0},onClick:d},r.a.createElement(Ra.a,null)),r.a.createElement(Ma,{taskCard:o,taskCardsList:a,setTaskCardsList:c})),r.a.createElement(Ta,{inputText:u,setInputText:m,taskCard:o,taskCardsList:a,setTaskCardsList:c}),r.a.createElement(za,{taskCard:o,taskCardsList:a,setTaskCardsList:c}))})}),Va=function(){var e=Object(n.useContext)(Ee),t=Object(n.useContext)(Qe),a=Object(n.useState)([{id:"0",draggableId:"item0",title:"",tasks:[]}]),c=Object(s.a)(a,2),o=c[0],l=c[1],u=function(e){!function(e,t,a){var n=e.splice(t,1);e.splice(a,0,n[0])}(o,e.source.index,e.destination.index),l(o)},d=function(){var a;window.confirm("\u30bf\u30b9\u30af\u306e\u72b6\u614b\u3092\u4fdd\u5b58\u3057\u307e\u3059\u304b\uff1f \n \u203b\u524a\u9664\u3055\u308c\u305f\u30bf\u30b9\u30af\u306f\u5fa9\u5143\u3055\u308c\u307e\u305b\u3093")&&(a=o,console.log(a),m.a.patch(z,{tasks:a}).then(function(e){return e}).catch(function(e){throw e})).then(function(a){200===a.status?(e.setSnackBar({variant:"success",open:!0,content:"\u30bf\u30b9\u30af\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f"}),setTimeout(function(){t.setBadge(Object(i.a)({},t.badge,{task:a.data.task_count}))},2e3)):e.setSnackBar({variant:"error",open:!0,content:"\u30bf\u30b9\u30af\u3092\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"})})};return Object(n.useEffect)(function(){m.a.get(k).then(function(e){return e}).catch(function(e){throw e}).then(function(e){l(e.data.task_cards)})},[]),Object(n.useMemo)(function(){return r.a.createElement("div",{className:"taskCardsArea"},r.a.createElement(ue.a,{sx:{height:60,width:"100%"},direction:"row"},r.a.createElement(Fa,{taskCardsList:o,setTaskCardsList:l}),r.a.createElement(le.a,{style:{marginLeft:"auto"},color:"success",variant:"contained",onClick:function(){return d()}},"\u4fdd\u5b58")),r.a.createElement(Ia.a,{onDragEnd:u},r.a.createElement(Ia.c,{droppableId:"droppable",direction:"horizontal"},function(e){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:{width:"100%"}}),r.a.createElement(Da.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"flex-start"},o.map(function(e,t){return r.a.createElement(Ha,{key:e.id,index:t,taskCard:e,taskCardsList:o,setTaskCardsList:l})}),e.placeholder))})))},[o])},qa=a(250),Ua=a(164),Ka=a(237),Ya=a(238),Ja=(a(958),a(1094)),$a={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"white",border:"2px solid #000",boxShadow:24,p:4},Za=function(e){var t=e.open,a=void 0===t?{open:a}:t,n=(e.setOpen,e.handleClose),c=void 0===n?{handleClose:c}:n,o=e.content,l=void 0===o?{content:l}:o;return r.a.createElement(it.a,{open:a,onClose:c},r.a.createElement(ht.a,{sx:Object(i.a)({},$a)},l))},Qa=function(e,t){return m.a.patch((a=e,"".concat(d,"/organizations/calendars/").concat(a)),{calendars:t}).then(function(e){return e}).catch(function(e){throw e});var a},Xa=function(e){return m.a.delete((t=e,"".concat(d,"/organizations/calendars/").concat(t))).then(function(e){return e}).catch(function(e){throw e});var t},en=a(1163),tn=a(1162),an=a(1104),nn=a(1164),rn=a(1126),cn=function(e){var t=e.value,a=e.handleChange,c=Object(n.useContext)(xe),o=[{key:"red",value:c.params.red},{key:"royalblue",value:c.params.royalblue},{key:"green",value:c.params.green},{key:"orange",value:c.params.orange}];return r.a.createElement(en.a,null,r.a.createElement(tn.a,null,r.a.createElement(an.a,{row:!0,value:t,onChange:a},o.map(function(e){return r.a.createElement(nn.a,{key:e.key,value:e.key,control:r.a.createElement(rn.a,{sx:{color:e.key,"&.Mui-checked":{color:e.key[600]}}}),label:e.value})}))))},on=function(e){var t=e.eventId,a=e.initialParams,c=e.setOpen,o=e.setEvents,l=e.setInitial,u=Object(n.useState)(a),d=Object(s.a)(u,2),f=d[0],E=d[1],h=Object(n.useState)(a.color),p=Object(s.a)(h,2),g=p[0],b=p[1],v=Object(n.useContext)(Ee),y=function(e){E(Object(i.a)({},f,Object(Oe.a)({},e.target.name,e.target.value)))},O=function(){return r.a.createElement(cn,{value:g,handleChange:function(e){b(e.target.value),E(Object(i.a)({},f,{color:e.target.value}))}})};return r.a.createElement("div",null,r.a.createElement(Le.a,{variant:"standard"},r.a.createElement(Se.a,{margin:"normal",type:"text",value:f.title,name:"title",className:"mui-input",label:"\u30a4\u30d9\u30f3\u30c8\u540d",size:"small",onChange:y}),r.a.createElement(Se.a,{margin:"normal",type:"text",value:f.start,disabled:!0,name:"start",label:"\u958b\u59cb\u65e5",size:"small"}),r.a.createElement(be.a,{customInput:r.a.createElement(Se.a,{fullWidth:!0,margin:"normal",size:"small",className:"mui-input"}),dateFormat:"yyyy-MM-dd",minDate:new Date,selected:new Date(f.start),onChange:function(e){return E(Object(i.a)({},f,{start:e}))}}),r.a.createElement(Se.a,{margin:"normal",fullWidth:!0,value:f.description,name:"description",className:"mui-input",onChange:y,placeholder:"\u8a73\u7d30",multiline:!0,rows:3}),r.a.createElement(O,null),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{sx:{p:1},spacing:3,direction:"row"},r.a.createElement(le.a,{size:"small",variant:"contained",color:"success",onClick:function(){Qa(t,f).then(function(e){o(e.data.events),l(e.data.events),v.setSnackBar({variant:"success",open:!0,content:"\u30a4\u30d9\u30f3\u30c8\u3092\u7de8\u96c6\u3057\u307e\u3057\u305f"}),c(!1)})}},"\u3000\u3000\u3000\u7de8\u3000\u96c6 \u3000\u3000"),r.a.createElement(le.a,{size:"small",variant:"contained",color:"error",onClick:function(){window.confirm("\u30a4\u30d9\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f")&&Xa(t).then(function(e){o(e.data.events),l(e.data.events),v.setSnackBar({variant:"error",open:!0,content:"\u30a4\u30d9\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3057\u305f"}),c(!1)})}},"\u3000\u3000\u3000\u524a\u3000\u9664\u3000\u3000\u3000"))):r.a.createElement(le.a,{size:"medium",variant:"contained",color:"primary",onClick:function(e){e.preventDefault();try{(function(e){return m.a.post(L,{calendars:e}).then(function(e){return e}).catch(function(e){throw e})})(f).then(function(e){if(201!==e.status)return c(!1),void v.setSnackBar({variant:"success",open:!0,content:"\u30a4\u30d9\u30f3\u30c8\u3092\u4f5c\u6210\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"});o(e.data.events),l(e.data.events),v.setSnackBar({variant:"success",open:!0,content:"\u30a4\u30d9\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f"}),c(!1)})}catch(e){console.log(e.message)}}},"\u4f5c\u3000\u6210")))},ln=function(e,t){var a={early:0,mid:0,late:0};return e?(e.forEach(function(e){if(!e.rest){var n=Math.ceil(e.attendance_time),r=Math.ceil(e.leaving_time),c=Object(je.a)(Array(r-n)).map(function(e,t){return t+n});a={early:a.early+Number(c.some(function(e){return t.early_time.includes(e)})),mid:a.mid+Number(c.some(function(e){return t.mid_time.includes(e)})),late:a.late+Number(c.some(function(e){return t.late_time.includes(e)}))}}}),a):a},sn=function(e,t){return Object.keys(e).map(function(a){var n=ln(e[a],t);return{title:"\u2600\ufe0e".concat(n.early,"\u2600\ufe0e").concat(n.mid,"\u263e").concat(n.late),start:a,color:"gray"}})},un=a(390),mn=a.n(un),dn=a(1165),fn=a(1142),En=function(e){var t=e.shifts,a=e.count,n=(e.date,e.setOpenState);e.setPeriod;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue.a,{variant:"h5"},"\u52e4\u52d9:\u3000",t.length,"\u4eba"),r.a.createElement(Ue.a,{variant:"h5"},"\u30b7\u30d5\u30c8:\u3000",a,"\u3000"),r.a.createElement(ft.a,null),t.map(function(e){return r.a.createElement(ht.a,{sx:{my:2}},r.a.createElement(ue.a,{direction:"row",spacing:2},r.a.createElement(dn.a,{title:e.confirmed?"":"\u30b7\u30d5\u30c8\u304c\u672a\u78ba\u5b9a\u3067\u3059",arrow:!0},r.a.createElement(fn.a,{key:e.id,variant:e.confirmed?"filled":"outlined",icon:r.a.createElement(mn.a,null),label:e.name})),r.a.createElement(Ue.a,{variant:"subtitle1"},e.attendance_time," \uff5e ",e.leaving_time)))}),r.a.createElement(le.a,{fullWidth:!0,variant:"contained",color:"success",onClick:function(){n("shift")}},"\u30b7\u30d5\u30c8\u3092\u7de8\u96c6\u3059\u308b"))},hn="",pn=function(e){var t=e.setOpenState,a=Object(n.useState)(),c=Object(s.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),f=d[0],E=d[1],p=Object(n.useState)(),g=Object(s.a)(p,2),b=g[0],v=g[1],y=Object(n.useState)([]),O=Object(s.a)(y,2),j=O[0],w=O[1],x=Object(n.useState)(!0),k=Object(s.a)(x,2),C=k[0],S=k[1],_=Object(n.useContext)(xe),L=X(_.params.open,_.params.close),D={title:"",description:"",start:"",end:"",color:"red"};return Object(n.useEffect)(function(){m.a.get(h).then(function(e){return e}).catch(function(e){throw e}).then(function(e){v(e.data.events),w(e.data.shifts),l(e.data.events)})},[]),r.a.createElement(r.a.Fragment,null,b?r.a.createElement("div",null,r.a.createElement(Ja.a,null,"\u8868\u793a\u9805\u76ee"),r.a.createElement(ue.a,{direction:"row",alignItems:"center"},console.log(j),r.a.createElement(cn,{handleChange:function(e){v(o.filter(function(t){return t.color==e.target.value}))}}),r.a.createElement(ue.a,{style:{marginLeft:"auto"},direction:"row",spacing:2,alignItems:"center"},r.a.createElement(aa.a,{checked:C,onChange:function(){return S(!C)}}),r.a.createElement(Ue.a,{variant:"subtitle1"},"\u30b7\u30d5\u30c8\u53cd\u6620"))),r.a.createElement(qa.a,{sx:{height:"100%"},plugins:[Ua.b,Ka.a,Ya.a],initialView:"dayGridMonth",headerToolbar:{center:"dayGridMonth,timeGridWeek"},locale:"ja",contentHeight:700,events:C?[].concat(Object(je.a)(sn(j,L)),Object(je.a)(b)):b,eventClick:function(e){var a=e.event;D={title:a.title,description:a.extendedProps.description,start:a.start.toLocaleString({timeZone:"Asia/Tokyo"}),end:a.end,color:a.backgroundColor},hn="gray"===a.backgroundColor?r.a.createElement(En,{shifts:j[Lt(a.start)],count:a.title,date:a.start,setOpenState:t}):r.a.createElement(on,{eventId:a.id,initialParams:D,setOpen:E,setEvents:v,setInitial:l}),E(!0)},dateClick:function(e){hn=r.a.createElement(on,{initialParams:Object(i.a)({},D,{start:e.dateStr.toString()}),setOpen:E,setEvents:v,setInitial:l}),E(!0)}})):r.a.createElement(Et.a,{variant:"rectangular",width:"100%",height:480}),r.a.createElement(Za,{open:f,setOpen:E,handleClose:function(){return E(!1)},content:hn}))},gn=a(240),bn=a(1107),vn=a(1110),yn=a(1105),On=a(1106),jn=a(1108),wn=a(1109),xn=a(1135),kn=a(165),Cn=a.n(kn),Sn=a(166),_n=a.n(Sn),Ln=a(1116),Dn=a(1143),In=(a(391),a(392),a(393),a(243)),Nn=a.n(In),Pn=a(1125),Fn={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"400px",width:500,maxWidth:"95%",overflow:"scroll",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:2},Mn=function(e){var t=e.open,a=e.setOpen,n=e.content,c=e.inputStyle;return r.a.createElement(Pn.a,{open:t,onClose:function(){return a(!1)}},r.a.createElement(en.a,{sx:Object(i.a)({},Fn,c)},n))},Tn=a(241),Bn=a.n(Tn),An=function(e){var t=e.list,a=e.setList,c=e.setDate,o=void 0===c?function(e){console.log(e)}:c,l=Object(n.useState)(new Date),i=Object(s.a)(l,2),u=i[0],m=i[1],d=function(e,t){var a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],o=r[1],l="".concat(t.getFullYear(),"-").concat(("00"+(t.getMonth()+1)).slice(-2),"-").concat(("00"+t.getDate()).slice(-2));return Object(n.useEffect)(function(){var t=e.filter(function(e){return e.date==l});t.sort(function(e,t){return e.date-e.date}),o(t)},[t,e]),c}(t,u);Object(n.useEffect)(function(){a(d)},[d,t]);var f=function(e){switch(e){case"ahead":return m(new Date(u.setDate(u.getDate()+1))),void o(u);case"back":return m(new Date(u.setDate(u.getDate()-1))),void o(u)}};return r.a.createElement(ue.a,{direction:"row",alignItems:"center"},r.a.createElement(Me.a,{onClick:function(){return f("back")}},r.a.createElement(Cn.a,null)),r.a.createElement(Me.a,null,r.a.createElement(be.a,{customInput:r.a.createElement(ye.a,null),dateFormat:"yyyy-MM-dd",selected:u,onChange:function(e){return m(e)}})),r.a.createElement(Me.a,{onClick:function(){return f("ahead")}},r.a.createElement(_n.a,null)),r.a.createElement(Ue.a,{variant:"h5"},St(u,"/")))},Gn=a(10),zn={display:"flex","justify-content":"center","align-items":"center"},Wn=(new Date).getFullYear(),Rn=Array.from(Array(6),function(e,t){return-3+t+Wn}),Hn=Object(Gn.a)(Jt.a)(function(e){var t=e.theme;return Object(i.a)({backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2,{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary})}),Vn={"box-shadow":0,"background-color":"gray",border:"solid 1px rgba(100,100,100,.6)"},qn=function(e){var t=e.handleChange,a=Object(n.useState)(!1),c=Object(s.a)(a,2),o=c[0],l=c[1],i=r.a.createElement("div",null,r.a.createElement(ht.a,{sx:{flexGrow:1}},r.a.createElement(Da.a,{container:!0,spacing:{xs:2,md:4},columns:{xs:4,sm:8,md:12}},Rn.map(function(e,a){return r.a.createElement(Da.a,{item:!0,xs:2,sm:6,md:6,key:a},r.a.createElement(Hn,{id:e,style:{style:Vn},value:e,onClick:function(e){t(e),l(!1)}},e))}))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,null,r.a.createElement(ye.a,{onClick:function(){return l(!0)}})),r.a.createElement(Mn,{content:i,open:o,setOpen:l,inputStyle:zn}))},Un={id:"",name:"",attendance_time:0,leaving_time:0},Kn=[{id:"early",label:"\u671d",start:9,end:12,color:"orange"},{id:"mid",label:"\u65e5\u52e4",start:12,end:16,color:"greenyellow"},{id:"late",label:"\u591c",start:16,end:20,color:"skyblue"}],Yn=new Date,Jn=[Yn.getFullYear(),Yn.getMonth()+1],$n=function(e){Object(gn.a)(e);var t=Object(n.useState)(),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),u=Object(s.a)(l,2),d=u[0],f=u[1],h=Object(n.useState)(Un),p=Object(s.a)(h,2),g=p[0],b=p[1],v=Object(n.useState)(!1),y=Object(s.a)(v,2),O=y[0],j=y[1],w=Object(n.useState)(!1),x=Object(s.a)(w,2),k=x[0],C=x[1],S=Object(n.useContext)(Ee),_=(Object(n.useContext)(Qe),Object(n.useState)([])),L=Object(s.a)(_,2),D=L[0],I=L[1],N=Object(n.useState)(Jn),P=Object(s.a)(N,2),F=P[0],M=P[1],T=function(e,t,a){return{unsubmitted:{text:O?"\xd7":"\u672a\u63d0\u51fa",style:{backgroundColor:"white",color:"gray"}},rest:{text:"".concat("\u672a) ".repeat(Number(!a))," \u4f11"),style:{backgroundColor:"rgba(100,100,100,.2)"}},attend:{text:"".concat("\u672a) ".repeat(Number(!a))).concat(e,"-").concat(t),style:{backgroundColor:"pink"}}}},A=Object(n.useContext)(xe),G=function(e){switch(e){case"ahead":return void M([F[0]+Math.floor(F[1]/12),F[1]%12+1]);case"back":var t=12-(12-(F[1]-1))%12;return void M([F[0]-Math.floor(t/12),t])}},z=function(e){var t;e.preventDefault(),window.confirm("\u30b7\u30d5\u30c8\u3092\u78ba\u5b9a\u3057\u307e\u3059\u304b\uff1f\n\u203b\u7de8\u96c6\u3055\u308c\u305f\u5834\u5408\u5f93\u696d\u54e1\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002")&&(g.id?kt(g):(t=g,t.date=new Date(t.date.getTime()+324e5),m.a.post(E,{shifts:t}).then(function(e){return e}).catch(function(e){return e}))).then(function(e){if(201!==e.status)return S.setSnackBar({open:!0,variant:"error",content:"\u30b7\u30d5\u30c8\u3092\u78ba\u5b9a\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002"});var t=c.slice().filter(function(e){return e.id!==g.id});o([].concat(Object(je.a)(t),[e.data.shift])),S.setSnackBar({open:!0,variant:"success",content:"\u30b7\u30d5\u30c8\u3092\u78ba\u5b9a\u3057\u307e\u3057\u305f\u3002"}),C(!1)})},W=function(e){if(0===c.length)return S.setSnackBar({open:!0,variant:"error",content:"\u5f53\u6708\u306e\u672a\u627f\u8a8d\u30b7\u30d5\u30c8\u304c\u3042\u308a\u307e\u305b\u3093"});var t;(t=c,console.log(t),m.a.patch(B,{shifts:t}).then(function(e){return e}).catch(function(e){return e})).then(function(e){if(200!==e.status)return S.setSnackBar({open:!0,variant:"error",content:"\u30b7\u30d5\u30c8\u3092\u78ba\u5b9a\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002"});o(e.data.shifts.sort(function(e,t){return e.date-t.date})),S.setSnackBar({open:!0,variant:"success",content:"\u30b7\u30d5\u30c8\u3092\u78ba\u5b9a\u3057\u307e\u3057\u305f\u3002"})})},R=function(e,t){if(console.log("click"),e)b(e);else{var a={employee_id:t.employee_id,date:t.date,name:t.name,attendance_time:A.params.open,leaving_time:A.params.close};b(a)}C(!k)},H=function(e){var t=X(A.params.open,A.params.close),a=c.filter(function(t){return new Date(t.date).getDate()==D[e].date.getDate()});return ln(a,t)},V=r.a.createElement("form",{onSubmit:function(e){return z(e)}},r.a.createElement(xn.a,{style:{width:"90%",margin:"auto"},spacing:2},r.a.createElement(Ue.a,{variant:"h6"},St(new Date(g.date),"/")),r.a.createElement(xn.a,{direction:"row",justifyContent:"space-between"},r.a.createElement(Ue.a,{variant:"h6"},g.name),g.confirmed?r.a.createElement(fn.a,{variant:"filled",color:"success",label:"\u627f\u8a8d\u6e08"}):r.a.createElement(fn.a,{variant:"outlined",label:"\u672a\u627f\u8a8d"})),r.a.createElement(lt.a,{name:g.id,value:[g.attendance_time,g.leaving_time],onChange:function(e,t,a){return function(e,t,a){Array.isArray(t)&&b(0===a?Object(i.a)({},g,{attendance_time:Math.min(t[0],e.target.value[1]-A.params.min_work_time)}):Object(i.a)({},g,{leaving_time:Math.max(t[1],e.target.value[0]+2)}))}(e,t,a)},marks:Z,valueLabelDisplay:"auto",min:A.params.open,max:A.params.close,disabled:g.rest,step:.5,style:{margin:"50px 0"}}),r.a.createElement(aa.a,{checked:g.rest,onChange:function(){b(Object(i.a)({},g,{rest:!g.rest}))}}),"\u4f11",r.a.createElement(le.a,{fullWidth:!0,disabled:""===g.id,type:"submit",variant:"contained",color:"success",endIcon:d?r.a.createElement(Te.a,{style:{width:"1.2rem",height:"1.2rem"}}):""},"\u30b7\u30d5\u30c8\u3092\u4f5c\u6210\u3059\u308b"),r.a.createElement(le.a,{fullWidth:!0,disabled:!g.id,type:"button",variant:"contained",color:"error",endIcon:d?r.a.createElement(Te.a,{style:{width:"1.2rem",height:"1.2rem"}}):"",onClick:function(e){return function(e,t){e.preventDefault(),t&&window.confirm("\u30b7\u30d5\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f")&&(f(!0),Ct(t).then(function(e){if(200!==e.status)return S.setSnackBar({open:!0,variant:"error",content:"\u30b7\u30d5\u30c8\u3092\u78ba\u5b9a\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002"});o(c.filter(function(e){return e.id!==t})),C(!1),S.setSnackBar({open:!0,variant:"success",content:"\u30b7\u30d5\u30c8\u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002"})}),f(!1))}(e,g.id)}},"\u524a\u9664")));return Object(n.useEffect)(function(){try{jt(F).then(function(e){var t=O?e.data.shifts.filter(function(e){return 0==e.confirmed}):e.data.shifts;o(t.sort(function(e,t){return e.date-t.date})),I(Dt(F))})}catch(e){console.log(e)}},[F]),r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",null,r.a.createElement(Mn,{open:k,setOpen:C,content:V}),r.a.createElement(xn.a,{direction:"row",alignItems:"center",justifyContent:"space-between"},r.a.createElement("div",null,r.a.createElement("h2",null,F[0],"-",F[1]),r.a.createElement(Me.a,{onClick:function(){return G("back")}},r.a.createElement(Cn.a,null)),r.a.createElement(qn,{handleChange:function(e){return function(e){M([Number(e.target.id),6])}(e)}}),r.a.createElement(Me.a,{onClick:function(){return G("ahead")}},r.a.createElement(_n.a,null),"\u3000"),r.a.createElement(aa.a,{checked:O,onChange:function(){return console.log(c),O?jt(F).then(function(e){o(e.data.shifts.sort(function(e,t){return e.date-t.date})),Dt(F)}):o(c.filter(function(e){return!e.confirmed})),void j(!O)}}),"\u672a\u627f\u8a8d\u306e\u307f"),r.a.createElement(le.a,{disabled:d,endIcon:d?r.a.createElement(Te.a,{style:{width:"1.2rem",height:"1.2rem"}}):r.a.createElement(Ae.a,{color:"inherit"}),size:"medium",variant:"contained",onClick:function(e){window.confirm("\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30b7\u30d5\u30c8\u3092\u78ba\u5b9a\u3057\u307e\u3059\u304b\uff1f\n\u203b\u7de8\u96c6\u3055\u308c\u305f\u5834\u5408\u5f93\u696d\u54e1\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002")&&W()}},"\u3000\u3000\u3000\u5168\u3066\u627f\u8a8d\u3000\u3000\u3000")),r.a.createElement(On.a,{style:{maxHeight:600}},r.a.createElement(bn.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(jn.a,null,r.a.createElement(wn.a,null,r.a.createElement(yn.a,{style:{minWidth:100}},r.a.createElement("span",null,"\u5f93\u696d\u54e1\u540d")),D.map(function(e){return r.a.createElement(yn.a,{key:e.id,style:{minWidth:e.minWidth}},e.date.getDate().toString(),e.dow)}))),r.a.createElement(vn.a,null,function(e){var t=Object(je.a)(new Set(c.map(function(e){return e.employee_id}))),a=[];return t.map(function(t){a.push(e.filter(function(e){return e.employee_id==t}))}),a}(c).map(function(e,t){return r.a.createElement(wn.a,{key:t},r.a.createElement(yn.a,{key:t},e[0].name),D.map(function(t,a){return function(e,t,a,n){var c="",o="";return e?(c=function(){return R(e)},o=e.rest?T("","",e.confirmed).rest:T(e.attendance_time,e.leaving_time,e.confirmed).attend):(o=T("","",!1).unsubmitted,c=function(){return R(null,{employee_id:t.employee_id,date:a.date,name:t.name})}),r.a.createElement(yn.a,{key:n,style:o.style,onClick:function(){return c()}},o.text)}(e[e.findIndex(function(e){return new Date(e.date).getDate()==t.date.getDate()})],e[0],t,a)}))}),Kn.map(function(e){return r.a.createElement(wn.a,{key:e.label},r.a.createElement(yn.a,{style:{background:e.color}},e.label),D.map(function(t,a){return r.a.createElement(yn.a,{style:{background:e.color,color:"red".repeat(Number(!H(a)[e.id]))}},H(a)[e.id])}))}))))):r.a.createElement(Ze,null))},Zn={fetchState:K,attendanceData:[]},Qn=function(e,t){switch(t.type){case"FETCHING":return Object(i.a)({},e,{fechState:Y});case"FETCH_END":case"FILTER":return{fetchState:$,attendanceData:t.payload};default:throw new Error}},Xn=a(60),er=function(e,t){switch(t){case"full":return"".concat(Math.floor(e/60),"\u6642\u9593").concat(e%60,"\u5206");case"colon":return"".concat(Math.floor(e/60),":").concat(e%60);case"decimal":return"".concat(Math.floor(e/60)+.25*Math.floor(e%60/15))}},tr=function(e){var t=e.params;return r.a.createElement(ue.a,{spacing:2},console.log(t),r.a.createElement("div",null,r.a.createElement(Ue.a,{style:ee,variant:"h6"},"\u6b8b\u696d\u6642\u9593"),r.a.createElement(Ue.a,{style:te,variant:"h6"},er(t.overtime,"full"))),r.a.createElement("div",null,r.a.createElement(Ue.a,{style:ee,variant:"h6"},"\u6df1\u591c\u6642\u9593"),r.a.createElement(Ue.a,{style:te,variant:"h6"},er(t.midnight_time,"full"))),r.a.createElement("div",null,r.a.createElement(Ue.a,{style:ee,variant:"h6"},"\u6df1\u591c\u6b8b\u696d\u6642\u9593"),r.a.createElement(Ue.a,{style:te,variant:"h6"},er(t.midnight_overtime,"full"))))},ar={textAlign:"center"},nr=function(e){var t=e.params,a=Object(n.useState)(!1),c=Object(s.a)(a,2),o=c[0],l=c[1],i=r.a.createElement("div",{style:ar},r.a.createElement(Ue.a,{sx:{py:1},variant:"h4"},t.name),r.a.createElement(ft.a,null),r.a.createElement(ue.a,{sx:{my:2},alignItems:"center",spacing:3,direction:"row",divider:r.a.createElement(ft.a,{orientation:"vertical",flexItem:!0})},r.a.createElement(Ue.a,{variant:"h6"},t.date.slice(-2),"\u65e5"),r.a.createElement(Ue.a,{variant:"h6"},"\u51fa\u52e4 ",r.a.createElement("br",null),_t(t.attendance_time)),r.a.createElement(Ue.a,{variant:"h6"},"\u9000\u52e4 ",r.a.createElement("br",null),_t(t.leaving_time)),r.a.createElement(Ue.a,{variant:"h6"},"\u4f11\u61a9 ",r.a.createElement("br",null),t.rest_time," \u5206")),r.a.createElement(Ue.a,{style:{fontWeight:"bold"},variant:"h6"},"\u52b4\u50cd\u6642\u9593 ",r.a.createElement("br",null),er(t.working_time,"full")),r.a.createElement(tr,{params:t}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mn,{open:o,setOpen:l,content:i}),r.a.createElement(le.a,{onClick:function(){return l(!0)},variant:"contained",color:"primary"},"\u8a73 \u7d30"))},rr=a(394),cr=a(1027),or=a(1128),lr=rr.a.span(He||(He=Object(Xn.a)(["\nheight:30px;\nopacity:.5;\nbackground: ",";\nwidth: ","px;\nmargin-left: ","px;\ntext-align: center;\ncolor: black;\nfont-weight:bold\n"])),function(e){return e.bgColor},function(e){return 4*e.width},function(e){return 4*e.margin}),ir=function(e){var t=e.state,a=e.list,n=e.handleCheck,c=function(e){var t=function(e){var t=function(e){return Math.floor(e/15)};return{time:t(e.working_time),start:t(_t(e.attendance_time))-24,rest:t(e.rest_time),overTime:t(e.overtime)}}(e),a=t.time,n=t.start,c=t.overTime,o=t.rest;return r.a.createElement(r.a.Fragment,null,r.a.createElement(lr,{className:"graph",bgColor:"royalblue",width:a/2,margin:n},a/4,"h"),r.a.createElement(lr,{bgColor:"gray",width:o}),r.a.createElement(lr,{bgColor:"royalblue",width:a/2}),r.a.createElement(lr,{bgColor:"#f3a68c",width:c}))},o=[{field:"confirmed",headerName:"\u627f\u8a8d",width:60,renderCell:function(e){return r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},e.row.confirmed&&"\u627f\u8a8d")}},{field:"check",headerName:"",width:150,renderCell:function(e){return r.a.createElement(cr.a,null,r.a.createElement(nn.a,{control:r.a.createElement(or.a,{color:"success",className:"check",id:e.row.id.toString(),name:e.row.name,onChange:function(e){return n(e)},disabled:e.row.confirmed}),label:e.row.name}))}},{field:"date",headerName:"\u65e5\u6642",width:100},{field:"attendance",headerName:"\u30b0\u30e9\u30d5",width:250,renderCell:function(e){return c(e.row)}},{field:"attendance_time",headerName:"\u51fa",width:70,renderCell:function(e){return r.a.createElement("div",null,r.a.createElement("h5",{style:{color:"red"}},_t(e.row.updated_attendance_time,"(\u7533)")),r.a.createElement("h5",null,_t(e.row.attendance_time)))}},{field:"leaving_time",headerName:"\u9000",width:70,renderCell:function(e){return r.a.createElement("div",null,r.a.createElement("h5",{style:{color:"red"}},_t(e.row.updated_leaving_time,"(\u7533)")),r.a.createElement("h5",null,"  ",_t(e.row.leaving_time)))}},{field:"rest_time",headerName:" \u4f11",width:40,renderCell:function(e){return r.a.createElement("div",null,r.a.createElement("h5",{style:{color:"red"}},e.row.updated_rest_time),r.a.createElement("h5",null,e.row.rest_time||0,"\u3000\u5206"))}},{field:"detail",headerName:"",width:80,renderCell:function(e){return r.a.createElement(nr,{params:e.row,formattedTime:_t})}},{field:"comment",headerName:"\u5099\u8003"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{sx:{height:"100%",position:"relative"}},"OK"==t?r.a.createElement(Ln.a,{rows:a,columns:o,pageSize:10,rowsPerPageOptions:[5],localeText:Dn.a.components.MuiDataGrid.defaultProps.localeText}):r.a.createElement(Ze,null)))},sr=function(e){Object(gn.a)(e);var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),u=i[0],d=i[1],f=Object(n.useState)(!1),E=Object(s.a)(f,2),h=E[0],g=E[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),y=v[0],O=v[1],j=Object(n.useReducer)(Qn,Zn),w=Object(s.a)(j,2),x=w[0],k=w[1],C=Object(n.useContext)(Ee),S=function(e){if(console.log(e.target.checked),e.target.checked)o([].concat(Object(je.a)(c),[{id:e.target.id,name:e.target.name}]));else{var t=c.filter(function(t){return t.id!=e.target.id});o(t)}console.log(c)},_=function(){O(!0),console.log(c);var e=c.map(function(e){return e.id});try{(function(e){return m.a.patch(M,{ids:e}).then(function(e){return e}).catch(function(e){return console.log(e)})})(e).then(function(e){if(200!==e.status)return C.setSnackBar({variant:"error",content:"\u627f\u8a8d\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f",open:!0}),void O(!1);C.setSnackBar({variant:"success",content:"\u52e4\u6020\u3092\u627f\u8a8d\u3057\u307e\u3057\u305f",open:!0}),O(!1)})}catch(t){console.log(t.message)}};return Object(n.useEffect)(function(){try{k({type:"FETCHING"}),m.a.get(p).then(function(e){return e}).catch(function(e){return console.log(e)}).then(function(e){k({type:"FETCH_END",payload:e.data.attendances})})}catch(e){console.log(e.message)}},[]),Object(n.useMemo)(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{height:450,width:"95%"}},r.a.createElement(ue.a,{sx:{my:1},direction:"row"},h?"":r.a.createElement(An,{list:x.attendanceData,setList:d}),r.a.createElement(ht.a,{style:{marginLeft:"auto"}},r.a.createElement(ue.a,{direction:"row",alignItems:"center"},r.a.createElement(aa.a,{checked:h,onChange:function(){return g(!h)}}),r.a.createElement(Ue.a,{variant:"subtitle1"},"\u672a\u627f\u8a8d\u306e\u307f"),r.a.createElement(le.a,{style:{marginLeft:"auto"},variant:"contained",color:"success",onClick:function(){window.confirm("\u9078\u629e\u4e2d\u306e\u52e4\u6020\u3092\u627f\u8a8d\u3057\u307e\u3059\u304b\uff1f")&&_()},endIcon:y?r.a.createElement(Te.a,{sx:{width:"1rem",height:"1rem"}}):""},"\u3000\u3000\u3000\u627f\u3000\u8a8d\u3000\u3000\u3000")))),r.a.createElement(ir,{state:x.fetchState,list:h?x.attendanceData.filter(function(e){return!e.confirmed}):u,handleCheck:S})))},[u,h,x,c])},ur=a(398),mr=a.n(ur),dr=function(e){var t=e.index,a=e.notification,c=e.selected,o=e.setSelected,l=Object(n.useState)(a.read),u=Object(s.a)(l,2),d=u[0],f=u[1],E=Object(n.useContext)(Qe),h=_t(new Date(a.created_at).getTime()/1e3),p=function(){var e;o(t),d||(e=a.id,m.a.patch(T,{id:e}).then(function(e){return e}).catch(function(e){throw e})).then(function(e){200===e.status&&(f(!0),E.setBadge(Object(i.a)({},E.badge,{notification:E.badge.notification-1})))})};return Object(n.useEffect)(function(){f(a.read)},[]),r.a.createElement("div",null,r.a.createElement(st.a,{style:d?{backgroundColor:"rgb(180,180,180)"}:{},button:!0,selected:c==t,onClick:function(){return p()}},r.a.createElement(ha.a,null,r.a.createElement(dt.a,{src:mr.a})),r.a.createElement(oe.a,{primary:a.title}),r.a.createElement("span",null,h)))},fr={fetchState:K,notificationsList:[]},Er=function(e,t){switch(t.type){case"FETCHING":return Object(i.a)({},e,{fechState:Y});case"FETCH_END":return{fetchState:$,notificationsList:t.payload};default:throw new Error}},hr=function(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),u=l[0],d=(l[1],Object(n.useContext)(Ee),Object(n.useContext)(nt)),f=Object(n.useReducer)(Er,fr),E=Object(s.a)(f,2),h=E[0],p=E[1],g=function(){try{p({type:"FETCHING"}),m.a.get(v).then(function(e){return e}).catch(function(e){throw e}).then(function(e){p({type:"FETCH_END",payload:e.data.notifications})}).catch(function(e){if(403!==e.response.status)throw e;d.sessionForbidden()})}catch(e){console.log(e)}},y=h.notificationsList.sort(function(e,t){return Number(e.read)-Number(t.read)});return Object(n.useEffect)(function(){try{p({type:"FETCHING"}),m.a.get(b).then(function(e){return e}).catch(function(e){throw e}).then(function(e){p({type:"FETCH_END",payload:e.data.notifications})}).catch(function(e){if(403!==e.response.status)throw e;d.sessionForbidden()})}catch(e){console.log(e)}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement(Ea.a,{variant:"permanent",open:!0,anchor:"right"},r.a.createElement(ht.a,{sx:{width:220},role:"presentation"},"OK"==h.fetchState?r.a.createElement(r.a.Fragment,null,h.notificationsList.length>0?r.a.createElement(ce.a,null,y.map(function(e,t){return r.a.createElement(dr,{key:t,index:t,notification:e,selected:a,setSelected:c})})):r.a.createElement(ht.a,{sx:{p:1,height:200}},r.a.createElement(Ue.a,{component:"div",variant:"subtitle"},"\u73fe\u5728\u901a\u77e5\u306f\u3042\u308a\u307e\u305b\u3093"))):r.a.createElement(r.a.Fragment,null,Object(je.a)(Array(4).keys()).map(function(e){return r.a.createElement(ht.a,{key:e,sx:{height:50}},r.a.createElement(Ue.a,{component:"div",key:e,variant:"caption"},r.a.createElement(Et.a,null),r.a.createElement(Et.a,null)))}))),r.a.createElement(ht.a,{sx:{p:1}},r.a.createElement(le.a,{id:"allNotifications",fullWidth:!0,variant:"outlined",color:"primary",disabled:u,onClick:function(){return g()}},"\u3059\u3079\u3066\u898b\u308b")))),r.a.createElement(Jt.a,{elevation:3,sx:Object(i.a)({width:"calc(100% - ".concat(220,"px)"),height:400},te)},r.a.createElement(ht.a,{sx:{p:2}},h.notificationsList.length>0&&r.a.createElement("div",null,r.a.createElement("h2",null,h.notificationsList[a].title),r.a.createElement("h3",null,"\u9001\u4fe1\u8005\uff1a\u3000",h.notificationsList[a].name),r.a.createElement("div",null,h.notificationsList[a].content)))))},pr=a(194),gr=a.n(pr),br=a(401),vr=a.n(br),yr=a(1112),Or=function(){var e=Object(n.useContext)(xe),t=Object(n.useContext)(Ee),a=[{key:"red",value:e.params.red},{key:"royalblue",value:e.params.royalblue},{key:"green",value:e.params.green},{key:"orange",value:e.params.orange}],c={submittable_start:new Date(e.params.submittable_start),submittable_end:new Date(e.params.submittable_end)},o=Object(n.useMemo)(function(){return Object(je.a)(Array(29)).map(function(e,t){return"".concat(t+1,"\u65e5")})},[]),l=Object(n.useMemo)(function(){return Object(je.a)(Array(25).keys())},[]),u=Object(n.useState)(c),d=Object(s.a)(u,2),f=d[0],E=(d[1],Object(n.useState)({})),h=Object(s.a)(E,2),p=h[0],g=h[1],b=Object(we.a)(),v=b.register,y=b.handleSubmit,O=(b.formState.errors,function(e){g(Object(i.a)({},p,Object(Oe.a)({},e.target.name,e.target.value))),console.log(p)});return r.a.createElement(Jt.a,{sx:Object(i.a)({p:1},te)},r.a.createElement("form",{onSubmit:y(function(a){(function(e){return m.a.patch(G,{config:e}).then(function(e){return e}).catch(function(e){return console.log(e)})})(Object(i.a)({},a,f,p)).then(function(a){200===a.status&&(e.setParams(Object(i.a)({},a.data.config,{orgName:a.data.orgName,orgAddress:a.data.orgAddress})),t.setSnackBar({open:!0,variant:"success",content:"\u60c5\u5831\u3092\u3057\u307e\u3057\u305f\u3002"}))})})},r.a.createElement(ue.a,{sx:{py:2},direction:"row",alignItems:"center",spacing:2,justifyContent:"end"},r.a.createElement(Ue.a,{varinat:"h6"},"\u8cac\u4efb\u8005\uff1a ",e.params.name," "),r.a.createElement(Se.a,Object.assign({},v("name",{required:"\u203b\u7d44\u7e54\u540d\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093"}),{label:"\u7d44\u7e54\u540d",className:"mui-input",defaultValue:e.params.orgName}))),r.a.createElement(ue.a,null,r.a.createElement(Se.a,Object.assign({},v("address",{required:"\u203b\u6240\u5728\u5730\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093"}),{fullWidth:!0,sx:{my:1,maxWidth:400,marginLeft:"auto"},label:"\u6240\u5728\u5730",className:"mui-input",defaultValue:e.params.orgAddress}))),r.a.createElement(ue.a,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between"},r.a.createElement(dn.a,{title:"\u55b6\u696d\u6642\u9593\u306f\u30b7\u30d5\u30c8\u63d0\u51fa\u3067\u52e4\u52d9\u53ef\u80fd\u306a\u6642\u9593\u306b\u53cd\u6620\u3055\u308c\u307e\u3059\u3002"},r.a.createElement(Ue.a,{variant:"subtitle1"},"\u55b6\u696d\u6642\u9593")),r.a.createElement("div",null,r.a.createElement(Le.a,{sx:{m:1,width:50}},r.a.createElement(De.a,null,"\u6642"),r.a.createElement(yr.a,Object.assign({},v("open",{required:"\u203b\u55b6\u696d\u958b\u59cb\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093"}),{className:"mui-input",label:"\u6642",defaultValue:e.params.open}),l.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),"\u3000\uff5e",r.a.createElement(Le.a,{sx:{m:1,width:50}},r.a.createElement(De.a,null,"\u6642"),r.a.createElement(yr.a,Object.assign({},v("close",{required:"\u203b\u55b6\u696d\u7d42\u4e86\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093"}),{className:"mui-input",label:"\u6642\u9593",defaultValue:e.params.close}),l.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement(ft.a,{sx:{my:1}}),r.a.createElement(Ue.a,{variant:"h6"},"\u30c1\u30e3\u30c3\u30c8"),r.a.createElement(ue.a,{direction:"row",spacing:2,alignItems:"center",justifyContent:"end"},r.a.createElement(dn.a,{title:"ON\u72b6\u614b\u3060\u3068\u30c1\u30e3\u30c3\u30c8\u753b\u9762\u3092\u96e2\u308c\u3066\u3044\u3066\u3082\u30d6\u30e9\u30a6\u30b6\u306b\u901a\u77e5\u304c\u5c4a\u304d\u307e\u3059\u3002"},r.a.createElement(cr.a,null,r.a.createElement(nn.a,{control:r.a.createElement(or.a,Object.assign({},v("chat_notice"),{checked:e.params.chat_notice})),label:"\u30d6\u30e9\u30a6\u30b6\u901a\u77e5",labelPlacement:"start"})))),r.a.createElement(ft.a,{sx:{my:1}}),r.a.createElement(Ue.a,{variant:"h6"},"\u30b7\u30d5\u30c8"),r.a.createElement(ue.a,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between"},r.a.createElement(Ue.a,{variant:"subtile1"},"\u6700\u4f4e\u52e4\u52d9\u6642\u9593"),r.a.createElement("div",null,r.a.createElement(Le.a,{sx:{m:1,width:50}},r.a.createElement(De.a,null,"\u6642\u9593"),r.a.createElement(yr.a,Object.assign({},v("min_work_time"),{className:"mui-input",label:"\u6642\u9593",defaultValue:e.params.min_work_time}),l.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),"\u3000")),r.a.createElement(Ue.a,{variant:"subtile1"},"\u30b7\u30d5\u30c8\u63d0\u51fa\u5bfe\u8c61\u671f\u9593"),r.a.createElement(ue.a,{direction:"row",spacing:2,alignItems:"center",justifyContent:"end"},r.a.createElement(Le.a,{sx:{width:100}},r.a.createElement(Ue.a,{variant:"h6"},"\u6bce\u6708"),r.a.createElement(yr.a,Object.assign({},v("min_work_time"),{className:"mui-input",label:"\u65e5\u4ed8",defaultValue:e.params.shift_start_day||1}),o.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(ft.a,{sx:{my:2}}),r.a.createElement(Ue.a,{variant:"h6"},"\u52e4\u6020\u6253\u523b"),r.a.createElement(ue.a,{sx:{py:2},direction:"row",alignItems:"center",spacing:2,justifyContent:"space-between"},r.a.createElement(dn.a,{title:"\u5f93\u696d\u54e1\u304c\u6253\u523b\u53ef\u80fd\u306a\u6240\u5728\u5730\u304b\u3089\u306e\u8ddd\u96e2\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002"},r.a.createElement(Ue.a,{variant:"subtitle1"},"\u6253\u523b\u53ef\u80fd\u306a\u8ddd\u96e2")),r.a.createElement(Se.a,Object.assign({},v("stampable_distance"),{label:"m",className:"mui-input",type:"number",defaultValue:e.params.stampable_distance}))),r.a.createElement(ft.a,{sx:{my:2}}),r.a.createElement(Ue.a,{variant:"h6"},"\u30ab\u30ec\u30f3\u30c0\u30fc"),r.a.createElement(ue.a,{sx:{py:2},direction:"row",justifyContent:"space-between"},r.a.createElement(dn.a,{title:"\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u30a4\u30d9\u30f3\u30c8\u540d\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002"},r.a.createElement(Ue.a,{variant:"subtitle1"},"\u30a4\u30d9\u30f3\u30c8\u540d")),r.a.createElement("div",null,r.a.createElement(Le.a,null,r.a.createElement(an.a,{row:!0},a.map(function(e){return r.a.createElement("div",{key:e.key},r.a.createElement(Se.a,{style:{width:80,backgroundColor:"white"},size:"small",name:e.key,defaultValue:e.value,onChange:O}),r.a.createElement(nn.a,{key:e.key,value:e.key,control:r.a.createElement(rn.a,{sx:{color:e.key}})}))}))))),r.a.createElement(ue.a,{sx:{my:2}},r.a.createElement(le.a,{fullWidth:!0,type:"submit",style:{margin:"0 auto",maxWidth:300},variant:"contained",color:"success"},"\u4fdd\u5b58"))))},jr=new Date,wr=[jr.getFullYear(),jr.getMonth()+1],xr=function(){var e=Object(n.useState)("task"),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),i=l[0],u=l[1],m=Object(n.useState)(wr),d=Object(s.a)(m,2),f=(d[0],d[1],Object(qe.g)(),Object(n.useContext)(nt)),E=Object(n.useContext)(Qe),h=function(){u(!i)},p=r.a.createElement("div",null,r.a.createElement(ba.a,null,r.a.createElement(V.b,{to:"/employeeDashboard"},f.state.name)),r.a.createElement(ft.a,null),r.a.createElement(ce.a,null,r.a.createElement(V.b,{to:"/employees"},r.a.createElement(st.a,{button:!0},r.a.createElement(ha.a,null,r.a.createElement(gr.a,null)),r.a.createElement(oe.a,{primary:"\u5f93\u696d\u54e1\u7ba1\u7406"}))),r.a.createElement(V.b,{to:"/chat"},r.a.createElement(st.a,{button:!0,key:"chat"},r.a.createElement(ha.a,null,r.a.createElement(La.a,{color:"error",badgeContent:E.badge.message},r.a.createElement(ya.a,null))),r.a.createElement(oe.a,{primary:"\u30c1\u30e3\u30c3\u30c8"}))),r.a.createElement(st.a,{button:!0,key:"notification",onClick:function(){c("notification")}},r.a.createElement(ha.a,null,r.a.createElement(La.a,{color:"error",badgeContent:E.badge.notification},r.a.createElement(_a.a,null))),r.a.createElement(oe.a,{primary:"\u901a\u77e5"})),r.a.createElement(st.a,{button:!0,key:"shift",onClick:function(){c("shift")}},r.a.createElement(ha.a,null,r.a.createElement(La.a,{color:"error",badgeContent:E.badge.shift},r.a.createElement(ja.a,null))),r.a.createElement(oe.a,{primary:"\u30b7\u30d5\u30c8"})),r.a.createElement(st.a,{button:!0,key:"attendance",onClick:function(){c("attendance")}},r.a.createElement(ha.a,null,r.a.createElement(La.a,{color:"error",badgeContent:E.badge.attendance},r.a.createElement(xa.a,null))),r.a.createElement(oe.a,{primary:"\u6253\u523b\u5c65\u6b74"}))),r.a.createElement(ft.a,null),r.a.createElement(ce.a,null,r.a.createElement(st.a,{button:!0,key:"carender",onClick:function(){c("calendar")}},r.a.createElement(ha.a,null,r.a.createElement(La.a,{color:"error",badgeContent:E.badge.calendar},r.a.createElement(ye.a,null))),r.a.createElement(oe.a,{primary:"\u30ab\u30ec\u30f3\u30c0\u30fc"})),r.a.createElement(st.a,{button:!0,key:"task",onClick:function(){c("task")}},r.a.createElement(ha.a,null,r.a.createElement(La.a,{color:"error",badgeContent:E.badge.task},r.a.createElement(Ca.a,null))),r.a.createElement(oe.a,{primary:"\u30bf\u30b9\u30af"})),r.a.createElement(st.a,{button:!0,key:"setting",onClick:function(){c("setting")}},r.a.createElement(ha.a,null,r.a.createElement(vr.a,null)),r.a.createElement(oe.a,{primary:"\u8a2d\u5b9a"})),r.a.createElement(st.a,null,r.a.createElement(le.a,{fullWidth:!0,color:"error",variant:"outlined",onClick:function(){window.confirm("\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u304b\uff1f")&&f.logout()}},"\u30ed\u30b0\u30a2\u30a6\u30c8"))));return Object(n.useMemo)(function(){return r.a.createElement(Ce.a,{sx:{display:"flex"}},r.a.createElement(fa.a,null),r.a.createElement(da.a,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(220,"px)")},ml:{sm:"".concat(220,"px")}}},r.a.createElement(ba.a,null,r.a.createElement(Me.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:h,sx:{mr:2,display:{szpshim:"none"}}},r.a.createElement(ga.a,null)))),r.a.createElement(Ce.a,{component:"nav",sx:{width:{sm:220},flexShrink:{sm:0}},"aria-label":"mailbox folders"},r.a.createElement(Ea.a,{variant:"temporary",open:i,onClose:h,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:220}}},p),r.a.createElement(Ea.a,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:220}},open:!0},p)),r.a.createElement(Ce.a,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(220,"px)")}}},r.a.createElement(ba.a,null),function(){switch(a){case"shift":return r.a.createElement($n,null);case"attendance":return r.a.createElement(sr,null);case"calendar":return r.a.createElement(pn,{setOpenState:c});case"task":return r.a.createElement(Va,null);case"notification":return r.a.createElement(hr,null);case"setting":return r.a.createElement(Or,null)}}()))},[a])},kr=a(1137),Cr=a(1138),Sr=a(1150),_r=a(303),Lr=a.n(_r),Dr=a(408),Ir=a.n(Dr),Nr=a(407),Pr=a.n(Nr),Fr=function(){var e=Object(n.useState)(new Date),t=Object(s.a)(e,2),a=t[0],c=t[1],o=function(){c(new Date)};return Object(n.useEffect)(function(){setInterval(o,1e3)},[]),r.a.createElement("div",null,r.a.createElement(Ue.a,{variant:"h1",component:"div",gutterBottom:!0},a.toLocaleTimeString()))},Mr=a(110),Tr=a(403),Br=a.n(Tr),Ar={width:"100%",height:"300px"},Gr={strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,clickable:!1,draggable:!1,editable:!1,visible:!0,radius:3e4},zr=function(e){var t=e.officePosition,a=e.myPosition;return r.a.createElement(Mr.c,{googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).GOOGLE_MAP_API},r.a.createElement(Mr.b,{mapContainerStyle:Ar,center:a,zoom:18},r.a.createElement(Mr.d,{position:a,zIndex:2}),r.a.createElement(Mr.d,{position:t,icon:{url:Br.a,scale:.05}}),r.a.createElement(Mr.a,{center:a,radius:30,options:Gr})))},Wr=function(e){e.checkDistance;var t=e.officePosition,a=e.style,c=e.buttonState,o=e.setButtonState,l=Object(n.useState)(!1),u=Object(s.a)(l,2),d=u[0],f=u[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),p=h[0],g=h[1],b=(Object(n.useContext)(Ee),{enableHightAccuracy:!0,timeout:1e4}),v=Object(i.a)({},a,{backgroundColor:c.at?"":"green",color:c.at?"gray":"white"}),y=function(e){var a,n=e.coords,c={lat:n.latitude,lng:n.longitude};console.log("success"),(a={attendance_time:e.timestamp/1e3},m.a.post(N,{timestamps:a}).then(function(e){return e}).catch(function(e){return console.log(e)})).then(function(e){var a=r.a.createElement("div",null,r.a.createElement(zr,{officePosition:t,myPosition:c}),r.a.createElement("h1",{style:{color:"green"}},"\u51fa\u3000\u52e4"),r.a.createElement("h5",null,e.name),r.a.createElement("p",null,"\u672c\u65e5\u3082\u4e00\u65e5\u9811\u5f35\u308a\u307e\u3057\u3087\u3046\uff01"));g(a)}).catch(function(e){return console.log(e.message)})},O=function(e){e.code,console.error("".concat(e.code,": ").concat(e.message))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:v,className:"stampingButton",onClick:function(e){return o(Object(i.a)({},c,{at:!0})),navigator.geolocation.getCurrentPosition(y,O,b),void f(!0)},disabled:c.at},"\u51fa\u3000\u52e4"),r.a.createElement(Mn,{open:d,setOpen:f,content:p}))},Rr=function(e){e.checkDistance;var t=e.officePosition,a=e.style,c=e.buttonState,o=e.setButtonState,l=Object(n.useState)(!1),u=Object(s.a)(l,2),d=u[0],f=u[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),p=h[0],g=h[1],b=Object(n.useContext)(Ee),v={enableHightAccuracy:!0,timeout:1e4},y=Object(i.a)({},a,{backgroundColor:c.lv?"":"orange",color:c.lv?"gray":"white"}),O=function(e){var a,n=e.coords,c={lat:n.latitude,lng:n.longitude,zIndex:1};(a={leaving_time:e.timestamp/1e3},m.a.patch(N,{timestamps:a}).then(function(e){return e}).catch(function(e){return console.log(e)})).then(function(e){var a=r.a.createElement("div",null,r.a.createElement(zr,{officePosition:t,myPosition:c}),r.a.createElement("h1",{style:{color:"orange"}},"\u9000\u3000\u52e4"),r.a.createElement("h5",null,e.name),r.a.createElement("p",null,"\u672c\u65e5\u3082\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\u3002"));g(a)}).catch(function(e){return console.log(e.message)})},j=function(e){console.error("".concat(e.code,": ").concat(e.message))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:y,className:"stampingButton",onClick:function(e){window.navigator.onLine?(o(Object(i.a)({},c,{lv:!0})),navigator.geolocation.getCurrentPosition(O,j,v),f(!0)):b.setSnackBar({open:!0,variant:"error",content:"\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093"})},disabled:c.lv},"\u9000\u3000\u52e4"),r.a.createElement(Mn,{open:d,setOpen:f,content:p}))},Hr={width:200,display:"inline-block",height:100,lineHeight:"100px",fontSize:40,fontFamily:"Roboto Helvetica Arial sans-serif",color:"white",borderRadius:5,margin:30,opacity:.8,cursor:"pointer",transitionDuration:".2s"},Vr={position:"absolute",top:"50%",left:"50%",width:"100%",textAlign:"center",transform:"translate(-50%, -50%)"},qr=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({at:!0,lv:!0}),l=Object(s.a)(o,2),i=l[0],u=l[1],d=Object(n.useContext)(xe),f=function(e){!function(e,t,a,n){var r=function(e){return e*(Math.PI/180)},c=(e=r(e),a=r(a),t=r(t),n=r(n),Math.abs(e-a)),o=Math.abs(t-n),l=6378137,i=(e+a)/2,s=Math.sqrt((Math.pow(l,2)-Math.pow(6356775,2))/Math.pow(l,2)),u=Math.sqrt(1-Math.pow(s,2)*Math.pow(Math.sin(i),2)),m=l*(1-Math.pow(s,2))/Math.pow(u,3),d=l/Math.sqrt(u);Math.sqrt(Math.pow(c*m,2)+Math.pow(o*d*Math.cos(i),2))}(a.lat,a.lng,e.lat,e.lng);return d.params.stampable_distance,!1};return Object(n.useEffect)(function(){m.a.get(y).then(function(e){return e}).catch(function(e){return console.log(e)}).then(function(e){c(e.data.positions),u(e.data.status)})},[]),r.a.createElement(Ce.a,{style:Vr},r.a.createElement(Fr,null),r.a.createElement(Wr,{checkDistance:f,officePosition:a,buttonState:i,setButtonState:u,style:Hr}),r.a.createElement(Rr,{checkDistance:f,officePosition:a,buttonState:i,setButtonState:u,style:Hr}),console.log(i))},Ur=function(e){var t=e.param,a=Object(n.useMemo)(function(){return Object(je.a)(Array(25).keys())},[]),c=Object(n.useMemo)(function(){return Object(je.a)(Array(60).keys())},[]),o=new Date(1e3*t.attendance_time),l=new Date(1e3*t.leaving_time),u={id:t.id,at_hour:o.getHours(),at_minute:o.getMinutes(),lv_hour:l.getHours(),lv_minute:l.getMinutes(),rest_time:t.rest_time||60,comment:""},d=Object(n.useState)(u),f=Object(s.a)(d,2),E=f[0],h=f[1],p=Object(n.useContext)(Ee),g=Object(n.useState)(!1),b=Object(s.a)(g,2),v=b[0],y=b[1],O=function(e){if(console.log(E),60*E.at_hour+E.at_minute>60*E.lv_hour+E.lv_minute)return alert("\u5165\u529b\u3055\u308c\u305f\u5024\u304c\u9069\u5207\u3067\u306f\u3042\u308a\u307e\u305b\u3093");y(!0),e.preventDefault();var a,n={id:E.id,updated_attendance_time:Date.parse("".concat(t.date," ").concat(E.at_hour,":").concat(E.at_minute,":00"))/1e3,updated_leaving_time:Date.parse("".concat(t.date," ").concat(E.lv_hour,":").concat(E.lv_minute,":00"))/1e3,updated_rest_time:E.rest_time,comment:E.comment};(a=n,m.a.patch(F,{timestamps:a}).then(function(e){return e}).catch(function(e){return console.log(e)})).then(function(t){if(200!==t.status)return!1;e.target.classList.add("Mui-disabled"),y(!1),p.setSnackBar({variant:"success",content:"\u7533\u8acb\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f",open:!0})})},j=function(e){h(Object(i.a)({},E,Object(Oe.a)({},e.target.name,e.target.value)))};return console.log(E),r.a.createElement(Jt.a,{sx:{p:1,my:2}},r.a.createElement(Ue.a,{varinat:"h3"},t.date),r.a.createElement(ue.a,{sx:{my:2},direction:"row",spacing:1,alignItems:"center"},r.a.createElement("span",null,"\u51fa"),r.a.createElement(Le.a,{sx:{m:1,width:35},variant:"standard"},r.a.createElement(De.a,null,"\u6642"),r.a.createElement(yr.a,{value:E.at_hour,label:"\u6642",name:"at_hour",onChange:function(e){return j(e)}},a.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(Le.a,{sx:{m:1,width:35},variant:"standard"},r.a.createElement(De.a,null,"\u5206"),r.a.createElement(yr.a,{value:E.at_minute,label:"\u5206",name:"at_minute",onChange:function(e){return j(e)}},c.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",null),r.a.createElement("span",null,"\u9000"),r.a.createElement(Le.a,{sx:{m:1,width:35},variant:"standard"},r.a.createElement(De.a,{id:"demo-simple-select-label"},"\u6642"),r.a.createElement(yr.a,{value:E.lv_hour,label:"\u6642",name:"lv_hour",onChange:function(e){return j(e)}},a.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(Le.a,{sx:{m:1,width:35},variant:"standard"},r.a.createElement(De.a,null,"\u5206"),r.a.createElement(yr.a,{value:E.lv_minute,label:"\u5206",name:"lv_minute",onChange:function(e){return j(e)}},c.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",null,r.a.createElement("span",null,"\u4f11"),r.a.createElement(Se.a,{sx:{width:50},value:E.rest_time,name:"rest_time",onChange:function(e){return j(e)}}))),r.a.createElement(Se.a,{fullWidth:!0,sx:{my:1},name:"comment",onChange:function(e){return j(e)},placeholder:"\u5099\u8003\u6b04",multiline:!0,rows:2}),r.a.createElement(le.a,{fullWidth:!0,variant:"contained",color:"success",onClick:function(e){return O(e)},endIcon:v?r.a.createElement(Te.a,{size:"1.5rem",color:"inherit"}):""},"\u7533\u3000\u8acb"))},Kr=function(e){var t=e.params,a=e.open,n=e.setOpen,c=r.a.createElement(ht.a,null,t.map(function(e){return r.a.createElement(Ur,{key:e.id,param:e})}));return r.a.createElement(Mn,{open:a,setOpen:n,content:c})},Yr=a(1167),Jr=a(1168),$r=a(1169),Zr=a(1170),Qr=a(1166),Xr=a(1171),ec=function(e){var t=e.list,a=e.handleCheck,c=e.checked,o=Object(n.useState)(!1),l=Object(s.a)(o,2),i=l[0],u=l[1],m=Object(n.useMemo)(function(){return function(e){var t={workDate:0,totalWorkTime:0,over_time:0,midnight_time:0,midnight_over_time:0};if(!e.length)return t;var a=function(t){return e.reduce(function(e,a){return e+a[t]},0)};return t={workDate:e.length,totalWorkingTime:a("working_time"),overtime:a("overtime"),midnight_time:a("midnight_time"),midnight_overtime:a("midnight_overtime")}}(t)},[t]);console.log(t);var d=r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{sx:{my:2},spacing:2,direction:"row",alignItems:"center",divider:r.a.createElement(ft.a,{orientation:"vertical",flexItem:!0})},r.a.createElement(Ue.a,{variant:"h6"},"\u7dcf\u52b4\u50cd\u6642\u9593 ",r.a.createElement("br",null),er(m.totalWorkingTime,"full")),r.a.createElement(Ue.a,{variant:"h6"},"\u51fa\u52e4\u65e5\u6570 ",r.a.createElement("br",null),m.workDate," \u65e5")),r.a.createElement(tr,{params:m}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",margin:"40px 0"}},r.a.createElement(Yr.a,{sx:{py:2},component:Jt.a},r.a.createElement(Jr.a,null,r.a.createElement($r.a,null,r.a.createElement(Zr.a,null,r.a.createElement(Qr.a,null),r.a.createElement(Qr.a,{align:"right"},"\u65e5"),r.a.createElement(Qr.a,{align:"right"},"\u51fa"),r.a.createElement(Qr.a,{align:"right"},"\u9000"),r.a.createElement(Qr.a,{align:"right"},"\u4f11"),r.a.createElement(Qr.a,null))),r.a.createElement(Xr.a,null,t.map(function(e,t){return r.a.createElement(Zr.a,{key:t,style:te},r.a.createElement(Qr.a,{sx:{padding:0},align:"center"},r.a.createElement(cr.a,null,r.a.createElement(nn.a,{control:r.a.createElement(or.a,{checked:!!c.find(function(t){return t.id===e.id}),id:e.id.toString(),onChange:function(e){return a(e)},disabled:e.confirmed})}))),r.a.createElement(Qr.a,{sx:{padding:0},align:"center"},e.date.slice(-2),"\u65e5"),r.a.createElement(Qr.a,{align:"right"},r.a.createElement("div",null,r.a.createElement(Ue.a,{variant:"subtitle1",style:{color:"red"}},_t(e.updated_attendance_time,"(\u7533)")),r.a.createElement(Ue.a,{variant:"subtitle1"},_t(e.attendance_time)))),r.a.createElement(Qr.a,{align:"right"},r.a.createElement("div",null,r.a.createElement(Ue.a,{variant:"subtitle1",style:{color:"red"}},_t(e.updated_leaving_time,"(\u7533)")),r.a.createElement(Ue.a,{variant:"subtitle1"},_t(e.leaving_time)))),r.a.createElement(Qr.a,{align:"right"},r.a.createElement("div",null,r.a.createElement(Ue.a,{variant:"subtitle1",style:{color:"red"}},e.updated_rest_time),r.a.createElement(Ue.a,{variant:"subtitle1"},e.rest_time))),r.a.createElement(Qr.a,null,r.a.createElement(nr,{params:e})))}))))),r.a.createElement(le.a,{sx:{marginBottom:"100px"},fullWidth:!0,color:"primary",variant:"contained",onClick:function(){return u(!0)}},"\u6708\u3054\u3068\u96c6\u8a08"),r.a.createElement(Mn,{open:i,setOpen:u,content:d}))},tc=function(e){var t=e.list,a=e.setList,c=Object(n.useState)((new Date).getMonth()+1),o=Object(s.a)(c,2),l=o[0],i=o[1],u=function(e,t){var a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)(function(){var a=e.filter(function(e){return new Date(Date.parse(e.date)).getMonth()+1===t});a.sort(function(e,t){return e.date-t.date}),o(a)},[t]),c}(t,l);Object(n.useEffect)(function(){a(u)},[u]);var m=function(e){switch(e){case"ahead":return i(l+1);case"back":return i(l-1)}};return r.a.createElement(ue.a,{direction:"row",alignItems:"center"},r.a.createElement(Me.a,{onClick:function(){return m("back")}},r.a.createElement(Cn.a,null)),r.a.createElement(Ue.a,{variant:"h6"},l,"\u6708"),r.a.createElement(Me.a,{onClick:function(){return m("ahead")}},r.a.createElement(_n.a,null)))},ac=function(e){var t=e.setSbParams,a=Object(n.useState)(!1),c=Object(s.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(),u=Object(s.a)(i,2),d=u[0],f=u[1],E=Object(n.useState)([]),h=Object(s.a)(E,2),p=h[0],b=h[1],v=Object(n.useReducer)(Qn,Zn),y=Object(s.a)(v,2),O=y[0],j=y[1];return Object(n.useEffect)(function(){j({type:"FETCHING"});try{m.a.get(g).then(function(e){return e}).catch(function(e){return console.log(e)}).then(function(e){console.log(e.data.attendances),j({type:"FETCH_END",payload:e.data.attendances}),f(e.data.attendances)})}catch(e){console.log(e.message)}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{sx:{p:2,height:400}},r.a.createElement(ue.a,{my:4,direction:"row",alignItems:"center"},r.a.createElement(tc,{list:O.attendanceData,setList:f})),d?r.a.createElement(Ce.a,{sx:{margin:"0 auto",maxWidth:600}},r.a.createElement(le.a,{size:"large",variant:"contained",color:"success",fullWidth:!0,disabled:0==p.length,onClick:function(){return l(!0)}},"\u3000\u3000\u3000\u7533\u8acb\u753b\u9762\u3078\u3000\u3000\u3000"),r.a.createElement(ec,{state:O.fetchState,list:d,checked:p,handleCheck:function(e){var t=e.target.id,a=O.attendanceData.find(function(e){return e.id==t});if(e.target.checked)b([].concat(Object(je.a)(p),[a]));else{var n=p.filter(function(e){return e.id!=t});b(n)}}})):r.a.createElement(Et.a,{height:"100%",variant:"rectangle"}),r.a.createElement(Kr,{open:o,setOpen:l,params:p,setSbParams:t})))},nc={fetchState:K,shiftList:[],orgParams:{open:9,close:18,name:"",address:""}},rc=function(e,t){switch(t.type){case"FETCHING":return Object(i.a)({},e,{fechState:Y});case"FETCH_END":return{fetchState:$,shiftList:(a=t.payload.myshifts,a.map(function(e){return{title:"".concat(e.attendance_time,"-").concat(e.leaving_time),start:e.date,description:e.comment,backgroundColor:e.confirmed?"green":"gray"}})),wholeShift:t.payload.shifts,orgParams:t.payload.orgParams};default:throw new Error}var a},cc=a(405),oc=a.n(cc),lc=a(406),ic=a.n(lc),sc=a(404),uc=a.n(sc),mc=a(302),dc=a.n(mc),fc=function(e){var t=e.elm,a=e.times,c=e.list,o=e.setList,l=c.slice(),u=Object(n.useState)(c.find(function(e){return e.date==t.date})),m=Object(s.a)(u,2),d=m[0],f=m[1],E=Object(n.useState)(!0),h=Object(s.a)(E,2),p=h[0],g=h[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),y=v[0],O=v[1],j=Object(n.useState)(),w=Object(s.a)(j,2),x=w[0],k=w[1],C=function(e){console.log(c);var t=e.target.value;f(Object(i.a)({},d,Object(Oe.a)({},e.target.name,t))),o(l),console.log(c)},S=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le.a,{sx:{minWidth:80}},r.a.createElement(De.a,null,"\u51fa"),r.a.createElement(Ie.a,{required:!0,disabled:d.rest,name:"attendance_time",label:"\u51fa\u52e4",value:d.attendance_time,onChange:function(e){return C(e)}},a.map(function(e,t){return r.a.createElement(Ne.a,{key:t,value:e},e)}))),r.a.createElement(Le.a,{sx:{minWidth:80}},r.a.createElement(De.a,{id:"demo-select-small"},"\u9000"),r.a.createElement(Ie.a,{disabled:d.rest,sx:{backgroundColor:d.rest?"gray":""},value:d.leaving_time,name:"leaving_time",label:"\u9000\u52e4",onChange:function(e){return C(e)}},a.map(function(e,t){return r.a.createElement(Ne.a,{key:t,value:e},e)}))))},_=r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{fullWidth:!0,name:"comment",multiline:!0,rows:3,value:x,defaultValue:"\u5099\u8003",onChange:function(e){return k(e.target.value)},onBlur:function(){d.comment=x}}));return Object(n.useMemo)(function(){return r.a.createElement(r.a.Fragment,null,St(new Date(d.date),"/")+"(".concat(Q[new Date(d.date).getDay()],")"),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(ue.a,{direction:"row",spacing:1},p?r.a.createElement(S,null):r.a.createElement(or.a,{label:"\u51fa\u52e4",icon:r.a.createElement(r.a.Fragment,null,"\u51fa\u52e4"),onChange:function(){return g(!0)}}),r.a.createElement(or.a,{label:"\u4f11",name:"rest",checked:d.rest,icon:r.a.createElement(r.a.Fragment,null,"\u4f11 ",r.a.createElement(dc.a,null)),checkedIcon:r.a.createElement(dc.a,{style:{display:"block",height:"2rem",width:"2rem"},color:"error"}),onChange:function(e){!function(e){f(Object(i.a)({},d,{rest:e.target.checked})),o(l)}(e)}}),r.a.createElement(Me.a,{onClick:function(){return O(!0)}},r.a.createElement(Nn.a,{color:d.comment&&"primary"}))),r.a.createElement(Mn,{open:y,setOpen:O,content:_})))},[d])},Ec={zIndex:100,backgroundColor:"white",width:"100%",height:"100%",position:"absolute",top:0},hc={position:"fixed",bottom:30,left:20,zIndex:200},pc=function(e){var t=e.times,a=e.list,c=e.setList,o=Object(n.useState)(!1),l=Object(s.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)(!1),f=Object(s.a)(d,2),E=f[0],h=f[1],p=Object(n.useContext)(Ee),g=function(e){if(e.preventDefault(),!window.confirm("\u30b7\u30d5\u30c8\u3092\u63d0\u51fa\u3057\u307e\u3059\u304b\uff1f"))return!1;var t;(t=a,m.a.post(I,{shifts:t}).then(function(e){return e}).catch(function(e){return e})).then(function(e){201===e.status&&(u(!1),h(!1),p.setSnackBar({open:!0,variant:"success",content:"\u30b7\u30d5\u30c8\u3092\u63d0\u51fa\u3057\u307e\u3057\u305f\u3002"}))})},b=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{style:Ec},a.length>0?r.a.createElement("form",{onSubmit:function(e){return g(e)}},r.a.createElement(ce.a,{style:{height:450,overflow:"scroll"}},a.map(function(e,n){return r.a.createElement("div",{key:n},r.a.createElement(st.a,{sx:{height:60}},r.a.createElement(fc,{elm:e,times:t,list:a,setList:c})),r.a.createElement(ft.a,null))})),r.a.createElement(le.a,{fullWidth:!0,type:"submit",color:"success",variant:"contained",margin:"normal",endIcon:E&&r.a.createElement(Te.a,null),onClick:function(e){g(e)}},"\u63d0\u3000\u51fa")):r.a.createElement(Ue.a,{variant:"h5"},"\u73fe\u5728\u63d0\u51fa\u53ef\u80fd\u306a\u30b7\u30d5\u30c8\u306f\u3042\u308a\u307e\u305b\u3093")),r.a.createElement(fn.a,{style:hc,onClick:function(){return u(!i)},size:"medium",label:"\u623b\u308b",variant:"outlied"}))};return Object(n.useEffect)(function(){m.a.get(D).then(function(e){return e}).catch(function(e){return e}).then(function(e){c(e.data.shifts)})},[]),Object(n.useMemo)(function(){return r.a.createElement(r.a.Fragment,null,i?r.a.createElement(b,null):r.a.createElement(fn.a,{sx:hc,onClick:function(){return u(!i)},size:"medium",label:"\u65b0\u898f\u63d0\u51fa",color:"secondary",variant:"contained",icon:r.a.createElement(Bn.a,null)}))},[i])},gc="",bc=new Date,vc=function(){var e=Object(n.useContext)(xe),t=X(e.params.open,e.params.close),a=Object(n.useState)(!1),c=Object(s.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),m=u[0],d=u[1],f=Object(n.useState)([]),E=Object(s.a)(f,2),h=E[0],p=E[1],g=Object(n.useReducer)(rc,nc),b=Object(s.a)(g,2),v=b[0],y=b[1],O=(Object(n.useContext)(Ee),Object(n.useState)([bc.getFullYear(),bc.getMonth()])),j=Object(s.a)(O,2),w=j[0];j[1];return Object(n.useEffect)(function(){y({type:"FETCHING"}),wt(w).then(function(e){y({type:"FETCH_END",payload:e.data})})},[w]),r.a.createElement(r.a.Fragment,null,v.fetchState===$?r.a.createElement(Ce.a,null,r.a.createElement(ue.a,{direction:"row",justifyContent:"flex-end"},r.a.createElement(Ue.a,{variant:"subtitle1"},"\u30b7\u30d5\u30c8\u53cd\u6620"),r.a.createElement(aa.a,{checked:m,onChange:function(){return d(!m)}})),r.a.createElement(qa.a,{aspectRatio:1,plugins:[Ua.b,Ka.a,Ya.a],headerToolbar:{center:"dayGridMonth"},initialView:"dayGridMonth",locale:"ja",events:m?[].concat(Object(je.a)(sn(v.wholeShift,t)),Object(je.a)(v.shiftList)):v.shiftList,eventClick:function(e){gc=r.a.createElement(ue.a,{spacing:2},r.a.createElement(Ue.a,{variant:"h5"},St(e.event.start,"/")),r.a.createElement(Ue.a,{variant:"h5"},e.event.title),r.a.createElement(Ue.a,{variant:"text"},"\u5099\u8003\uff1a ",e.event.extendedProps.description),r.a.createElement(ue.a,{direction:"row",justifyContent:"end"},"green"==e.event.backgroundColor?r.a.createElement(fn.a,{variant:"filled",color:"success",label:"\u627f\u8a8d"}):r.a.createElement(fn.a,{variant:"outlined",label:"\u672a\u627f\u8a8d"})),r.a.createElement(ft.a,null),r.a.createElement(Ue.a,{variant:"text"},r.a.createElement(uc.a,null),"\uff1a",v.orgParams.name),r.a.createElement(Ue.a,{variant:"text"},r.a.createElement(oc.a,null),"\uff1a",v.orgParams.address),r.a.createElement(Ue.a,{variant:"h5"},r.a.createElement(ic.a,null),"\uff1a090-9999-9999")),l(!0)}}),r.a.createElement(pc,{times:function(){for(var e=[],t=v.orgParams.open;t<=v.orgParams.close-1;t++)for(var a=0;a<60;a+=30)e.push("".concat(t,":").concat(("0"+a).slice(-2)));return e}(),list:h,setList:p}),r.a.createElement(Mn,{open:o,setOpen:l,content:gc})):r.a.createElement(Ze,null))},yc=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(Ee);return Object(n.useEffect)(function(){m.a.get(x).then(function(e){return e}).catch(function(e){return console.log(e)}).then(function(e){c(e.data)})},[]),r.a.createElement(Jt.a,{sx:Object(i.a)({margin:"0 auto",maxWidth:500,p:1},te)},a&&r.a.createElement(ot,{sendParams:function(e){try{Ht(e).then(function(t){if(200===t.status&&(o.setSnackBar({open:!0,variant:"success",content:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3057\u305f\u3002"}),e.image)){var a=Object(qt.a)()||e.imageUrl;Vt(e.image[0],a,o)}})}catch(t){console.log(t.message)}},requestStatus:"OK",profile:a}))},Oc={position:"fixed",bottom:20,right:20,zIndex:200,marginTop:30},jc=function(){var e=Object(n.useState)("shift"),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(nt).state.chief?[{icon:r.a.createElement(la.a,null),name:"back",value:"\u7ba1\u7406\u753b\u9762\u3078"},{icon:r.a.createElement(gr.a,null),name:"profile",value:"\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a"},{icon:r.a.createElement(xa.a,null),name:"timestamp",value:"\u6253\u523b\u753b\u9762"},{icon:r.a.createElement(Lr.a,null),name:"attendance",value:"\u6253\u523b\u5c65\u6b74"},{icon:r.a.createElement(ya.a,null),name:"chat",value:"\u30c1\u30e3\u30c3\u30c8"}]:[{icon:r.a.createElement(Pr.a,null),name:"logout",value:"\u30ed\u30b0\u30a2\u30a6\u30c8"},{icon:r.a.createElement(gr.a,null),name:"profile",value:"\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a"},{icon:r.a.createElement(xa.a,null),name:"timestamp",value:"\u6253\u523b\u753b\u9762"},{icon:r.a.createElement(Lr.a,null),name:"attendance",value:"\u6253\u523b\u5c65\u6b74"},{icon:r.a.createElement(ja.a,null),name:"shift",value:"\u30b7\u30d5\u30c8"},{icon:r.a.createElement(ya.a,null),name:"chat",value:"\u30c1\u30e3\u30c3\u30c8"}],l=function(){switch(a){case"logout":return r.a.createElement(qe.a,{to:"/login"});case"chat":return r.a.createElement(qe.a,{to:"/chat"});case"shift":return r.a.createElement(vc,null);case"attendance":return r.a.createElement(ac,{setOpenState:c});case"timestamp":return r.a.createElement(qr,null);case"notification":return r.a.createElement(hr,null);case"profile":return r.a.createElement(yc,null);case"back":return r.a.createElement(qe.a,{to:"/Dashboard"})}};return Object(n.useMemo)(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l,null),r.a.createElement(Ce.a,{sx:Oc},r.a.createElement(kr.a,{ariaLabel:"SpeedDial openIcon example",icon:r.a.createElement(Cr.a,{openIcon:r.a.createElement(Ir.a,null)})},o.map(function(e){return r.a.createElement(Sr.a,{onClick:function(){c(e.name)},key:e.name,icon:e.icon,tooltipTitle:e.value})}))))},[a])},wc=function(){var e=Object(we.a)(),t=e.register,a=e.handleSubmit,c=e.formState.errors,o=Object(n.useContext)(nt),l=Object(n.useState)(!1),i=Object(s.a)(l,2),u=i[0],m=i[1];return r.a.createElement(r.a.Fragment,null,o.state.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(Da.a,{sx:{p:4,maxWidth:500,margin:"auto"},container:!0,direction:"column",alignItems:"center"},r.a.createElement(Ue.a,{sx:{my:4},component:"div",variant:"h5"},r.a.createElement(V.b,{to:o.state.chief?"/Dashboard":"/employeeDashboard"},r.a.createElement(Ue.a,{variant:"h6"},o.state.name,"\u3067\u30ed\u30b0\u30a4\u30f3\u4e2d\u3067\u3059"))),r.a.createElement(Da.a,{item:!0},r.a.createElement(le.a,{color:"error",variant:"contained",onClick:o.logout},"\u30ed\u30b0\u30a2\u30a6\u30c8")))):r.a.createElement("form",{onSubmit:a(o.login)},r.a.createElement(Da.a,{sx:{p:4,maxWidth:500,margin:"auto"},container:!0,direction:"column",alignItems:"center"},r.a.createElement(Da.a,{item:!0},r.a.createElement(Se.a,Object.assign({margin:"normal",label:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",defaultValue:"sample@user0.com"},t("email",{required:"\u203b\u7a7a\u767d\u306b\u306f\u3067\u304d\u307e\u305b\u3093"})))),r.a.createElement("span",{style:{color:"red"}},c.email&&c.email.message),r.a.createElement(Da.a,{item:!0},r.a.createElement(Se.a,Object.assign({margin:"normal",label:"\u30d1\u30b9\u30ef\u30fc\u30c9",defaultValue:"password"},t("password",{required:"\u203b\u7a7a\u767d\u306b\u306f\u3067\u304d\u307e\u305b\u3093"})))),r.a.createElement("span",{style:{color:"red"}},c.password&&c.password.message),r.a.createElement(Da.a,{item:!0},r.a.createElement(le.a,{type:"submit",color:"success",variant:"contained",size:"large",fullWidth:!0,onClick:function(){return m(!0)},endIcon:u?r.a.createElement(Te.a,{size:"1.5rem",color:"inherit"}):""},"\u30ed\u30b0\u30a4\u30f3")))))},xc=function(e){var t=e.empParams,a=new window.google.maps.Geocoder,c=Object(n.useState)(!1),o=Object(s.a)(c,2),l=(o[0],o[1],Object(n.useState)({lat:35.6815171,lng:139.7567439})),u=Object(s.a)(l,2),d=u[0],f=u[1],E=Object(we.a)(),h=E.register,p=E.handleSubmit,g=E.formState.errors;return r.a.createElement(Ce.a,null,r.a.createElement("form",{onSubmit:p(function(e){(function(e){return m.a.post(_,{organizations:e}).then(function(e){return e}).catch(function(e){throw e})})({orgParams:Object(i.a)({},e,{lat:d.lat,lng:d.lng}),empParams:t}).then(function(e){return console.log(e)})})},r.a.createElement(ue.a,{sx:{width:500,margin:"32px auto",maxwidth:"80%"},spacing:1,justifyContent:"center"},r.a.createElement(Se.a,Object.assign({},h("name",{required:"\u203b\u7d44\u7e54\u540d\u304c\u5165\u529b\u3055\u308c\u3066\u307e\u305b\u3093",maxLength:{value:24,message:"\u6700\u5927\u6587\u5b57\u6570(24\u6587\u5b57)\u3092\u8d8a\u3048\u3066\u3044\u307e\u3059\u3002"}}),{label:"\u7d44\u7e54\u540d",required:!0})),r.a.createElement("span",{style:{color:"red"}},g.name&&g.name.message),r.a.createElement(Se.a,Object.assign({},h("address",{required:"no address"}),{label:"\u6240\u5728\u5730",defaultValue:"\u6771\u4eac",required:!0,onBlur:function(e){return function(e){a.geocode({address:e.target.value},function(e,t){if("OK"==t){var a=e[0].geometry.location;f({lat:a.lat(),lng:a.lng()})}else alert("\u4f4d\u7f6e\u60c5\u5831\u306e\u53d6\u5f97\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")})}(e)}})),r.a.createElement("span",{style:{color:"red"}},g.address&&g.address.message),r.a.createElement(Ce.a,null,r.a.createElement(Ue.a,{variant:"subtitle1"},"\u203b\u55b6\u696d\u6642\u9593\u30fb\u6253\u523b\u53ef\u80fd\u7bc4\u56f2 \u7b49\u306e\u8a73\u7d30\u8a2d\u5b9a\u306f\u7d44\u7e54\u4f5c\u6210\u5f8c\u306b\u7ba1\u7406\u753b\u9762\u304b\u3089\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002")),r.a.createElement(Mr.b,{mapContainerStyle:{height:250},center:{lat:d.lat,lng:d.lng},zoom:14},r.a.createElement(Mr.d,{position:{lat:d.lat,lng:d.lng},zIndex:2})),r.a.createElement(le.a,{variant:"contained",color:"success",type:"submit"},"\u4f5c\u6210"))))},kc=["\u8cac\u4efb\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210","\u7d44\u7e54\u4f5c\u6210","\u5f93\u696d\u54e1\u767b\u9332"],Cc=function(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(s.a)(o,2),i=l[0],u=l[1],m=[r.a.createElement(ot,{sendParams:function(e){u(e),c(1)},requestStatus:$}),r.a.createElement(xc,{empParams:i}),r.a.createElement(ot,null)];return r.a.createElement(Ce.a,null,r.a.createElement(At.a,{activeStep:a,alternativeLabel:!0},kc.map(function(e,t){return r.a.createElement(Gt.a,{key:t},r.a.createElement(zt.a,null,e))})),m[a])},Sc=a(41),_c=a(8),Lc=a(1114),Dc=a(1173),Ic=a(1021),Nc=a(410),Pc=a.n(Nc),Fc=a(409),Mc=a.n(Fc),Tc=a(411),Bc=a.n(Tc),Ac={position:"absolute",top:-20,left:0,color:"#808080"},Gc={position:"absolute",top:10,left:-30,color:"#808080"},zc=Pc()(Mc.a,{name:"ChatMsg"})(function(e){var t=e.classes,a=e.avatar,c=e.message,o=e.roomId,l=e.time,u=e.cancelSend,m=e.side,d=e.GridContainerProps,f=e.GridItemProps,E=e.AvatarProps,h=e.getTypographyProps,p=Object(n.useState)(!1),g=Object(s.a)(p,2),b=g[0],v=g[1];return r.a.createElement(Lc.a,Object.assign({container:!0,spacing:5,style:{justifyContent:"right"===m?"flex-end":"flex-start"}},d),"left"===m&&r.a.createElement(Lc.a,Object.assign({item:!0},f),r.a.createElement(Dc.a,Object.assign({src:a},E,{className:Object(_c.a)(t.avatar,E.className)}))),r.a.createElement(Lc.a,{item:!0,xs:8},[c.content].map(function(a,n){var s,d=h(a,n,e);return r.a.createElement("div",{key:n,className:t["".concat(m,"Row")]},r.a.createElement(Ic.a,Object.assign({align:"left"},d,{className:Object(_c.a)(t.msg,t[m],(s=n,0===s?t["".concat(m,"First")]:s===[c.content].length-1?t["".concat(m,"Last")]:""),d.className),onMouseOver:function(){return v(!0)},onMouseOut:function(){return v(!1)},style:{position:"relative"}}),a,r.a.createElement("span",{style:Ac},l),"right"===m&&r.a.createElement(Me.a,{style:Object(i.a)({},Gc,{display:b?"block":"none"}),onClick:function(){u(o,c.id)}},r.a.createElement(Bc.a,null))))})))});zc.defaultProps={avatar:"",messages:[],side:"left",GridContainerProps:{},GridItemProps:{},AvatarProps:{},getTypographyProps:function(){return{}}};var Wc=zc,Rc=document.documentElement.clientHeight,Hc={margin:"1rem 0",color:"#808080",textAlign:"center"},Vc=function(e){var t=e.messages,a=e.selected,n=e.cancelSend,c=e.tempId,o=(new Date).toString(),l=new Date(0);return r.a.createElement(Ce.a,{id:"chatMessagesBox",sx:{padding:"100px 2rem 0",height:"".concat(Rc-100,"px"),width:"100%",overflow:"scroll"}},t.map(function(e,t){var i=e.employee_id===c?"right":"left",s=new Date(e.created_at),u=new Date(e.date),m="".concat(("00"+s.getHours()).slice(-2)," :").concat(("00"+s.getMinutes()).slice(-2));return o=u>l?Lt(l=u):"",r.a.createElement("div",{key:t},r.a.createElement("h5",{style:Hc},o),r.a.createElement(Wc,{message:e,roomId:a.id,side:i,avatar:a.avatar,time:m,cancelSend:n}))}))},qc=function(e){var t=e.selected,a=e.sendMessage,c=e.width,o=Object(n.useState)(),l=Object(s.a)(o,2),i=l[0],u=l[1];return r.a.createElement(Ce.a,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&(a(t.id,i),u(null),document.getElementById("chatInput").value="")},style:{position:"fixed",bottom:0,width:"calc(100% - ".concat(c,"px")}},r.a.createElement(ue.a,{sx:{py:2},direction:"row",spacing:1,alignItems:"center"},r.a.createElement(Se.a,{id:"chatInput",required:!0,style:{width:"calc(100% - 50px)"},onChange:function(e){u(e.target.value)}}),r.a.createElement(Me.a,{type:"submit",color:"primary",component:"button"},r.a.createElement(Ae.a,null)))))},Uc=function(e,t){return m.a.delete(function(e,t){return"".concat(d,"/rooms/").concat(e,"/messages/").concat(t)}(e,t)).then(function(e){return e}).catch(function(e){throw e})},Kc={fetchState:K,messageList:[]},Yc=function(e,t){switch(console.log(t),t.type){case"FETCHING":return Object(i.a)({},e,{fechState:Y});case"FETCH_END":return{fetchState:$,messageList:t.payload};case"ADD":return{fetchState:$,messageList:[].concat(Object(je.a)(e.messageList),[t.message])};case"REMOVE":return{fetchState:$,messageList:e.messageList.filter(function(e){return e.id!==t.id})};default:throw new Error}},Jc=a(1115),$c=a(412),Zc=a(413),Qc=a.n(Zc),Xc={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,maxWidth:"95%",bgcolor:"white",border:"2px solid #000",boxShadow:24,p:2},eo=function(e){var t=e.setRooms,a=Object(n.useState)(!1),c=Object(s.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],d=u[1],f=Object(n.useContext)(Ee),E=r.a.createElement(Bt,{sendRoomParams:function(e){Mt(e).then(function(e){if(201===!e.status)return!1;t(e.data.rooms),d(!1),l(!1),f.setSnackBar({open:!0,variant:"success",content:"\u65b0\u3057\u3044\u30c1\u30e3\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002"})})},loading:m,setLoading:d});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{onClick:function(){return l(!0)}},r.a.createElement(Qc.a,null)),r.a.createElement(it.a,{open:o,onClose:function(){return l(!1)}},r.a.createElement(ht.a,{sx:Xc},E)))},to=a(414),ao=a.n(to);function no(){no=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function i(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,c=Object.create(r.prototype),o=new w(n||[]);return c._invoke=function(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return k()}for(a.method=r,a.arg=c;;){var o=a.delegate;if(o){var l=y(o,a);if(l){if(l===u)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=s(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}(e,a,o),c}function s(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var u={};function m(){}function d(){}function f(){}var E={};l(E,r,function(){return this});var h=Object.getPrototypeOf,p=h&&h(h(x([])));p&&p!==t&&a.call(p,r)&&(E=p);var g=f.prototype=m.prototype=Object.create(E);function b(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function v(e,t){var n;this._invoke=function(r,c){function o(){return new t(function(n,o){!function n(r,c,o,l){var i=s(e[r],e,c);if("throw"!==i.type){var u=i.arg,m=u.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,o,l)},function(e){n("throw",e,o,l)}):t.resolve(m).then(function(e){u.value=e,o(u)},function(e){return n("throw",e,o,l)})}l(i.arg)}(r,c,n,o)})}return n=n?n.then(o,o):o()}}function y(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,c=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return c.next=c}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=f,l(g,"constructor",f),l(f,"constructor",d),d.displayName=l(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(v.prototype),l(v.prototype,c,function(){return this}),e.AsyncIterator=v,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var o=new v(i(t,a,n,r),c);return e.isGeneratorFunction(a)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(g),l(g,o,"Generator"),l(g,r,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],o=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var l=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(l&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;j(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}var ro={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, 0)",height:400,maxWidth:"95%"},co=window.innerWidth>768?240:0,oo=null,lo=function(){var e=Object(n.useReducer)(Yc,Kc),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(s.a)(o,2),u=l[0],d=l[1],f=Object(n.useState)({id:"",name:"",avatar:""}),E=Object(s.a)(f,2),h=E[0],p=E[1],g=Object(n.useState)(0!==co),b=Object(s.a)(g,2),v=b[0],y=b[1],j=Object(n.useState)(!1),x=Object(s.a)(j,2),k=x[0],C=x[1],S=Object(n.useState)({open:!1,content:""}),_=Object(s.a)(S,2),L=_[0],D=_[1],I=Object(n.useState)(),N=Object(s.a)(I,2),P=N[0],F=N[1],M=Object(n.useState)(""),T=Object(s.a)(M,2),B=T[0],A=T[1],G=Object(n.useContext)(nt),z=Object(qe.g)(),W=bt(a.messageList,"content",B),R=W.length>0?W:a.messageList,H="".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_DOMEIN,":5500"),V=function(e){(function(e){return console.log(e),m.a.get(w(e)).then(function(e){return e}).catch(function(e){throw e})})(e).then(function(t){oo.emit("leave",h.id),p({id:e,name:t.data.companion,avatar:t.data.avatar}),oo.emit("join",e),c({type:"FETCH_END",payload:t.data.messages})})},q=function(e){z.push(e)};return Object(n.useEffect)(function(){return Object(Sc.a)(no().mark(function e(){return no().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:oo=Object($c.io)(H),console.log("Chat : useEffect()"),oo.on("connection",function(){console.log("start connection. socket.id="+oo.id)}),oo.on("RECIEVE_MESSAGE",function(e){D({open:!0,content:e.content}),console.log(L),c({type:"ADD",message:e})}),oo.on("REMOVE_MESSAGE",function(e){c({type:"REMOVE",id:e})});case 5:case"end":return e.stop()}},e)}))(),m.a.get(O).then(function(e){return e}).catch(function(e){throw e}).then(function(e){d(e.data.rooms),F(e.data.tempId)}),function(){F("")}},[]),r.a.createElement(Ce.a,null,r.a.createElement(da.a,{position:"fixed",style:{paddingLeft:"calc(".concat(co,"px + 16px)")}},r.a.createElement(ue.a,null,r.a.createElement(ue.a,{direction:"row",alignItems:"center",justifyContent:"space-between"},r.a.createElement("h4",null,h.name),r.a.createElement("div",null,r.a.createElement(Jc.a,{control:r.a.createElement(aa.a,{onChange:function(){return y(!v)},checked:v,color:"default"}),label:"",labelPlacement:"start"}),r.a.createElement(Me.a,{onClick:function(){return C(!k)}},r.a.createElement(ao.a,{sx:{marginLeft:"1rem",color:"white"}})))),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),0==W.length&&alert("\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f")}(e)}},r.a.createElement(Se.a,{sx:{my:2,display:k?"":"none"},style:{backgroundColor:"white"},variant:"standard",fullWidth:!0,placeholder:"\u691c\u7d22",onChange:function(e){return A(e.target.value)}})))),r.a.createElement(Ea.a,{sx:{width:co,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:v},r.a.createElement("ul",{id:"messages"}),r.a.createElement(ce.a,{sx:{width:"100%",height:"100%",bgcolor:"background.paper"}},"\u3000",G.state.chief?r.a.createElement(st.a,null,r.a.createElement(eo,{setRooms:d})):"",u.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(st.a,{button:!0,onClick:function(){return V(e.id)}},r.a.createElement(mt.a,null,r.a.createElement(La.a,{color:"error",badgeContent:e.read}),r.a.createElement(dt.a,{src:e.image||U.a,alt:e.name})),r.a.createElement(oe.a,{primary:e.name})),r.a.createElement(ft.a,{variant:"inset",component:"li"}))}),r.a.createElement(st.a,{style:{position:"absolute",bottom:10}},G.state.chief?r.a.createElement(le.a,{fullWidth:!0,color:"success",variant:"outlined",onClick:function(){q("/Dashboard")}},"\u7ba1\u7406\u753b\u9762\u3078"):r.a.createElement(le.a,{fullWidth:!0,color:"success",variant:"outlined",onClick:function(){q("/employeeDashboard")}},"\u30e1\u30cb\u30e5\u30fc\u753b\u9762\u3078")))),r.a.createElement(Ce.a,{style:{width:"calc(100% - ".concat(co,"px)"),marginLeft:"".concat(co,"px")}},h.id?r.a.createElement(r.a.Fragment,null,a.fetchState==$?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,null,r.a.createElement(Vc,{selected:h,messages:R,setMessage:c,cancelSend:function(e,t){window.confirm("\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u3092\u53d6\u308a\u6d88\u3057\u307e\u3059\u304b\uff1f")&&Uc(e,t).then(function(a){200===a.status&&(c({type:"REMOVE",id:t}),oo.emit("CANCEL_MESSAGE",e,t))})},tempId:P}),r.a.createElement(me.a,{open:L.open,autoHideDuration:4e3,sx:{marginBottom:6},anchorOrigin:{vertical:"bottom",horizontal:"center"},onClose:function(){return D(Object(i.a)({},L,{open:!1}))},onClick:function(){var e=document.getElementById("chatMessagesBox"),t=e.scrollHeight-e.clientHeight;e.scrollTo({top:t,behavior:"smooth"})}},r.a.createElement(de.a,{severity:"secondary"},r.a.createElement(ue.a,{direction:"row",alignItems:"center",spacing:2},r.a.createElement(dt.a,{src:h.avatar||U.a}),r.a.createElement("p",null,"\u300c",L.content.slice(0,20),"\u300d")))),r.a.createElement(qc,{selected:h,sendMessage:function(e,t){(function(e,t){return m.a.post(w(e),{messages:t}).then(function(e){return e}).catch(function(e){throw e})})(e,t).then(function(e){console.log(e),201===e.status&&(oo.emit("SEND_MESSAGE",h.id,e.data.message),c({type:"ADD",message:e.data.message}))}).catch(function(e){return console.log(e)})},width:co}))):r.a.createElement(Te.a,{style:{width:"80px",height:"80px",margin:"180px auto"},color:"inherit"})):r.a.createElement("div",{style:ro},r.a.createElement(ya.a,null),r.a.createElement(Ue.a,{variant:"h5"},"\u30eb\u30fc\u30e0\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4f1a\u8a71\u3092\u59cb\u3081\u307e\u3057\u3087\u3046\uff01"))))},io=a(415),so=a.n(io),uo=a(416),mo=a.n(uo),fo=a(417),Eo=a.n(fo),ho=a(418),po=a.n(ho),go=a(419),bo=a.n(go),vo=a(420),yo=a.n(vo),Oo=a(421),jo=a.n(Oo),wo=a(422),xo=a.n(wo),ko={p:2,height:300,margin:"0 auto",textAlign:"center"},Co={width:"80%",height:"100%"},So={p:2,width:"100%",maxWidth:700,margin:"24px auto"},_o={maxHeight:350,margin:"16px 0"},Lo=[{icon:r.a.createElement("img",{src:Eo.a,style:Co}),title:"\u5f93\u696d\u54e1\u7ba1\u7406",desc:"\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8"},{icon:r.a.createElement("img",{src:yo.a,style:Co}),title:"\u6253\u523b\u7ba1\u7406",desc:"\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8"},{icon:r.a.createElement("img",{src:jo.a,style:Co}),title:"\u30ab\u30ec\u30f3\u30c0\u30fc",desc:"\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8"},{icon:r.a.createElement("img",{src:xo.a,style:Co}),title:"\u500b\u5225\u30c1\u30e3\u30c3\u30c8",desc:"\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8"},{icon:r.a.createElement("img",{src:po.a,style:Co}),title:"\u30b7\u30d5\u30c8\u7ba1\u7406",desc:"\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8"},{icon:r.a.createElement("img",{src:bo.a,style:Co}),title:"\u30af\u30e9\u30a6\u30c9\u7ba1\u7406",desc:"\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8\u8aac\u660e\u30c6\u30ad\u30b9\u30c8"}],Do=function(){return r.a.createElement(ue.a,{sx:{p:2},style:te},r.a.createElement($e,null),r.a.createElement(ue.a,{style:{width:"100%"}},r.a.createElement(ue.a,{alignItems:"center"},r.a.createElement(V.b,{to:"/signup"},r.a.createElement(le.a,{sx:{width:370,margin:"24px auto"},variant:"contained",color:"primary",size:"large"},"\u59cb\u3081\u308b >>")))),r.a.createElement(ht.a,null,r.a.createElement(Da.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center"},Lo.map(function(e,t){return r.a.createElement(Da.a,{key:t,item:!0,xs:10,sm:6,md:4},r.a.createElement(Jt.a,{sx:ko},r.a.createElement(Ue.a,{style:ee,variant:"h5"},e.title),r.a.createElement("div",{style:{height:200}},e.icon),r.a.createElement(Ue.a,{variant:"subtitle1"},e.desc)))}))),r.a.createElement(ue.a,{sx:{my:4}},r.a.createElement(Jt.a,{sx:So},r.a.createElement(ue.a,{spacing:2},r.a.createElement("img",{style:_o,src:so.a}),r.a.createElement(Ue.a,{variant:"subtitle1"},"\u30af\u30e9\u30a6\u30c9\u3092\u901a\u3057\u3066\u3001\u300c\u5f93\u696d\u54e1\u60c5\u5831\u30fb\u30b7\u30d5\u30c8\u30fb\u6253\u523b\u5c65\u6b74\u30fb\u4e88\u5b9a\u30fb\u30bf\u30b9\u30af\u30fb\u30e1\u30c3\u30bb\u30fc\u30b8\u300d\u3092\u4e00\u62ec\u7ba1\u7406\u53ef\u80fd\u3002"))),r.a.createElement(Jt.a,{sx:So},r.a.createElement(ue.a,{spacing:2},r.a.createElement("img",{style:_o,src:mo.a}),r.a.createElement(Ue.a,{variant:"subtitle1"},"SPA\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3002\u4e0d\u8981\u306a\u30da\u30fc\u30b8\u66f4\u65b0\u3084\u30da\u30fc\u30b8\u9077\u79fb\u304c\u306a\u304f\u9ad8\u901f\u5316\u3059\u308b\u4ed5\u4e8b\u30b9\u30d4\u30fc\u30c9\u3078\u30b9\u30c8\u30ec\u30b9\u30d5\u30ea\u30fc\u306b\u5bfe\u5fdc\u3067\u304d\u307e\u3059\u3002")))),r.a.createElement(ue.a,{direction:"row",spacing:4,justifyContent:"center"},r.a.createElement(V.b,{to:"/signup"},r.a.createElement(le.a,{variant:"contained",color:"primary",size:"large"},"\u65b0\u898f\u767b\u9332")),r.a.createElement(V.b,{to:"/login"},r.a.createElement(le.a,{variant:"contained",color:"success",size:"large"},"\u767b\u9332\u6e08\u307f\u306e\u65b9"))))},Io=function(e){var t=e.component,a=Object(l.a)(e,["component"]),c=Object(n.useContext)(nt);return r.a.createElement(qe.b,Object.assign({render:function(e){return c.state.loggedIn?r.a.createElement(t,e):r.a.createElement(qe.a,{to:"/login"})}},a))},No=function(e){var t=e.component,a=Object(l.a)(e,["component"]),c=Object(n.useContext)(nt);return r.a.createElement(qe.b,Object.assign({render:function(e){return c.state.loggedIn&&c.state.chief?r.a.createElement(t,e):r.a.createElement(qe.a,{to:"/login"})}},a))},Po=function(){return r.a.createElement(V.a,null,r.a.createElement("div",null,r.a.createElement(qe.b,{exact:!0,path:"/",component:Do}),r.a.createElement(et,null,r.a.createElement(ke,null,r.a.createElement(ct,null,r.a.createElement(pe,null,r.a.createElement(qe.d,null,r.a.createElement(qe.b,{path:"/signup",component:Cc}),r.a.createElement(qe.b,{path:"/login",component:wc}),r.a.createElement(No,{exact:!0,path:"/Dashboard",component:xr}),r.a.createElement(No,{exact:!0,path:"/employees",component:ma}),r.a.createElement(Io,{exact:!0,path:"/employeeDashboard",component:jc}),r.a.createElement(Io,{exact:!0,path:"/chat",component:lo}))))))))},Fo=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1174)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)})};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Po,null)),document.getElementById("root")),Fo()},188:function(e,t,a){e.exports=a.p+"static/media/employee-default.e22677e7.jpg"},223:function(e,t,a){e.exports=a.p+"static/media/icon.d78a09ee.png"},276:function(e,t){},398:function(e,t,a){e.exports=a.p+"static/media/mountain.71506fe6.jpg"},403:function(e,t,a){e.exports=a.p+"static/media/offices-buildings-svgrepo-com.39957d64.svg"},415:function(e,t,a){e.exports=a.p+"static/media/desc_image1.7e269903.jpg"},416:function(e,t,a){e.exports=a.p+"static/media/desc_image2.bb044e3e.jpg"},417:function(e,t,a){e.exports=a.p+"static/media/employees.426a6714.png"},418:function(e,t,a){e.exports=a.p+"static/media/shift.47766b22.png"},419:function(e,t,a){e.exports=a.p+"static/media/manage.0fb1df28.png"},420:function(e,t,a){e.exports=a.p+"static/media/timestamp.f033fa29.png"},421:function(e,t,a){e.exports=a.p+"static/media/calendar.d181c0c0.png"},422:function(e,t,a){e.exports=a.p+"static/media/chat.a5c9cd23.png"},471:function(e,t,a){e.exports=a(1007)},476:function(e,t,a){},477:function(e,t,a){}},[[471,1,2]]]);
//# sourceMappingURL=main.2d38dca6.chunk.js.map